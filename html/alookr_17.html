<div class="container">

<table style="width: 100%;"><tr>
<td>sampling_target</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract the data to fit the model</h2>

<h3>Description</h3>

<p>To solve the imbalanced class, perform sampling in the train set of split_df.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sampling_target(
  .data,
  method = c("ubUnder", "ubOver", "ubSMOTE"),
  seed = NULL,
  perc = 50,
  k = ifelse(method == "ubSMOTE", 5, 0),
  perc.over = 200,
  perc.under = 200
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>an object of class "split_df", usually, a result of a call to split_df().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>character. sampling methods. "ubUnder" is under-sampling,
and "ubOver" is over-sampling, "ubSMOTE" is SMOTE(Synthetic Minority Over-sampling TEchnique).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>integer. random seed used for sampling</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perc</code></td>
<td>
<p>integer. The percentage of positive class in the final dataset.
It is used only in under-sampling. The default is 50. perc can not exceed 50.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>integer. It is used only in over-sampling and SMOTE.
If over-sampling and if K=0: sample with replacement from the minority class until
we have the same number of instances in each class. under-sampling and if K&gt;0:
sample with replacement from the minority class until we have k-times
the original number of minority instances.
If SMOTE, the number of neighbours to consider as the pool from where the new
examples are generated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perc.over</code></td>
<td>
<p>integer. It is used only in SMOTE. per.over/100 is the number of new instances
generated for each rare instance. If perc.over &lt; 100 a single instance is generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perc.under</code></td>
<td>
<p>integer. It is used only in SMOTE. perc.under/100 is the number
of "normal" (majority class) instances that are randomly selected for each smoted
observation.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In order to solve the problem of imbalanced class, sampling is performed by under sampling,
over sampling, SMOTE method.
</p>


<h3>Value</h3>

<p>An object of train_df.
</p>


<h3>attributes of train_df class</h3>

<p>The attributes of the train_df class are as follows.:
</p>

<ul>
<li>
<p> sample_seed : integer. random seed used for sampling
</p>
</li>
<li>
<p> method : character. sampling methods.
</p>
</li>
<li>
<p> perc : integer. perc argument value
</p>
</li>
<li>
<p> k : integer. k argument value
</p>
</li>
<li>
<p> perc.over : integer. perc.over argument value
</p>
</li>
<li>
<p> perc.under : integer. perc.under argument value
</p>
</li>
<li>
<p> binary : logical. whether the target variable is a binary class
</p>
</li>
<li>
<p> target : character. target variable name
</p>
</li>
<li>
<p> minority : character. the level of the minority class
</p>
</li>
<li>
<p> majority : character. the level of the majority class
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)

# Credit Card Default Data
head(ISLR::Default)

# Generate data for the example
sb &lt;- ISLR::Default %&gt;%
  split_by(default)

# under-sampling with random seed
under &lt;- sb %&gt;%
  sampling_target(seed = 1234L)

under %&gt;%
  count(default)

# under-sampling with random seed, and minority class frequency is 40%
under40 &lt;- sb %&gt;%
  sampling_target(seed = 1234L, perc = 40)

under40 %&gt;%
  count(default)

# over-sampling with random seed
over &lt;- sb %&gt;%
  sampling_target(method = "ubOver", seed = 1234L)

over %&gt;%
  count(default)

# over-sampling with random seed, and k = 10
over10 &lt;- sb %&gt;%
  sampling_target(method = "ubOver", seed = 1234L, k = 10)

over10 %&gt;%
  count(default)

# SMOTE with random seed
smote &lt;- sb %&gt;%
  sampling_target(method = "ubSMOTE", seed = 1234L)

smote %&gt;%
  count(default)

# SMOTE with random seed, and perc.under = 250
smote250 &lt;- sb %&gt;%
  sampling_target(method = "ubSMOTE", seed = 1234L, perc.under = 250)

smote250 %&gt;%
  count(default)

</code></pre>


</div>