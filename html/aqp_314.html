<div class="container">

<table style="width: 100%;"><tr>
<td>soilColorSignature</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Soil Profile Color Signatures</h2>

<h3>Description</h3>

<p>Generate a color signature for each soil profile in a collection.
</p>


<h3>Usage</h3>

<pre><code class="language-R">soilColorSignature(
  spc,
  r = "r",
  g = "g",
  b = "b",
  method = c("colorBucket", "depthSlices", "pam"),
  pam.k = 3,
  RescaleLightnessBy = 1,
  useProportions = TRUE,
  pigmentNames = c(".white.pigment", ".red.pigment", ".green.pigment", ".yellow.pigment",
    ".blue.pigment"),
  apply.fun = lapply
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>spc</code></td>
<td>
<p>a <code>SoilProfileCollection</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>horizon level attribute containing soil color (sRGB) red values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>horizon level attribute containing soil color (sRGB) green values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b</code></td>
<td>
<p>horizon level attribute containing soil color (sRGB) blue values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>algorithm used to compute color signature, <code>colorBucket</code>, <code>depthSlices</code>, or <code>pam</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pam.k</code></td>
<td>
<p>number of classes to request from <code>cluster::pam()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RescaleLightnessBy</code></td>
<td>
<p>rescaling factor for CIE LAB L-coordinate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useProportions</code></td>
<td>
<p>use proportions or quantities, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pigmentNames</code></td>
<td>
<p>names for resulting pigment proportions or quantities</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>apply.fun</code></td>
<td>
<p>function passed to <code>aqp::profileApply(APPLY.FUN)</code> argument, can be used to add progress bars via <code>pbapply::pblapply</code>, or parallel processing with <code>furrr::future_map</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See the <a href="http://ncss-tech.github.io/AQP/aqp/soil-color-signatures.html">related tutorial</a>.
</p>


<h3>Value</h3>

<p>For the <code>colorBucket</code> method, a <code>data.frame</code> object containing:
</p>

<ul>
<li>
<p> id column: set according to <code>idname(spc)</code>
</p>
</li>
<li> <p><code>.white.pigment</code>: proportion or quantity of CIE LAB L-values
</p>
</li>
<li> <p><code>.red.pigment</code>: proportion or quantity of CIE LAB positive A-values
</p>
</li>
<li> <p><code>.green.pigment</code>: proportion or quantity of CIE LAB negative A-values
</p>
</li>
<li> <p><code>.yellow.pigment</code>: proportion or quantity of CIE LAB positive B-values
</p>
</li>
<li> <p><code>.blue.pigment</code>: proportion or quantity of CIE LAB negative B-values
</p>
</li>
</ul>
<p>Column names can be adjusted with the <code>pigmentNames</code> argument.
</p>
<p>For the <code>depthSlices</code> method ...
</p>
<p>For the <code>pam</code> method ...
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>References</h3>

<p>https://en.wikipedia.org/wiki/Lab_color_space
</p>


<h3>See Also</h3>

<p><code>munsell2rgb</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# trivial example, not very interesting
data(sp1)
depths(sp1) &lt;- id ~ top + bottom

# convert Munsell -&gt; sRGB triplets
rgb.data &lt;- munsell2rgb(sp1$hue, sp1$value, sp1$chroma, return_triplets = TRUE)
sp1$r &lt;- rgb.data$r
sp1$g &lt;- rgb.data$g
sp1$b &lt;- rgb.data$b

# extract color signature
pig &lt;- soilColorSignature(sp1)

</code></pre>


</div>