<div class="container">

<table style="width: 100%;"><tr>
<td>regTable</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Register a new areal data table</h2>

<h3>Description</h3>

<p>This function registers a new areal data table into the geospatial database.
</p>


<h3>Usage</h3>

<pre><code class="language-R">regTable(
  ...,
  subset = NULL,
  dSeries = NULL,
  gSeries = NULL,
  label = NULL,
  begin = NULL,
  end = NULL,
  schema = NULL,
  archive = NULL,
  archiveLink = NULL,
  nextUpdate = NULL,
  updateFrequency = NULL,
  metadataLink = NULL,
  metadataPath = NULL,
  notes = NULL,
  update = FALSE,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>[<code>character(1)</code>]<br> name and value of the topmost unit under
which the table shall be registered. The name of this must be a class of
the gazetteer and the value must be one of the territory names of that
class, e.g. <em>nation = "Estonia"</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>[<code>character(1)</code>]<br> optional argument to specify which
subset the file contains. This could be a subset of territorial units (e.g.
only one municipality) or of a target variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dSeries</code></td>
<td>
<p>[<code>character(1)</code>]<br> the dataseries of the areal data (see
<code>regDataseries</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gSeries</code></td>
<td>
<p>[<code>character(1)</code>]<br> optionally, the dataseries of the
geometries, if the geometry dataseries deviates from the dataseries of the
areal data (see <code>regDataseries</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>[<code>integerish(1)</code>]<br> the label in the onology this geometry
should correspond to.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>begin</code></td>
<td>
<p>[<code>integerish(1)</code>]<br> the date from which on the data are
valid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>
<p>[<code>integerish(1)</code>]<br> the date until which the data are valid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>schema</code></td>
<td>
<p>[<code>list(1)</code>]<br> the schema description of the table to read
in (must have been placed in the global environment before calling it
here).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>archive</code></td>
<td>
<p>[<code>character(1)</code>]<br> the original file from which the
boundaries emerge.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>archiveLink</code></td>
<td>
<p>[<code>character(1)</code>]<br> download-link of the archive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nextUpdate</code></td>
<td>
<p>[<code>character(1)</code>]<br> when does the geometry dataset get
updated the next time (format restricted to: YYYY-MM-DD).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>updateFrequency</code></td>
<td>
<p>[<code>character(1)</code>]<br> value describing the
frequency with which the dataset is updated, according to the ISO 19115
Codelist, MD_MaintenanceFrequencyCode. Possible values are: 'continual',
'daily', 'weekly', 'fortnightly', 'quarterly', 'biannually', 'annually',
'asNeeded', 'irregular', 'notPlanned', 'unknown', 'periodic',
'semimonthly', 'biennially'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadataLink</code></td>
<td>
<p>[<code>character(1)</code>]<br> if there is already metadata
existing: link to the meta dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadataPath</code></td>
<td>
<p>[<code>character(1)</code>]<br> if an existing meta dataset was
downloaded along the data: the path where it is stored locally.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>notes</code></td>
<td>
<p>[<code>character(1)</code>]<br> optional notes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>update</code></td>
<td>
<p>[<code>logical(1)</code>]<br> whether or not the file 'inv_tables.csv'
should be updated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>[<code>logical(1)</code>]<br> whether or not the geometry to
register shall overwrite a potentially already existing older version.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When processing areal data tables, carry out the following steps:
</p>
 <ol>
<li>
<p> Determine the main territory (such as a nation, or any
other polygon), a <code>subset</code> (if applicable), the ontology
<code>label</code> and the dataseries of the areal data and of the geometry, and
provide them as arguments to this function. </p>
</li>
<li>
<p> Provide a <code>begin</code>
and <code>end</code> date for the areal data. </p>
</li>
<li>
<p> Run the function. </p>
</li>
<li>
<p>(Re)Save the table with the following properties: </p>
<ul>
<li>
<p> Format:
csv </p>
</li>
<li>
<p> Encoding: UTF-8 </p>
</li>
<li>
<p> File name: What is provided as message by
this function </p>
</li>
<li>
<p> make sure that the file is not modified or reshaped.
This will happen during data normalisation via the schema description,
which expects the original table.</p>
</li>
</ul>
</li>
<li>
<p> Confirm that you have saved the
file.</p>
</li>
</ol>
<p>Every areal data dataseries (<code>dSeries</code>) may come as a slight
permutation of a particular table arrangement. The function
<code>normTable</code> expects internally a schema description (a list
that describes the position of the data components) for each data table,
which is saved as <code>paste0("meta_", dSeries, TAB_NUMBER)</code>. See package
<code>tabshiftr</code>.
</p>


<h3>Value</h3>

<p>Returns a tibble of the entry that is appended to 'inv_tables.csv' in
case <code>update = TRUE</code>.
</p>


<h3>See Also</h3>

<p>Other register functions: 
<code>regDataseries()</code>,
<code>regGeometry()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if(dev.interactive()){
  # build the example database
  makeExampleDB(until = "regGeometry", path = tempdir())

  # the schema description for this table
  library(tabshiftr)

  schema_madeUp &lt;-
    setIDVar(name = "al1", columns = 1) %&gt;%
    setIDVar(name = "year", columns = 2) %&gt;%
    setIDVar(name = "commodities", columns = 3) %&gt;%
    setObsVar(name = "harvested",
              factor = 1, columns = 4) %&gt;%
    setObsVar(name = "production",
              factor = 1, columns = 5)

  regTable(nation = "Estonia",
           subset = "barleyMaize",
           dSeries = "madeUp",
           gSeries = "gadm",
           level = 1,
           begin = 1990,
           end = 2017,
           schema = schema_madeUp,
           archive = "example_table.7z|example_table1.csv",
           archiveLink = "...",
           nextUpdate = "2019-10-01",
           updateFrequency = "quarterly",
           metadataLink = "...",
           metadataPath = "my/local/path",
           update = TRUE)
}
</code></pre>


</div>