<div class="container">

<table style="width: 100%;"><tr>
<td>autotable</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Tabular experience study summary</h2>

<h3>Description</h3>

<p><code>autotable()</code> is a generic function used to create a table
from an object of a particular class. Tables are constructed using the
<code>gt</code> package.
</p>
<p><code>autotable.exp_df()</code> is used to convert experience study results to a
presentation-friendly format.
</p>
<p><code>autotable.trx_df()</code> is used to convert transaction study results to a
presentation-friendly format.
</p>


<h3>Usage</h3>

<pre><code class="language-R">autotable(object, ...)

## S3 method for class 'exp_df'
autotable(
  object,
  fontsize = 100,
  decimals = 1,
  colorful = TRUE,
  color_q_obs = "RColorBrewer::GnBu",
  color_ae_ = "RColorBrewer::RdBu",
  rename_cols = rlang::list2(...),
  show_conf_int = FALSE,
  show_cred_adj = FALSE,
  decimals_amt = 0,
  suffix_amt = FALSE,
  ...
)

## S3 method for class 'trx_df'
autotable(
  object,
  fontsize = 100,
  decimals = 1,
  colorful = TRUE,
  color_util = "RColorBrewer::GnBu",
  color_pct_of = "RColorBrewer::RdBu",
  rename_cols = rlang::list2(...),
  show_conf_int = FALSE,
  decimals_amt = 0,
  suffix_amt = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class <code>exp_df</code> usually created by the
function <code>exp_stats()</code> or an object of class <code>trx_df</code> created by the
<code>trx_stats()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>gt::gt()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fontsize</code></td>
<td>
<p>Font size percentage multiplier.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decimals</code></td>
<td>
<p>Number of decimals to display for percentages</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colorful</code></td>
<td>
<p>If <code>TRUE</code>, color will be added to the the observed
termination rate and actual-to-expected columns for termination studies, and
the utilization rate and "percentage of" columns for transaction studies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_q_obs</code></td>
<td>
<p>Color palette used for the observed termination rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_ae_</code></td>
<td>
<p>Color palette used for actual-to-expected rates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rename_cols</code></td>
<td>
<p>An optional list consisting of key-value pairs. This
can be used to relabel columns on the output table. This parameter is most
useful for renaming grouping variables that will appear under their original
variable names if left unchanged. See <code>gt::cols_label()</code> for more
information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_conf_int</code></td>
<td>
<p>If <code>TRUE</code> confidence intervals will be displayed
assuming they are available on <code>object</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_cred_adj</code></td>
<td>
<p>If <code>TRUE</code> credibility-weighted termination rates will
be displayed assuming they are available on <code>object</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decimals_amt</code></td>
<td>
<p>Number of decimals to display for amount columns (number
of claims, claim amounts, exposures, transaction counts, total transactions,
and average transactions)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suffix_amt</code></td>
<td>
<p>This argument has the same meaning as the <code>suffixing</code>
argument in <code>gt::fmt_number()</code> for amount columns. If <code>FALSE</code> (the default),
no scaling or suffixing are applied to amount columns. If <code>TRUE</code>, all amount
columns are automatically scaled and suffixed by "K" (thousands), "M"
(millions), "B" (billions), or "T" (trillions). See <code>gt::fmt_number()</code> for
more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_util</code></td>
<td>
<p>Color palette used for utilization rates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_pct_of</code></td>
<td>
<p>Color palette used for "percentage of" columns.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>color_q_obs</code>, <code>color_ae_</code>, <code>color_util</code>, and <code>color_pct_of</code> arguments
must be strings referencing a discrete color palette available in the
<code>paletteer</code> package. Palettes must be in the form "package::palette".
For a full list of available palettes, see paletteer::palettes_d_names.
</p>


<h3>Value</h3>

<p>a <code>gt</code> object
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if (interactive()) {
  study_py &lt;- expose_py(census_dat, "2019-12-31", target_status = "Surrender")
  expected_table &lt;- c(seq(0.005, 0.03, length.out = 10), 0.2, 0.15, rep(0.05, 3))

  study_py &lt;- study_py |&gt;
    mutate(expected_1 = expected_table[pol_yr],
           expected_2 = ifelse(inc_guar, 0.015, 0.03)) |&gt;
    add_transactions(withdrawals) |&gt;
    left_join(account_vals, by = c("pol_num", "pol_date_yr"))

  exp_res &lt;- study_py |&gt; group_by(pol_yr) |&gt;
    exp_stats(expected = c("expected_1", "expected_2"), credibility = TRUE,
              conf_int = TRUE)
  autotable(exp_res)

  trx_res &lt;- study_py |&gt; group_by(pol_yr) |&gt;
    trx_stats(percent_of = "av_anniv", conf_int = TRUE)
  autotable(trx_res)
}

</code></pre>


</div>