<div class="container">

<table style="width: 100%;"><tr>
<td>assert_ids</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assert that a data.frame contains all unique combinations of specified ID variables, and doesn't contain duplicates within combinations</h2>

<h3>Description</h3>

<p>Given a data.frame or data.table object and a named list of id_vars, assert that all possible combinations of id_vars exist in the dataset,
that no combinations of id_vars exist in the dataset but not in id_vars,
and that there are no duplicate values within the dataset within unique combinations of id_vars. <br><br>
If ids_only = T and assert_dups = T, returns all combinations of id_vars along with the <em>n_duplicates</em>: the count of duplicates within each combination.
If ids_only = F, returns all duplicate observations from the original dataset along with <em>n_duplicates</em>
and <em>duplicate_id</em>: a unique ID for each duplicate value within each combination of id_vars. <br></p>


<h3>Usage</h3>

<pre><code class="language-R">assert_ids(data, id_vars, assert_combos = TRUE, assert_dups = TRUE,
  ids_only = TRUE, warn_only = FALSE, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.frame or data.table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_vars</code></td>
<td>
<p>A named list of vectors, where the name of each vector must correspond to a column in <em>data</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>assert_combos</code></td>
<td>
<p>Assert that the data object must contain all combinations of <em>id_vars</em>. Default = T.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>assert_dups</code></td>
<td>
<p>Assert that the data object must not contain duplicate values within any combinations of <em>id_vars</em>. Default = T.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ids_only</code></td>
<td>
<p>By default, with assert_dups = T, the function returns the unique combinations of id_vars that have duplicate observations. 
If ids_only = F, will return every observation in the original dataset that are duplicates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn_only</code></td>
<td>
<p>Do you want to warn, rather than error? Will return all offending rows from the first violation of the assertion. Default=F.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Do you want to suppress the printed message when a test is passed? Default = F.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note: if assert_combos = T and is violated, then assert_ids will stop execution and return results for assert_combos
before evaluating the assert_dups segment of the code. 
If you want to make sure both options are evaluated even in case of a violation in assert_combos,
call assert_ids twice (once with assert_dups = F, then assert_combos = F) with warn_only = T, 
and then conditionally stop your code if either call returns results.
</p>


<h3>Value</h3>

<p>Throws error if test is violated. Will print the offending rows. If warn_only=T, will return all offending rows and only warn.
</p>


<h3>Examples</h3>

<pre><code class="language-R">plants &lt;- as.character(unique(CO2$Plant))
concs &lt;- unique(CO2$conc)
ids &lt;- list(Plant=plants,conc=concs)
assert_ids(CO2, ids)
</code></pre>


</div>