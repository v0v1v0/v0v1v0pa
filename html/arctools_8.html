<div class="container">

<table style="width: 100%;"><tr>
<td>impute_missing_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Impute missing data</h2>

<h3>Description</h3>

<p>Impute missing data in minute-level activity counts data vector based on
"average day profile".
</p>


<h3>Usage</h3>

<pre><code class="language-R">impute_missing_data(
  acc,
  wear_flag,
  valid_day_flag,
  imputeFromValidDaysOnly = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>acc</code></td>
<td>
<p>A numeric vector. A minute-level activity counts data vector.
It is assumed
to be in midnight-to-midnight format, meaning its vector length
is a multiple of number of minutes in a full day
(1440; see <code>midnight_to_midnight()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wear_flag</code></td>
<td>
<p>An integer vector.
Wear/non-wear flag (<code>1</code>/<code>0</code>) for each minute of activity
counts data. It is assumed
to be in midnight-to-midnight format, meaning its vector length
is a multiple of number of minutes in a full day
(1440). See <code>midnight_to_midnight()</code>, <code>get_wear_flag()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>valid_day_flag</code></td>
<td>
<p>An integer vector.
Valid/non-valid day flag (<code>1</code>/<code>0</code>) for each minute of activity
counts data. It is assumed
to be in midnight-to-midnight format, meaning its vector length
is a multiple of number of minutes in a full day
(1440).
See <code>arctools::midnight_to_midnight()</code>,
<code>arctools::get_valid_day_flag()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>imputeFromValidDaysOnly</code></td>
<td>
<p>A logical scalar. Whether or not data from
valid days only should be used for computing "average day profile"
used for imputation.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>An "average day profile" is computed as average across minutes identified
as wear and from valid days
(see param. <code>imputeFromValidDaysOnly</code>). Activity counts data are imputed
from "average day profile" for minutes identified as non-wear in days
identified as valid, except for minutes before/after data
collection start/end which remain <code>NA</code>.
</p>
<p>Theoretically, it is possible that all valid days of data collection have
non-wear flag for the some minute(s) (i.e., somebody is always
taking off the watch for the same few minutes during a day) so there is no
data to use to compute imputation values from. If it happens, then method
uses 0 as imputation value(s).
</p>


<h3>Value</h3>

<p>A numeric vector. A minute-level activity counts data vector
with data imputed for minutes identified as non-wear in days identified as valid
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Read exemplary data
fpath_i &lt;- system.file("extdata", extdata_fnames[1], package = "arctools")
dat_i   &lt;- as.data.frame(data.table::fread(fpath_i))
acc     &lt;- dat_i$vectormagnitude
acc_ts  &lt;- lubridate::ymd_hms(dat_i$timestamp)
## Get acc data vector in "midnight_to_midnight" format
acc &lt;- midnight_to_midnight(acc, acc_ts)
## Get wear/non-wear flag
wear_flag &lt;- get_wear_flag(acc)
## Get valid/non-valid day flag
valid_day_flag &lt;- get_valid_day_flag(wear_flag)
## Impute missing data in acc data vector
acc_imputed &lt;- impute_missing_data(acc, wear_flag, valid_day_flag)
## Compare mean acc before/after imputation
c(mean(acc, na.rm = TRUE), mean(acc_imputed, na.rm = TRUE))

</code></pre>


</div>