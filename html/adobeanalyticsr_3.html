<div class="container">

<table style="width: 100%;"><tr>
<td>aw_anomaly_report</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Anomaly Report</h2>

<h3>Description</h3>

<p>Get an anomaly report for one or more metrics
</p>


<h3>Usage</h3>

<pre><code class="language-R">aw_anomaly_report(
  company_id = Sys.getenv("AW_COMPANY_ID"),
  rsid = Sys.getenv("AW_REPORTSUITE_ID"),
  date_range = c(Sys.Date() - 31, Sys.Date() - 1),
  metrics,
  granularity = "day",
  segmentId = NA,
  quickView = FALSE,
  anomalyDetection = TRUE,
  countRepeatInstances = TRUE,
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>company_id</code></td>
<td>
<p>Company Id.  Taken from the global environment by default if not provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rsid</code></td>
<td>
<p>Adobe report number</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_range</code></td>
<td>
<p>A two length vector of start and end Date objects (default set to show last 30 days)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metrics</code></td>
<td>
<p>Metric to request the anomaly detection. If multiple metrics, each metric and date will have it's own row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>granularity</code></td>
<td>
<p>Use either hour, day (default), week, or month</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>segmentId</code></td>
<td>
<p>Use segments to globally filter the results. Use 1 or many.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quickView</code></td>
<td>
<p>Return a list of 3 lists per metric. 1. All Data 2. Data filtered to include only anomalous rows 3. Interactive ggplot line graph</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anomalyDetection</code></td>
<td>
<p>logical statement for including anomaly. Default is TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>countRepeatInstances</code></td>
<td>
<p>Should the data include repeat instances</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>debug</code></td>
<td>
<p>default is FALSE but set to TRUE to see the json request being sent to the Adobe API</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If quickView = 'FALSE' (default) then a data frame including the day, metric, data, dataExpected, dataUpperBound, dataLowerBound, and
dataAnomalyDetected will be returned.  If quickView = 'TRUE' then a list of three lists will be returned. The first list will be a data frame including
all the default columns. The second list item will be a filtered data frame that includes rows where dataAnomalyDetected = 'TRUE'.  The third list
item is a visual made using 'ggplot2'  with the error band and points where the dataAnomalyDetected = 'TRUE'. If more than one metric is in the request
and quickView is set to TRUE then the lists will be split by each metric requested.
</p>


</div>