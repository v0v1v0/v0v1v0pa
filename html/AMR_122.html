<div class="container">

<table style="width: 100%;"><tr>
<td>bug_drug_combinations</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Determine Bug-Drug Combinations</h2>

<h3>Description</h3>

<p>Determine antimicrobial resistance (AMR) of all bug-drug combinations in your data set where at least 30 (default) isolates are available per species. Use <code>format()</code> on the result to prettify it to a publishable/printable format, see <em>Examples</em>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bug_drug_combinations(x, col_mo = NULL, FUN = mo_shortname, ...)

## S3 method for class 'bug_drug_combinations'
format(
  x,
  translate_ab = "name (ab, atc)",
  language = get_AMR_locale(),
  minimum = 30,
  combine_SI = TRUE,
  add_ab_group = TRUE,
  remove_intrinsic_resistant = FALSE,
  decimal.mark = getOption("OutDec"),
  big.mark = ifelse(decimal.mark == ",", ".", ","),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a data set with antibiotic columns, such as <code>amox</code>, <code>AMX</code> and <code>AMC</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_mo</code></td>
<td>
<p>column name of the names or codes of the microorganisms (see <code>as.mo()</code>) - the default is the first column of class <code>mo</code>. Values will be coerced using <code>as.mo()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>the function to call on the <code>mo</code> column to transform the microorganism codes - the default is <code>mo_shortname()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed on to <code>FUN</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>translate_ab</code></td>
<td>
<p>a character of length 1 containing column names of the antibiotics data set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>language</code></td>
<td>
<p>language of the returned text - the default is the current system language (see <code>get_AMR_locale()</code>) and can also be set with the package option <code>AMR_locale</code>. Use <code>language = NULL</code> or <code>language = ""</code> to prevent translation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minimum</code></td>
<td>
<p>the minimum allowed number of available (tested) isolates. Any isolate count lower than <code>minimum</code> will return <code>NA</code> with a warning. The default number of <code>30</code> isolates is advised by the Clinical and Laboratory Standards Institute (CLSI) as best practice, see <em>Source</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>combine_SI</code></td>
<td>
<p>a logical to indicate whether values S and I should be summed, so resistance will be based on only R - the default is <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_ab_group</code></td>
<td>
<p>a logical to indicate where the group of the antimicrobials must be included as a first column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_intrinsic_resistant</code></td>
<td>
<p>logical to indicate that rows and columns with 100% resistance for all tested antimicrobials must be removed from the table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decimal.mark</code></td>
<td>
<p>the character to be used to indicate the numeric
decimal point.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>big.mark</code></td>
<td>
<p>character; if not empty used as mark between every
<code>big.interval</code> decimals <em>before</em> (hence <code>big</code>) the
decimal point.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function <code>format()</code> calculates the resistance per bug-drug combination and returns a table ready for reporting/publishing. Use <code>combine_SI = TRUE</code> (default) to test R vs. S+I and <code>combine_SI = FALSE</code> to test R+I vs. S. This table can also directly be used in R Markdown / Quarto without the need for e.g. <code>knitr::kable()</code>.
</p>


<h3>Value</h3>

<p>The function <code>bug_drug_combinations()</code> returns a data.frame with columns "mo", "ab", "S", "I", "R" and "total".
</p>


<h3>Examples</h3>

<pre><code class="language-R"># example_isolates is a data set available in the AMR package.
# run ?example_isolates for more info.
example_isolates


x &lt;- bug_drug_combinations(example_isolates)
head(x)
format(x, translate_ab = "name (atc)")

# Use FUN to change to transformation of microorganism codes
bug_drug_combinations(example_isolates,
  FUN = mo_gramstain
)

bug_drug_combinations(example_isolates,
  FUN = function(x) {
    ifelse(x == as.mo("Escherichia coli"),
      "E. coli",
      "Others"
    )
  }
)

</code></pre>


</div>