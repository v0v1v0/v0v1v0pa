<div class="container">

<table style="width: 100%;"><tr>
<td>prob_better</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate probabilities of comparisons of arms against with common control</h2>

<h3>Description</h3>

<p>Used internally. This function takes a <code>matrix</code> as calculated by the
<code>get_draws_binom()</code>, <code>get_draws_norm()</code> or a corresponding custom function
(as specified using the <code>fun_draws</code> argument in <code>setup_trial()</code>; see
<code>get_draws_generic()</code>) and a single character specifying the <code>control</code> arm,
and calculates the probabilities of each arm being better than a common
<code>control</code> (defined as either higher or lower than the <code>control</code>, as specified
by the <code>highest_is_best</code> argument in <code>setup_trial()</code>, <code>setup_trial_binom()</code>
or <code>setup_trial_norm()</code>). This function also calculates equivalence and
futility probabilities compared to the common <code>control</code> arm, as specified in
<code>setup_trial()</code>, <code>setup_trial_binom()</code> or <code>setup_trial_norm()</code>, unless
<code>equivalence_diff</code> or <code>futility_diff</code>, respectively, are set to <code>NULL</code>
(the default).
</p>


<h3>Usage</h3>

<pre><code class="language-R">prob_better(
  m,
  control = NULL,
  highest_is_best = FALSE,
  equivalence_diff = NULL,
  futility_diff = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>a matrix with one column per trial arm (named as the <code>arms</code>) and one
row for each draw from the posterior distributions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p>a single character string specifying the common <code>control</code> arm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>highest_is_best</code></td>
<td>
<p>single logical, specifies whether larger estimates of
the outcome are favourable or not; defaults to <code>FALSE</code>, corresponding to,
e.g., an undesirable binary outcomes (e.g., mortality) or a continuous
outcome where lower numbers are preferred (e.g., hospital length of stay).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>equivalence_diff</code></td>
<td>
<p>single numeric value (<code style="white-space: pre;">⁠&gt; 0⁠</code>) or <code>NULL</code> (default,
corresponding to no equivalence assessment). If a numeric value is
specified, estimated absolute differences smaller than this threshold will
be considered equivalent. For designs with a common <code>control</code> arm, the
differences between each non-control arm and the <code>control</code> arm is used, and
for trials without a common <code>control</code> arm, the difference between the
highest and lowest estimated outcome rates are used and the trial is only
stopped for equivalence if all remaining arms are equivalent.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>futility_diff</code></td>
<td>
<p>single numeric value (<code style="white-space: pre;">⁠&gt; 0⁠</code>) or <code>NULL</code> (default,
corresponding to no futility assessment). If a numeric value is specified,
estimated differences below this threshold in the <em>beneficial</em> direction
(as specified in <code>highest_is_best</code>) will be considered futile when
assessing futility in designs with a common <code>control</code> arm. If only 1 arm
remains after dropping arms for futility, the trial will be stopped without
declaring the last arm superior.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A named (row names corresponding to the trial <code>arms</code>) <code>matrix</code>
containing 1-3 columns: <code>probs_better</code>, <code>probs_equivalence</code> (if
<code>equivalence_diff</code> is specified), and <code>probs_futile</code> (if <code>futility_diff</code> is
specified). All columns will contain <code>NA</code> for the control arm.
</p>


</div>