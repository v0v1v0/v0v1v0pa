<div class="container">

<table style="width: 100%;"><tr>
<td>cal_block_energy</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculation of Item Block "Energy"</h2>

<h3>Description</h3>

<p>Calculates the total "energy" of one or multiple paired
item blocks, which is a linear combination of different functions
applied to different item characteristics of interest.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cal_block_energy(block, item_chars, weights, FUN)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>block</code></td>
<td>
<p>An <em>n</em> by <em>k</em> integer matrix,
where <em>n</em> is the number of item blocks
and <em>k</em> is the number of items per block.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>item_chars</code></td>
<td>
<p>An <em>m</em> by <em>r</em> data frame,
where <em>m</em> is the total number of items to sample from,
whether it is included in the block or not,
whereas <em>r</em> is the number of item characteristics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A vector of length <em>r</em> with weights for each
item characteristics in <code>item_chars</code>.
Should provide a weight of 0 for specific characteristics
not of interest, such as item ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>A vector of customized function names for optimizing each
item characteristic within each block, with length <em>r</em>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This energy calculation function serves as the core for determining the
acceptance or rejection of a newly built block over the previous one.
</p>
<p>Higher energy is considered more preferable in this case.
</p>
<p>Items in the same block can be paired based on characteristics such as:
</p>
<p>Mean score, Item Factor, Factor loading, Item IRT Parameters,
Reverse Coding, etc.
</p>
<p>Pairings of different characteristics can be optimized in different way,
by determining the customized function vector <code>FUN</code>
and the corresponding <code>weights</code>.
</p>


<h3>Value</h3>

<p>A numeric value indicating the total energy
for the given item block(s).
</p>


<h3>Note</h3>

<p>Use <code>cal_block_energy_with_iia</code> if inter-item agreement
(IIA) metrics are needed.
</p>


<h3>Author(s)</h3>

<p>Mengtong Li
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Simulate 60 items loading on different Big Five dimensions,
## with different mean and item difficulty

item_dims &lt;- sample(c("Openness","Conscientiousness","Neuroticism",
                     "Extraversion","Agreeableness"), 60, replace = TRUE)
item_mean &lt;- rnorm(60, 5, 2)
item_difficulty &lt;- runif(60, -1, 1)

## Construct data frame for item characteristics and produce
## 20 random triplet blocks with these 60 items

item_df &lt;- data.frame(Dimensions = item_dims, Mean = item_mean,
                     Difficulty = item_difficulty)
solution &lt;- make_random_block(60, 60, 3)

## See ?facfun for its use.
cal_block_energy(solution, item_chars = item_df,
              weights = c(1,1,1), FUN = c("facfun", "var", "var"))

</code></pre>


</div>