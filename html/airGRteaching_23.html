<div class="container">

<table style="width: 100%;"><tr>
<td>PrepGR</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creation of the inputs required to run the CalGR and SimGR functions</h2>

<h3>Description</h3>

<p>Creation of the inputs required to run the CalGR and SimGR functions</p>


<h3>Usage</h3>

<pre><code class="language-R">PrepGR(ObsDF = NULL, DatesR = NULL, Precip = NULL, PotEvap = NULL,
       Qobs = NULL, TempMean = NULL,
       ZInputs = NULL, HypsoData = NULL, NLayers = 5,
       HydroModel, CemaNeige = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ObsDF</code></td>
<td>
<p>(optional) [data.frame] data.frame of dates, total precipitation, potential evapotranspiration, observed discharges and mean air temperature (only if CemaNeige is used) (variables must be in this order; see below for the units)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DatesR</code></td>
<td>
<p>(optional) [POSIXt] vector of dates required to create the GR and CemaNeige (if used) models inputs. Time zone must be defined as "UTC"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Precip</code></td>
<td>
<p>(optional) [numeric] time series of total precipitation (catchment average) [mm/time step], required to create the GR and CemaNeige (if used) models inputs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PotEvap</code></td>
<td>
<p>(optional) [numeric] time series of potential evapotranspiration (catchment average) [mm/time step], required to create the GR model inputs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Qobs</code></td>
<td>
<p>(optional) [numeric] time series of observed discharges [mm/time step]</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TempMean</code></td>
<td>
<p>(optional) [numeric] time series of mean air temperature [Â°C], required to create the CemaNeige model inputs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ZInputs</code></td>
<td>
<p>(optional) [numeric] real giving the mean elevation of the Precip and TempMean series (before extrapolation) [m], possibly used to create the CemaNeige (if used) model inputs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HypsoData</code></td>
<td>
<p>(optional) [numeric] vector of 101 reals: min, q01 to q99 and max of catchment elevation distribution [m]; if not defined a single elevation is used for CemaNeige (if used)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NLayers</code></td>
<td>
<p>(optional) [numeric] integer giving the number of elevation layers requested [-], required to create CemaNeige (if used) model inputs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HydroModel</code></td>
<td>
<p>[character] name of the hydrological model (must be one of <code>"GR1A"</code>, <code>"GR2M"</code>, <code>"GR4J"</code>, <code>"GR5J"</code>, <code>"GR6J"</code>, <code>"GR4H"</code> or <code>"GR5H"</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CemaNeige</code></td>
<td>
<p>[boolean] option indicating whether CemaNeige should be activated (only available for hourly or daily models, when <code>HydroModel</code> is equal to any of <code>"GR4J"</code>, <code>"GR5J"</code>, <code>"GR6J"</code>, <code>"GR4H"</code> or <code>"GR5H"</code>). See details</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If the <code>ObsDF</code> argument is provided, <code>DatesR</code>, <code>Precip</code>, <code>PotEvap</code>, <code>Qobs</code> and <code>TempMean</code> are not necessary, and vice-versa. If one variable is provided in <code>ObsDF</code> and also separately, then only the data included in <code>ObsDF</code> are used.
<br><br>
If <code>HydroModel = "GR5H"</code>, by default, this model is used without the interception store (i.e. without specifying <code>Imax</code>; see <code>RunModel_GR5H</code>).
<br><br>
If the <code>CemaNeige</code> argument is set to <code>TRUE</code>, the default version of CemaNeige is used (i.e. without the Linear Hysteresis, see the details part in <code>CreateRunOptions</code>).
<br><br>
The <code>PrepGR</code> function can be used even if no observed discharges are available. In this case, it is necessary to provide observed discharges time series equal to NA: this means that either the <code>ObsDF</code> observed discharges column or the <code>Qobs</code> arguments, depending on the format of data you provide, must be provided and filled with NAs.
</p>


<h3>Value</h3>

<p>[list] object of class <code>PrepGR</code> containing the data required to evaluate the model outputs:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>InputsModel</code></td>
<td>
<p>[list] object of class <em>InputsModel</em> containing the data required to evaluate the model outputs (see: <code>CreateInputsModel</code> outputs)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Qobs</code></td>
<td>
<p>[numeric] time series of observed discharges [mm/time step]</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HydroModel</code></td>
<td>
<p>[character] name of the function of the hydrological model used</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Olivier Delaigue</p>


<h3>See Also</h3>

<p>airGRteaching
<code>plot</code> and  <code>dyplot</code>
functions to display static and dynamic plots
<br><br>
airGR
<code>CreateInputsModel</code>
function
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(airGRteaching)

## data.frame of observed data
data(L0123001, package = "airGR")
BasinObs2 &lt;- BasinObs[, c("DatesR", "P", "E", "Qmm", "T")]

## Preparation of observed data for modelling when inputs set by using a data.frame
PREP &lt;- PrepGR(ObsDF = BasinObs2, HydroModel = "GR4J", CemaNeige = FALSE)


## Structure of PrepGR object
str(PREP)

## Static plot of observed time series
plot(PREP)

## Dynamic plot of observed time series
dyplot(PREP)


## Preparation of observed data for modelling when inputs set by using independant vectors
PREP &lt;- PrepGR(DatesR = BasinObs2$DatesR, Precip = BasinObs2$P,
               PotEvap = BasinObs2$E, Qobs = BasinObs2$Qmm,
               HydroModel = "GR4J", CemaNeige = FALSE)


## Preparation of observed data for an ungauged catchment (i.e. no observed discharge available)
## Observed discharge set to NA in the Qobs argument
##   or in the 4th column of the data.frame if the ObsDF argument is used
PREP &lt;- PrepGR(DatesR = BasinObs2$DatesR, Precip = BasinObs2$P,
               PotEvap = BasinObs2$E, Qobs = NA,
               HydroModel = "GR4J", CemaNeige = FALSE)
</code></pre>


</div>