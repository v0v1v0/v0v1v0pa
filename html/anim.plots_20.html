<div class="container">

<table style="width: 100%;"><tr>
<td>anim.plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an animated plot.</h2>

<h3>Description</h3>

<p><code>anim.plot</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">anim.plot(...)

anim.points(...)

anim.lines(...)

anim.text(...)

## Default S3 method:
anim.plot(
  x,
  y = NULL,
  times = 1:length(x),
  speed = 1,
  show = TRUE,
  use.times = TRUE,
  window = if (identical(fn, lines)) t:(t + 1) else t,
  window.process = NULL,
  xlim = NULL,
  ylim = NULL,
  col = par("col"),
  xaxp = NULL,
  yaxp = NULL,
  pch = par("pch"),
  cex = 1,
  labels = NULL,
  asp = NULL,
  lty = par("lty"),
  lwd = par("lwd"),
  fn = plot,
  ...
)

## S3 method for class 'formula'
anim.plot(
  formula,
  data = parent.frame(),
  subset = NULL,
  fn = plot,
  window = t,
  ...
)

## Default S3 method:
anim.points(...)

## Default S3 method:
anim.lines(...)

## Default S3 method:
anim.text(...)

anim.symbols(...)

## S3 method for class 'formula'
anim.points(formula, ...)

## S3 method for class 'formula'
anim.lines(formula, ...)

## S3 method for class 'formula'
anim.text(formula, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x, y</code></td>
<td>
<p>vectors of x and y coordinates. These can be passed in any way 
accepted by <code>xy.coords</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>a vector of times. If <code>times</code> is length one, there will
be that many frames, equally divided over the length of <code>x</code> and <code>y</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>speed</code></td>
<td>
<p>animation speed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show</code></td>
<td>
<p>if false, do not show plot; just return calls.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.times</code></td>
<td>
<p>if <code>TRUE</code>, animation speed is determined by the 
<code>times</code> argument. If <code>FALSE</code>, animation speed is constant.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p>what window of times to show in each animation. The default,
<code>t</code>, shows just plots from time t. To draw a plot incrementally,
use <code>window=1:t</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window.process</code></td>
<td>
<p>function to call on each window of each times. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim, ylim, col, pch</code></td>
<td>
<p>arguments passed to <code>plot</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels, cex, lty, lwd</code></td>
<td>
<p>as above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asp, xaxp, yaxp, ...</code></td>
<td>
<p>as above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fn</code></td>
<td>
<p>function called to create each frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>a <code>formula</code> of the form <code>y ~ x + time</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame from where the values in <code>formula</code> should be 
taken.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>a vector specifying which rows of <code>data</code> to use.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Each unique level of <code>times</code> will generate a single frame of animation. 
The frames will be ordered by <code>times</code>.
</p>
<p>In general:
</p>
 
<ul>
<li>
<p> Parameters that apply to each point of the plot, such as 
<code>xlim, ylim, col, pch, labels</code> and <code>cex</code>, can be passed as vectors 
which will be recycled to <code>length(times)</code>. 
</p>
</li>
<li>
<p> Parameters that apply
to the plot as a whole, and always have length 1, such as <code>xlab</code> and
<code>main</code>, can be passed as vectors and will be recycled to the number of
frames. 
</p>
</li>
<li>
<p> Parameters that apply to the plot as a whole, and can have
length &gt; 1, such as <code>xlim</code> and <code>ylim</code>, can be passed as vectors or
matrices. If vectors, the same vector will be passed to every frame. If
matrices, column <code>i</code> will be passed to the <code>i</code>'th frame. 
</p>
</li>
</ul>
<p><code>window.process</code> should be a function which takes
two arguments: a list of potential arguments for the underlying
call to <code>plot</code>, and a vector of times. The function should return
the list of arguments after modification. This allows e.g. drawing 
"trails" of plot points. See the example
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- rep(1:100/10, 10)
times &lt;- rep(1:10, each=100)
y &lt;- sin(x*times/4)
anim.plot(x,y,times, type="l", col="orange", lwd=2)

## changing colours - a per-point parameter
anim.plot(x,y,times, ylab="Sine wave", type="p", col=rainbow(100)[x *10])

## changing line width - a whole-plot parameter
anim.plot(x, y, times, lwd=1:10, type="l")
          
## times as a single number
anim.plot(1:10, 1:10, times=5)
           
## incremental plot
anim.plot(1:10, 1:10, window=1:t)

## moving window
anim.plot(1:10, 1:10, window=(t-2):t)

## Formula interface
ChickWeight$chn &lt;- as.numeric(as.factor(ChickWeight$Chick))
tmp &lt;- anim.plot(weight ~ chn + Time, data=ChickWeight, col=as.numeric(Diet), 
     pch=as.numeric(Diet), speed=3)

# adding extra arguments:
replay(tmp, after=legend("topleft", legend=paste("Diet", 1:4), pch=1:4, col=1:4))
 
 ## Zooming in:
 x &lt;- rnorm(4000); y&lt;- rnorm(4000)
 x &lt;- rep(x, 10); y &lt;- rep(y, 10)
 xlims &lt;- 4*2^(-(1:10/10))
 ylims &lt;- xlims &lt;- rbind(xlims, -xlims) 
 anim.plot(x, y, times=10, speed=5, xlim=xlims, ylim=ylims, 
       col=rgb(0,0,0,.3), pch=19)
 
 ## window.process to create a faded "trail":
 anim.plot(1:50, 1:50, speed=12, window=t:(t+5), 
       window.process=function(args, times){
         times &lt;- times - min(times) 
         alpha &lt;- times/max(times)
         alpha[is.na(alpha)] &lt;- 1
         args$col &lt;- rgb(0,0,0, alpha)
         return(args)
       })
       
 ## gapminder plot:
 pl &lt;- palette(adjustcolor(rainbow(23), 1, .6, .6, .6, 
       offset=c(0,0,0,-0.1)))
 anim.plot(lifex ~ GDP + year, data=gm_data, log="x", 
      cex=sqrt(pop)*0.0004, pch=19, col=region, xlab="GDP", 
      ylab="Life expectancy", speed=10, subset=year &gt; 1850 &amp; !year %% 5)
 palette(pl)
 
 ## Not run: 
 ## Earthquakes this week
 if (require('maps')) {
   eq = read.table(
       file="http://earthquake.usgs.gov/earthquakes/catalogs/eqs7day-M1.txt", 
       fill=TRUE, sep=",", header=TRUE)
   eq$time &lt;- as.numeric(strptime(eq$Datetime, "%A, %B %d, %Y %X UTC"))
 eq &lt;- eq[-1,]
   map('world')
   maxdepth &lt;- max(max(eq$Depth), 200)
   tmp &lt;- anim.points(Lat ~ Lon + time, data=eq, cex=Magnitude, col=rgb(
         1-Depth/maxdepth, 0, Depth/maxdepth,.7), pch=19, speed=3600*12, 
         show=FALSE)   
   replay(tmp, before=map('world', fill=TRUE, col="wheat"))
 }
 
 
 ## Minard's plot
 if (require('maps')) {
   map('world', xlim=c(22, 40), ylim=c(52,58))
   title("March of the Grande Armee on Moscow")
   points(cities$long, cities$lat, pch=18)
   text(cities$long, cities$lat, labels=cities$city, pos=4, cex=.7)
   with(troops[troops$group==1,], anim.lines(x=long, 
         y=lat, window=t:(t+1), speed=3, lwd=survivors/10000))
}

## End(Not run)
</code></pre>


</div>