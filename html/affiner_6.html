<div class="container">

<table style="width: 100%;"><tr>
<td>affineGrob</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Affine transformation grob</h2>

<h3>Description</h3>

<p><code>affineGrob()</code> is a grid grob function to facilitate
using the group affine transformation features introduced in R 4.2.
</p>


<h3>Usage</h3>

<pre><code class="language-R">affineGrob(
  grob,
  vp_define = NULL,
  transform = NULL,
  vp_use = NULL,
  name = NULL,
  gp = grid::gpar(),
  vp = NULL
)

grid.affine(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>grob</code></td>
<td>
<p>A grid grob to perform affine transformations on.  Passed to <code>grid::defineGrob()</code> as its <code>src</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vp_define</code></td>
<td>
<p><code>grid::viewport()</code> to define grid group in.  Passed to <code>grid::defineGrob()</code> as its <code>vp</code> argument.
This will cumulative with the current viewport and the <code>vp</code> argument (if any),
if this cumulative viewport falls outside the graphics device drawing area this
grob may be clipped on certain graphics devices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transform</code></td>
<td>
<p>An affine transformation function.
If <code>NULL</code> default to <code>grid::viewportTransform()</code>.
Passed to <code>grid::useGrob()</code> as its <code>transform</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vp_use</code></td>
<td>
<p><code>grid::viewport()</code> passed to <code>grid::useGrob()</code> as its <code>vp</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>A character identifier (for grid).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gp</code></td>
<td>
<p>A <code>grid::gpar()</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vp</code></td>
<td>
<p>A <code>grid::viewport()</code> object (or <code>NULL</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Passed to <code>affineGrob()</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>grid::gTree()</code> (grob) object of class "affine".
As a side effect <code>grid.affine()</code> draws to the active graphics device.
</p>


<h3>See Also</h3>

<p>See <code>affine_settings()</code> for computing good <code>transform</code> and <code>vp_use</code> settings.
See <a href="https://www.stat.auckland.ac.nz/~paul/Reports/GraphicsEngine/groups/groups.html">https://www.stat.auckland.ac.nz/~paul/Reports/GraphicsEngine/groups/groups.html</a>
for more information about the group affine transformation feature.
See <code>isocubeGrob()</code> which wraps this function to render isometric cubes.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (require("grid")) {
  grob &lt;- grobTree(rectGrob(gp = gpar(fill = "blue", col = NA)),
                   circleGrob(gp=gpar(fill="yellow", col = NA)),
                   textGrob("RSTATS", gp=gpar(fontsize=32)))
  grid.newpage()
  pushViewport(viewport(width=unit(4, "in"), height=unit(2, "in")))
  grid.draw(grob)
  popViewport()
}

if (require("grid") &amp;&amp;
    getRversion() &gt;= "4.2.0" &amp;&amp;
    isTRUE(dev.capabilities()$transformations)) {
  # Only works if active graphics device supports affine transformations
  # such as `png(type="cairo")` on R 4.2+
  vp_define &lt;- viewport(width=unit(2, "in"), height=unit(2, "in"))
  affine &lt;- affineGrob(grob, vp_define=vp_define)
  grid.newpage()
  pushViewport(viewport(width=unit(4, "in"), height=unit(2, "in")))
  grid.draw(affine)
  popViewport()
}
if (require("grid") &amp;&amp;
    getRversion() &gt;= "4.2.0" &amp;&amp;
    isTRUE(dev.capabilities()$transformations)) {
  # Only works if active graphics device supports affine transformations
  # such as `png(type="cairo")` on R 4.2+
  settings &lt;- affine_settings(xy = list(x = c(3/3, 2/3, 0/3, 1/3),
                                        y = c(2/3, 1/3, 1/3, 2/3)),
                              unit = "snpc")
  affine &lt;- affineGrob(grob,
                       vp_define = vp_define,
                       transform = settings$transform,
                       vp_use = settings$vp)
  grid.newpage()
  grid.draw(affine)
}
</code></pre>


</div>