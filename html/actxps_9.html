<div class="container">

<table style="width: 100%;"><tr>
<td>is_exposed_df</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Exposed data frame helper functions</h2>

<h3>Description</h3>

<p>Test for and coerce to the <code>exposed_df</code> class.
</p>


<h3>Usage</h3>

<pre><code class="language-R">is_exposed_df(x)

as_exposed_df(
  x,
  end_date,
  start_date = as.Date("1900-01-01"),
  target_status = NULL,
  cal_expo = FALSE,
  expo_length = c("year", "quarter", "month", "week"),
  trx_types = NULL,
  col_pol_num,
  col_status,
  col_exposure,
  col_pol_per,
  cols_dates,
  col_trx_n_ = "trx_n_",
  col_trx_amt_ = "trx_amt_",
  default_status
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object. For <code>as_exposed_df()</code>, <code>x</code> must be a data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_date</code></td>
<td>
<p>Experience study end date</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date</code></td>
<td>
<p>Experience study start date. Default value = 1900-01-01.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target_status</code></td>
<td>
<p>Character vector of target status values. Default value
= <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cal_expo</code></td>
<td>
<p>Set to TRUE for calendar year exposures. Otherwise policy
year exposures are assumed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expo_length</code></td>
<td>
<p>Exposure period length</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trx_types</code></td>
<td>
<p>Optional. Character vector containing unique transaction
types that have been attached to <code>x</code>. For each value in <code>trx_types</code>,
<code>as_exposed_df</code> requires that columns exist in <code>x</code> named <code style="white-space: pre;">⁠trx_n_{*}⁠</code> and
<code style="white-space: pre;">⁠trx_amt_{*}⁠</code> containing transaction counts and amounts, respectively. The
prefixes "trx_n_" and "trx_amt_" can be overridden using the <code>col_trx_n_</code>
and <code>col_trx_amt_</code> arguments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_pol_num</code></td>
<td>
<p>Optional. Name of the column in <code>x</code> containing the policy
number. The assumed default is "pol_num".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_status</code></td>
<td>
<p>Optional. Name of the column in <code>x</code> containing the policy
status. The assumed default is "status".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_exposure</code></td>
<td>
<p>Optional. Name of the column in <code>x</code> containing exposures.
The assumed default is "exposure".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_pol_per</code></td>
<td>
<p>Optional. Name of the column in <code>x</code> containing policy
exposure periods. Only necessary if <code>cal_expo</code> is <code>FALSE</code>. The assumed
default is either "pol_yr", "pol_qtr", "pol_mth", or "pol_wk" depending on
the value of <code>expo_length</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols_dates</code></td>
<td>
<p>Optional. Names of the columns in <code>x</code> containing exposure
start and end dates. Both date ranges are assumed to be exclusive. The
assumed default is of the form <em>A</em>_<em>B</em>. <em>A</em> is "cal" if <code>cal_expo</code> is <code>TRUE</code>
or "pol" otherwise. <em>B</em> is either "yr", "qtr", "mth", or "wk" depending on
the value of <code>expo_length</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_trx_n_</code></td>
<td>
<p>Optional. Prefix to use for columns containing transaction
counts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_trx_amt_</code></td>
<td>
<p>Optional. Prefix to use for columns containing transaction
amounts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default_status</code></td>
<td>
<p>Optional scalar character representing the default
active status code. If not provided, the most common status is assumed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>is_exposed_df()</code> will return <code>TRUE</code> if <code>x</code> is an <code>exposed_df</code> object.
</p>
<p><code>as_exposed_df()</code> will coerce a data frame to an <code>exposed_df</code> object if that
data frame has columns for policy numbers, statuses, exposures,
policy periods (for policy exposures only), and exposure start / end dates.
Optionally, if <code>x</code> has transaction counts and amounts by type, these can
be specified without calling <code>add_transactions()</code>.
</p>


<h3>Value</h3>

<p>For <code>is_exposed_df()</code>, a length-1 logical vector. For
<code>as_exposed_df()</code>, an <code>exposed_df</code> object.
</p>


<h3>See Also</h3>

<p><code>expose()</code> for information on how <code>exposed_df</code> objects are typically
created from census data.
</p>


</div>