<div class="container">

<table style="width: 100%;"><tr>
<td>accrual_plot_abs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Absolute accrual plots</h2>

<h3>Description</h3>

<p>Plot of absolute recruitment by time unit using an accrual data frame produced by <code>accrual_create_df</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">accrual_plot_abs(
  accrual_df,
  unit = c("month", "year", "week", "day"),
  target = NULL,
  overall = TRUE,
  name_overall = attr(accrual_df, "name_overall"),
  ylim = NULL,
  xlim = NULL,
  ylab = "Recruited patients",
  xlabformat = NULL,
  xlabsel = NA,
  xlabpos = NULL,
  xlabsrt = 45,
  xlabadj = c(1, 1),
  xlabcex = 1,
  col = NULL,
  legend.list = NULL,
  ...
)

gg_accrual_plot_abs(
  accrual_df,
  unit = c("month", "year", "week", "day"),
  xlabformat = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>accrual_df</code></td>
<td>
<p>object of class 'accrual_df' or 'accrual_list' produced by <code>accrual_create_df</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit</code></td>
<td>
<p>time unit for which the bars should be plotted,
one of <code>"month"</code>, <code>"year"</code>, <code>"week"</code> or <code>"day"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>adds horizontal line for target recruitment per time unit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overall</code></td>
<td>
<p>logical, indicates that accrual_df contains a summary with all sites
that should be removed from stacked barplot (only if by is not NA).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name_overall</code></td>
<td>
<p>name of the summary with all sites (if by is not NA and overall==TRUE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>limits for y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>limits for x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>y-axis label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlabformat</code></td>
<td>
<p>format of date on x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlabsel</code></td>
<td>
<p>selection of x-labels if not all should be shown,
by default all are shown up to 15 bars, with more an automated selection is done,
either NA (default), NULL (show all), or a numeric vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlabpos</code></td>
<td>
<p>position of the x-label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlabsrt</code></td>
<td>
<p>rotation of x-axis labels in degrees.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlabadj</code></td>
<td>
<p>adjustment of x-label, numeric vector with length 1 or 2 for different adjustment
in x- and y-direction.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlabcex</code></td>
<td>
<p>size of x-axis label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>colors of bars in barplot, can be a vector if accrual_df is a list, default is grayscale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.list</code></td>
<td>
<p>named list with options passed to legend().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to barplot() and axis().</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When the <code>accrual_df</code> includes multiple sites, the dataframe
passed to <code>ggplot</code> includes a <code>site</code> variable
which can be used for facetting
</p>


<h3>Value</h3>

<p><code>accrual_plot_abs</code> returns a barplot of absolute accrual by time unit (stacked if accrual_df is a list).
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(2020)
enrollment_dates &lt;- as.Date("2018-01-01") + sort(sample(1:100, 50, replace=TRUE))
accrual_df&lt;-accrual_create_df(enrollment_dates)
accrual_plot_abs(accrual_df,unit="week")

#time unit
accrual_plot_abs(accrual_df,unit="day")

#include target
accrual_plot_abs(accrual_df,unit="week",target=5)

#further plot options
accrual_plot_abs(accrual_df,unit="week",ylab="No of recruited patients",
   xlabformat="%Y-%m-%d",xlabsrt=30,xlabpos=-0.8,xlabadj=c(1,0.5),
   col="pink",tck=-0.03,mgp=c(3,1.2,0))

#accrual_df with by option
set.seed(2020)
centers&lt;-sample(c("Site 1","Site 2","Site 3"),length(enrollment_dates),replace=TRUE)
centers&lt;-factor(centers,levels=c("Site 1","Site 2","Site 3"))
accrual_df&lt;-accrual_create_df(enrollment_dates,by=centers)
accrual_plot_abs(accrual_df=accrual_df,unit=c("week"))

### ggplot2 approach
data(accrualdemo)
accrual_df&lt;-accrual_create_df(accrualdemo$date)
gg_accrual_plot_abs(accrual_df, unit = "week")
gg_accrual_plot_abs(accrual_df, unit = "week") +
  ggplot2::theme_classic()

#time unit
gg_accrual_plot_abs(accrual_df, unit = "day")

#accrual_df with by option
accrual_df &lt;- accrual_create_df(accrualdemo$date, by = accrualdemo$site)
gg_accrual_plot_abs(accrual_df = accrual_df, unit = "week")
gg_accrual_plot_abs(accrual_df = accrual_df, unit = "week") +
  ggplot2::scale_fill_discrete(type = c("black", "red", "blue", "green"))

</code></pre>


</div>