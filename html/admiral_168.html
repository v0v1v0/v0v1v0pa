<div class="container">

<table style="width: 100%;"><tr>
<td>query</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an <code>query</code> object</h2>

<h3>Description</h3>

<p>A <code>query</code> object defines a query, e.g., a Standard MedDRA Query (SMQ), a
Standardized Drug Grouping (SDG), or a customized query (CQ). It is used
as input to <code>create_query_data()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">query(prefix, name = auto, id = NULL, add_scope_num = FALSE, definition = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>prefix</code></td>
<td>
<p>The value is used to populate <code>PREFIX</code> in the output
dataset of <code>create_query_data()</code>, e.g., <code>"SMQ03"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>The value is used to populate <code>GRPNAME</code> in the output dataset
of <code>create_query_data()</code>. If the <code>auto</code> keyword is specified, the variable
is set to the name of the query in the SMQ/SDG database.
</p>
<p><em>Permitted Values</em>: A character scalar or the <code>auto</code> keyword. The <code>auto</code>
keyword is permitted only for queries which are defined by an
<code>basket_select()</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>The value is used to populate <code>GRPID</code> in the output dataset of
<code>create_query_data()</code>. If the <code>auto</code> keyword is specified, the variable is
set to the id of the query in the SMQ/SDG database.
</p>
<p><em>Permitted Values</em>: A integer scalar or the <code>auto</code> keyword. The <code>auto</code>
keyword is permitted only for queries which are defined by an
<code>basket_select()</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_scope_num</code></td>
<td>
<p>Determines if  <code>SCOPEN</code> in the output dataset
of <code>create_query_data()</code> is populated
</p>
<p>If the parameter is set to <code>TRUE</code>, the definition must be an <code>basket_select()</code>
object.
</p>
<p><em>Default</em>: <code>FALSE</code>
</p>
<p><em>Permitted Values</em>: <code>TRUE</code>, <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>definition</code></td>
<td>
<p>Definition of terms belonging to the query
</p>
<p>There are three different ways to define the terms:
</p>

<ul>
<li>
<p> An <code>basket_select()</code> object is specified to select a query from the SMQ
database.
</p>
</li>
<li>
<p> A data frame with columns <code>SRCVAR</code> and <code>TERMCHAR</code> or <code>TERMNUM</code> can
be specified to define the terms of a customized query. The <code>SRCVAR</code>
should be set to the name of the variable which should be used to select
the terms, e.g., <code>"AEDECOD"</code> or <code>"AELLTCD"</code>. <code>SRCVAR</code> does not need
to be constant within a query. For example a query can be based on
<code>AEDECOD</code> and <code>AELLT</code>.
</p>
<p>If <code>SRCVAR</code> refers to a character variable, <code>TERMCHAR</code> should be set
to the value the variable. If it refers to a numeric variable, <code>TERMNUM</code>
should be set to the value of the variable. If only character variables
or only numeric variables are used, <code>TERMNUM</code> or <code>TERMCHAR</code> respectively
can be omitted.
</p>
</li>
<li>
<p> A list of data frames and <code>basket_select()</code> objects can be specified to
define a customized query based on custom terms and SMQs. The data frames
must have the same structure as described for the previous item.
</p>
</li>
</ul>
<p><em>Permitted Values</em>: an <code>basket_select()</code> object, a
data frame, or a list of data frames and <code>basket_select()</code> objects.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>query</code>.
</p>


<h3>See Also</h3>

<p><code>create_query_data()</code>, <code>basket_select()</code>, <a href="../articles/queries_dataset.html">Queries Dataset Documentation</a>
</p>
<p>Source Objects: 
<code>basket_select()</code>,
<code>censor_source()</code>,
<code>death_event</code>,
<code>event()</code>,
<code>event_joined()</code>,
<code>event_source()</code>,
<code>flag_event()</code>,
<code>records_source()</code>,
<code>tte_source()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# create a query for an SMQ
library(tibble)
library(dplyr, warn.conflicts = FALSE)

# create a query for a SMQ
query(
  prefix = "SMQ02",
  id = auto,
  definition = basket_select(
    name = "Pregnancy and neonatal topics (SMQ)",
    scope = "NARROW",
    type = "smq"
  )
)

# create a query for an SDG
query(
  prefix = "SDG01",
  id = auto,
  definition = basket_select(
    name = "5-aminosalicylates for ulcerative colitis",
    scope = NA_character_,
    type = "sdg"
  )
)

# creating a query for a customized query
cqterms &lt;- tribble(
  ~TERMCHAR, ~TERMNUM,
  "APPLICATION SITE ERYTHEMA", 10003041L,
  "APPLICATION SITE PRURITUS", 10003053L
) %&gt;%
  mutate(SRCVAR = "AEDECOD")

query(
  prefix = "CQ01",
  name = "Application Site Issues",
  definition = cqterms
)

# creating a customized query based on SMQs and additional terms
query(
  prefix = "CQ03",
  name = "Special issues of interest",
  definition = list(
    cqterms,
    basket_select(
      name = "Pregnancy and neonatal topics (SMQ)",
      scope = "NARROW",
      type = "smq"
    ),
    basket_select(
      id = 8050L,
      scope = "BROAD",
      type = "smq"
    )
  )
)
</code></pre>


</div>