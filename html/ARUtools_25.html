<div class="container">

<table style="width: 100%;"><tr>
<td>create_pattern</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a pattern to match date</h2>

<h3>Description</h3>

<p>Helper functions to create regular expression patterns to match different
metadata in file paths.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_pattern_date(
  order = "ymd",
  sep = c("_", "-", ""),
  yr_digits = 4,
  look_ahead = "",
  look_behind = ""
)

create_pattern_time(
  sep = c("_", "-", ":", ""),
  seconds = "yes",
  look_ahead = "",
  look_behind = ""
)

create_pattern_dt_sep(
  sep = "T",
  optional = FALSE,
  look_ahead = "",
  look_behind = ""
)

create_pattern_aru_id(
  arus = c("BARLT", "S\\d(A|U)", "SM\\d", "SMM", "SMA"),
  n_digits = c(4, 8),
  sep = c("_", "-", ""),
  prefix = "",
  suffix = "",
  look_ahead = "",
  look_behind = ""
)

create_pattern_site_id(
  prefix = c("P", "Q"),
  p_digits = 2,
  sep = c("_", "-"),
  suffix = "",
  s_digits = 1,
  look_ahead = "",
  look_behind = ""
)

create_pattern_tz_offset(
  direction_from_UTC = "West",
  n_digits_hrs = 2,
  n_digits_min = 2
)

test_pattern(test, pattern)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>Character vector. Expected orders of (y)ear, (m)onth and (d)ate.
Default is "ymd" for Year-Month-Date order. Can have more than one possible
order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>Character vector. Expected separator(s) between the pattern parts.
Can be "" for no separator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yr_digits</code></td>
<td>
<p>Numeric vector. Number of digits in Year, either 2 or 4.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>look_ahead</code></td>
<td>
<p>Pattern to look ahead or after string Can be a regular expression or text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>look_behind</code></td>
<td>
<p>Pattern to look before behind string. Can be a regular expression or text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seconds</code></td>
<td>
<p>Character. Whether seconds are included. Options are "yes",
"no", "maybe".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optional</code></td>
<td>
<p>Logical. Whether the separator should be optional or not.
Allows matching on different date/time patterns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arus</code></td>
<td>
<p>Character vector. Pattern(s) identifying the ARU prefix (usually
model specific).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_digits</code></td>
<td>
<p>Numeric vector. Number of digits expected to follow the
<code>arus</code> pattern. Can be one or two (a range).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefix</code></td>
<td>
<p>Character vector. Prefix(es) for site ids.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suffix</code></td>
<td>
<p>Character vector. Suffix(es) for site ids.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_digits</code></td>
<td>
<p>Numeric vector. Number(s) of digits following the <code>prefix</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s_digits</code></td>
<td>
<p>Numeric vector. Number(s) of digits following the <code>suffix</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>direction_from_UTC</code></td>
<td>
<p>Character. Must be on of "West", "East" or "Both"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_digits_hrs</code></td>
<td>
<p>Numeric vector. Number(s) of digits for hours in offset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_digits_min</code></td>
<td>
<p>Numeric vector. Number(s) of digits for minutes in offset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>Character vector. Examples of text to test.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>Character. Regular expression pattern to test.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>By default <code>create_pattern_aru_id()</code> matches many common ARU patterns like
<code>BARLT0000</code>, <code>S4A0000</code>, <code>SM40000</code>, <code>SMM0000</code>, <code>SMA0000</code>.
</p>
<p><code>test_pattern()</code> is a helper function to see what a regular expression
pattern will pick out of some example text. Can be used to see if your
pattern grabs what you want. This is just a simple wrapper around
<code>stringr::str_extract()</code>.
</p>


<h3>Value</h3>

<p>Either a pattern (<code>create_pattern_xxx()</code>) or the text extracted by a
pattern (<code>test_pattern()</code>)
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>create_pattern_date()</code>: Create a pattern to match a date
</p>
</li>
<li> <p><code>create_pattern_time()</code>: Create a pattern to match a time
</p>
</li>
<li> <p><code>create_pattern_dt_sep()</code>: Create a pattern to match a date/time separator
</p>
</li>
<li> <p><code>create_pattern_aru_id()</code>: Create a pattern to match an ARU id
</p>
</li>
<li> <p><code>create_pattern_site_id()</code>: Create a pattern to match a site id
</p>
</li>
<li> <p><code>create_pattern_tz_offset()</code>: Create a pattern to match a site id
</p>
</li>
<li> <p><code>test_pattern()</code>: Test patterns
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">create_pattern_date() # Default matches 2020-01-01 or 2020_01_01 or 20200101
# ("-", "_" or "" as separators)
create_pattern_date(sep = "") # Matches only 20200101 (no separator allowed)

create_pattern_time() # Default matches 23_59_59 (_, -, :, as optional separators)
create_pattern_time(sep = "", seconds = "no") # Matches 2359 (no seconds no separators)

create_pattern_dt_sep() # Default matches 'T' as a required separator
create_pattern_dt_sep(optional = TRUE) # 'T' as an optional separator
create_pattern_dt_sep(c("T", "_", "-")) # 'T', '_', or '-' as separators

create_pattern_aru_id()
create_pattern_aru_id(prefix = "CWS")
create_pattern_aru_id(n_digits = 12)


create_pattern_site_id() # Default matches P00-0
create_pattern_site_id(
  prefix = "site", p_digits = 3, sep = "",
  suffix = c("a", "b", "c"), s_digits = 0
) # Matches site000a


create_pattern_site_id() # Default matches P00-0
create_pattern_site_id(
  prefix = "site", p_digits = 3, sep = "",
  suffix = c("a", "b", "c"), s_digits = 0
) # Matches site000a

pat &lt;- create_pattern_aru_id(prefix = "CWS")
test_pattern("CWS_BARLT1012", pat) # No luck
pat &lt;- create_pattern_aru_id(prefix = "CWS_")
test_pattern("CWS_BARLT1012", pat) # Ah ha!
pat &lt;- create_pattern_site_id()

pat &lt;- create_pattern_site_id()
test_pattern("P03", pat) # Nope
test_pattern("P03-1", pat) # Success!

pat &lt;- create_pattern_site_id(prefix = "site", p_digits = 3, sep = "", s_digits = 0)
test_pattern("site111", pat)
pat &lt;- create_pattern_site_id(
  prefix = "site", p_digits = 3, sep = "",
  suffix = c("a", "b", "c"), s_digits = 0
)
test_pattern(c("site9", "site100a"), pat)

</code></pre>


</div>