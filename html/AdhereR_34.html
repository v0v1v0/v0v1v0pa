<div class="container">

<table style="width: 100%;"><tr>
<td>map.event.coords.to.plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Map from event to plot coordinates.</h2>

<h3>Description</h3>

<p>Maps the (x,y) coordinates in the event space to the plotting space.
</p>


<h3>Usage</h3>

<pre><code class="language-R">map.event.coords.to.plot(
  x = NA,
  y = NA,
  x.is.Date = FALSE,
  x.date.format = "%m/%d/%Y",
  adjust.for.earliest.date = TRUE,
  plot.type = c("baseR", "SVG")[1],
  suppress.warnings = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The <em>x</em> coordinate in the event space, either a <code>number</code> giving the
number of days since the earliest plotted date, or a <code>Date</code> or a <code>string</code> in
the format given by the <em>x.date.format</em> parameter giving the actual calendar date.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>The <em>y</em> coordinate in the event space, thus a <code>number</code> giving the
plot row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.is.Date</code></td>
<td>
<p>A <code>logical</code>, being <code>TRUE</code> if <em>x</em> is a string giving the
date in the <em>x.date.format</em> format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.date.format</code></td>
<td>
<p>A <code>string</code> giving the format of the <em>x</em> date, if
<em>x.is.Date</em> id <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjust.for.earliest.date</code></td>
<td>
<p>A <code>logical</code> which is <code>TRUE</code> if <em>x</em> is a
calendar date that must be adjusted for the earliest plotted date (by default
<code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.type</code></td>
<td>
<p>Can be either "baseR" or "SVG" and specifies to which type of plotting
the mapping applies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suppress.warnings</code></td>
<td>
<p><em>Logical</em>, if <code>TRUE</code> don't show any
warnings.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is intended for advanced users only.
In the event space, the <em>x</em> coordinate can be either given as the number of
days since the first plotted event, or as an actual calendar date (either as a
<code>Date</code> object or a string with a given format; a date may or may not be corrected
relative to the first displayed date). On the <em>y</em> coordinate, the plotting is
divided in equally spaced rows, each row corresponding to a single event or an element
of a partial CMA plot (one can specify in between rows using fractions). Any or both of
<em>x</em> and <em>y</em> can be missing.
</p>


<h3>Value</h3>

<p>A numeric vector with <em>x</em> and <em>y</em> components giving the plotting
coordinates, or <code>NULL</code> in case of error.
</p>


<h3>Examples</h3>

<pre><code class="language-R">cma7 &lt;- CMA7(data=med.events[med.events$PATIENT_ID %in% c(1,2),],
             ID.colname="PATIENT_ID",
             event.date.colname="DATE",
             event.duration.colname="DURATION",
             event.daily.dose.colname="PERDAY",
             medication.class.colname="CATEGORY",
             followup.window.start=0,
             followup.window.start.unit="days",
             followup.window.duration=2*365,
             followup.window.duration.unit="days",
             observation.window.start=30,
             observation.window.start.unit="days",
             observation.window.duration=365,
             observation.window.duration.unit="days",
             date.format="%m/%d/%Y",
             summary="Base CMA");
plot(cma7);
# Add a transparent blue rect:
rect(map.event.coords.to.plot(x=270),
     get.event.plotting.area()["y.min"]-1,
     map.event.coords.to.plot(x="03/15/2037", x.is.Date=TRUE, x.date.format="%m/%d/%Y"),
     get.event.plotting.area()["y.max"]+1,
     col=adjustcolor("blue",alpha.f=0.5), border="blue");
</code></pre>


</div>