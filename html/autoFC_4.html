<div class="container">

<table style="width: 100%;"><tr>
<td>cal_block_energy_with_iia</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculation of Item Block "Energy" with IIAs Included</h2>

<h3>Description</h3>

<p>Calculates the total "energy" of one or multiple paired
item blocks, which is a linear combination of different functions
applied to different item characteristics of interest.
</p>
<p>This function extends <code>cal_block_energy</code> function
with consideration of inter item agreement (IIA) metrics.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cal_block_energy_with_iia(block, item_chars, weights,
                                 FUN, rater_chars,
                                 iia_weights = c(BPlin = 1, BPquad = 1,
                                 AClin = 1, ACquad = 1), verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>block, item_chars, weights, FUN</code></td>
<td>
<p>See <code>?cal_block_energy</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rater_chars</code></td>
<td>
<p>A <em>p</em> by <em>m</em> numeric matrix with scores of each of the <em>p</em>
participants for the <em>m</em> items.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iia_weights</code></td>
<td>
<p>A vector of length 4 indicating weights given to each IIA metric:
</p>
<p>Linearly weighted AC (Gwet, 2008; 2014);
</p>
<p>Quadratic weighted AC;
</p>
<p>Linearly weighted Brennan-Prediger (BP) Index(Brennan &amp; Prediger, 1981; Gwet, 2014);
</p>
<p>Quadratic weighted BP.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical. Should IIAs be printed when this function is called?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This energy calculation function serves as the core for determining
the acceptance or rejection of a newly built block over the previous one.
Higher energy is considered more preferable in this case.
</p>
<p>Items in the same block can be paired based on characteristics such as:
Mean score, Item Factor, Factor loading, Item IRT Parameters,
Reverse Coding, etc.
</p>
<p>In addition, IIAs can be adopted to further estimate
rater agreements between different items,
if such information is available for the researchers.
</p>
<p>Pairings of different characteristics can be optimized in different way,
by determining the customized function vector <code>FUN</code>
and the corresponding <code>weights</code>.
Currently only linear weighted combination
for IIAs can be used in optimization.
</p>


<h3>Value</h3>

<p>A numeric value indicating the total energy
for the given item block(s).
</p>


<h3>Note</h3>

<p>Use <code>cal_block_energy_with_iia</code> if inter-item agreement
(IIA) metrics are needed.
</p>


<h3>Author(s)</h3>

<p>Mengtong Li
</p>


<h3>References</h3>

<p>Brennan, R. L., &amp; Prediger, D. J. (1981). Coefficient kappa: Some uses, misuses,
and alternatives. <em>Educational and Psychological Measurement, 41</em>(3),
687-699. https://doi.org/10.1177/001316448104100307
</p>
<p>Gwet, K. L. (2008). Computing inter rater reliability and its
variance in the presence of high agreement.
<em>British Journal of Mathematical and Statistical Psychology, 61</em>(1),
29-48. https://doi.org/10.1348/000711006X126600
</p>
<p>Gwet, K. L. (2014). <em>Handbook of inter-rater reliability (4th ed.):
The definitive guide to measuring the extent of agreement among raters</em>.
Gaithersburg, MD: Advanced Analytics Press.
</p>


<h3>See Also</h3>

<p><code>cal_block_energy</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Simulate 60 items loading on different Big Five dimensions,
## with different mean and item difficulty

item_dims &lt;- sample(c("Openness","Conscientiousness","Neuroticism",
                     "Extraversion","Agreeableness"), 60, replace = TRUE)
item_mean &lt;- rnorm(60, 5, 2)
item_difficulty &lt;- runif(60, -1, 1)

## Construct data frame for item characteristics and produce
## 20 random triplet blocks with these 60 items

item_df &lt;- data.frame(Dimensions = item_dims, Mean = item_mean,
                     Difficulty = item_difficulty)
solution &lt;- make_random_block(60, 60, 3)


## Simple simulation of responses from 600 participants on the 60 items.
## In practice, should use real world data or simluation based on IRT parameters.

item_responses &lt;- matrix(sample(seq(1:5), 600*60, replace = TRUE), ncol = 60, byrow = TRUE)


cal_block_energy_with_iia(solution, item_chars = item_df, weights = c(1,1,1),
                          FUN = c("facfun", "var", "var"),
                          rater_chars = item_responses, iia_weights = c(1,1,1,1))

</code></pre>


</div>