<div class="container">

<table style="width: 100%;"><tr>
<td>ad</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>ad: anomaly detection with normal probability density functions.</h2>

<h3>Description</h3>

<p>ad: anomaly detection with normal probability density functions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ad(x, ...)

## S3 method for class 'formula'
ad(formula, data, na.action = na.omit, ...)

## Default S3 method:
ad(x, y, univariate = TRUE, score = "f1",
  steps = 1000, ...)

## S3 method for class 'ad'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A matrix of numeric features.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Optional parameters to be passed to ad.default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>An object of class "formula": a symbolic description of the
model to be fitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame containing the features (predictors) and target.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>A function specifying the action to be taken if NAs are
found.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector of numeric target values, either 0 or 1, with 1
assumed to be anomalous.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>univariate</code></td>
<td>
<p>Logical indicating whether the univariate pdf should be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>score</code></td>
<td>
<p>String indicating which score to use in optimization:
<code>f1</code> (default) or <code>mcc</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>steps</code></td>
<td>
<p>Integer number of steps to take during epsilon optimization, default 1e3.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>amelie</code> implements anomaly detection with normal probability
functions and maximum likelihood estimates.
</p>
<p>Features are assumed to be continuous, and the target is assumed to take
on values of <code>0</code> (negative case, no anomaly) or <code>1</code> (positive
case, anomaly).
</p>
<p>The threshold <code>epsilon</code> is optimized using the either the Matthews
correlation coefficient or F1 score.
</p>
<p>Variance and covariance are computed using <code>var</code> and <code>cov</code>, where
denominator <code>n-1</code> is used.
</p>
<p>Algorithm details are described in the Introduction vignette.
</p>
<p>The package follows the anomaly detection approach in Andrew Ng's course on
machine learning.
</p>


<h3>Value</h3>

<p>An object of class <code>ad</code>:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>The original call to <code>ad</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>univariate</code></td>
<td>
<p>Logical indicating which pdf was computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>score</code></td>
<td>
<p>The score that was used for optimization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsilon</code></td>
<td>
<p>The threshold value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>train_mean</code></td>
<td>
<p>Means of features in the training set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>train_var</code></td>
<td>
<p>Variances of features in the training set. If <code>univariate=FALSE</code></p>
</td>
</tr>
</table>
<p>, holds the covariance matrix for the features.
</p>
<table><tr style="vertical-align: top;">
<td><code>val_score</code></td>
<td>
<p>The score obtained on the validation data set.
0 to 1 for F1 score, -1 to 1 for Matthews correlation coefficient</p>
</td>
</tr></table>
<h3>References</h3>

<p><a href="https://www.coursera.org/learn/machine-learning">Machine learning course</a>
</p>
<p><a href="https://en.wikipedia.org/wiki/Confusion_matrix">Confusion matrix</a>
</p>
<p><a href="https://en.wikipedia.org/wiki/Matthews_correlation_coefficient">Matthews correlation coefficient</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
x1 &lt;- c(1,.2,3,1,1,.7,-2,-1)
x2 &lt;- c(0,.5,0,.4,0,1,-.3,-.1)
x &lt;- do.call(cbind,list(x1,x2))
y &lt;- c(0,0,0,0,0,0,1,1)
dframe &lt;- data.frame(x,y)
df_fit &lt;- ad(y ~ x1 + x2, dframe)
mat_fit &lt;- ad(x = x, y = y)

</code></pre>


</div>