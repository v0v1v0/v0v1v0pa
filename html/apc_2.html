<div class="container">

<table style="width: 100%;"><tr>
<td>apc-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Age-period-cohort analysis</h2>

<h3>Description</h3>

<p>The package includes functions for age-period-cohort analysis.  The statistical model is a generalized linear model (GLM)
allowing for age, period and cohort factors, or a sub-set of the factors.
The canonical parametrisation of Kuang, Nielsen and Nielsen (2008a) is used. 
The outline of an analysis is described below.
</p>


<h3>Details</h3>


<table>
<tr>
<td style="text-align: left;">
		Package: </td>
<td style="text-align: left;"> apc</td>
</tr>
<tr>
<td style="text-align: left;">
		Type: </td>
<td style="text-align: left;"> Package</td>
</tr>
<tr>
<td style="text-align: left;">
		Version: </td>
<td style="text-align: left;"> 2.0.0</td>
</tr>
<tr>
<td style="text-align: left;">
		Date: </td>
<td style="text-align: left;"> 2020-09-28</td>
</tr>
<tr>
<td style="text-align: left;">
		License: </td>
<td style="text-align: left;"> GPL-3</td>
</tr>
<tr>
<td style="text-align: left;">
	</td>
</tr>
</table>
<p>The apc package uses the canonical parameters suggested by
Kuang, Nielsen and Nielsen (2008a)
and generalized by
Nielsen (2014). 
These evolve around the second differences of age, period and cohort factors as well as an three parameters (level and two slopes)
for a linear plane.  The age, period and cohort factors themselves are not identifiable.  They could be ad hoc identified
by associating the levels and two slopes to the age, period and cohort factors in a particular way.  This should be done
with great care as such ad hoc identification easily masks which information is coming from the data and which information
is coming from the choice of ad hoc identification scheme. An illustration is given below.
A short description of the package can be found in
Nielsen (2015).
</p>
<p>A formal analysis of the identification of the age-period-cohort model can be found in
Nielsen and Nielsen (2014).
Forecasting is discussed in
Kuang, Nielsen and Nielsen (2008b, 2011)
and
Martinez Miranda, Nielsen and Nielsen (2015).
Methods for cross section data are introduced in
Fannon, Monden and Nielsen (2019).
Methods for panel data are introduced in
Fannon (2020).	
For a recent overview see
Fannon and Nielsen (2019).
</p>
<p>The package covers age-period-cohort models for three types of data.
</p>

<ol>
<li>
<p>Tables of aggregate data.
</p>
</li>
<li>
<p>Repeated cross sectional data.
</p>
</li>
<li>
<p>Panel data. 
</p>
</li>
</ol>
<p>The apc package can be used as follows.
</p>

<ol>
<li>
<p><strong>Aggregate data</strong>.
For a vignette with an introduction to analysis of aggregate data, see
see
<a href="../doc/IntroductionAggregateData.pdf"><code>IntroductionAggregateData.pdf</code></a>,
<a href="../doc/IntroductionAggregateData.R"><code>IntroductionAggregateData.R</code></a>			
on
<a href="../doc/index.html"><code>Vignettes</code></a>.		
</p>

<ol>
<li>
<p>Organize the data in as an <code>apc.data.list</code>.
Data are included in matrix format.  Information needs to be given about the original data format.
Optionally, information can be given about the labels for the time scales.
</p>
</li>
<li>
<p>Construct descriptive plots using <code>apc.plot.data.all</code>.
This gives a series of descriptive plots.  The plots can be called individually through
</p>
		
<ol>
<li>
<p>Plot data sums using <code>apc.plot.data.sums</code>.
Numerical values can be obtained through <code>apc.data.sums</code>.
</p>
</li>
<li>
<p>Sparsity plots of data using <code>apc.plot.data.sparsity</code>.
</p>
</li>
<li>	
<p>Plot data using all combinations of two time scales using <code>apc.plot.data.within</code>.
</p>
</li>
</ol>
</li>
<li>
<p>Get an deviance table for the age-period-cohort model through
<code>apc.fit.table</code>.
</p>
</li>
<li>
<p>Estimate a particular (sub-model of) age-period-cohort model through
<code>apc.fit.model</code>.
</p>
</li>
<li>
<p>Plot probability transforms of observed responses given fit using
<code>apc.plot.fit.pt</code>.
</p>
</li>
<li>
<p>Plot estimated parameters through
<code>apc.plot.fit</code>.
Numerical values of certain transformations of the canonical parameter can be obtained through
<code>apc.identify</code>.
</p>
</li>
<li>
<p>Recursive analysis can be done by selecting a subset of the observations through
<code>apc.data.list.subset</code> and then repeating analysis.  This will reveal how sensitive
the results are to particular age, period and cohort groups.
</p>
</li>
<li>
<p>Forecasting.  Some functions have been been added for forecasting in from a Poisson response-only model
with an age-cohort parametrization
<code>apc.forecast.ac</code>
and with an age-period parametrization
<code>apc.forecast.ap</code>.
See also the overview on
<code>apc.forecast</code>
</p>
</li>
</ol>
</li>
<li>
<p><strong>Repeated cross section</strong>
and 
<strong>Panel Data</strong>.			
For a vignette 
with an introduction to analysis of repeated cross section data and panel data,
see
<a href="../doc/IntroductionIndividualData.pdf"><code>IntroductionIndividualData.pdf</code></a>,
<a href="../doc/IntroductionIndividualData.R"><code>IntroductionIndividualData.R</code></a>			
on
<a href="../doc/index.html"><code>Vignettes</code></a>		
Further examples can be found in a second vignette, see 			
<a href="../doc/IntroductionIndividualDataFurtherExamples.pdf"><code>IntroductionIndividualDataFurtherExample.pdf</code></a>,
<a href="../doc/IntroductionIndividualDataFurtherExample.R"><code>IntroductionIndividualDataFurtherExample.R</code></a>.
</p>
</li>
</ol>
<p>Data examples include
</p>

<ol><li>
<p><strong>Aggregate data</strong>
</p>

<ol>
<li>
<p><code>data.asbestos</code>
includes counts of deaths from mesothelioma in the UK.
This dataset has no measure for exposure.
It can be analysed using a Poisson model with an "APC" or an "AC" design.
Source: Martinez Miranda, Nielsen and Nielsen (2015).
Also used in Nielsen (2015).
</p>
</li>
<li>	
<p><code>data.Italian.bladder.cancer</code>
includes counts of deaths from bladder cancer in the Italy.
This dataset includes a measure for exposure.
It can be analysed using a Poisson model with an "APC" or an "AC" design.
Source: Clayton and Schifflers (1987a).
</p>
</li>
<li>	
<p><code>data.Belgian.lung.cancer</code>
includes counts of deaths from lung cancer in the Belgium.
This dataset includes a measure for exposure.
It can be analysed using a Poisson model with an "APC", "AC", "AP" or "Ad" design.
Source: Clayton and Schifflers (1987a).
</p>
</li>
<li>	
<p><code>data.Japanese.breast.cancer</code>
includes counts of deaths from breast cancer in the Japan.
This dataset includes a measure for exposure.
It can be analysed using a Poisson model with an "APC" design.
Source: Clayton and Schifflers (1987b).
</p>
</li>
</ol>
<p><strong>Repeated cross section data</strong>		
</p>

<ol><li>
<p><code>Wage</code> data from the package ISLR
</p>
</li></ol>
<p><strong>Repeated cross section data</strong>		
</p>

<ol><li>
<p><code>PSID7682</code> data from the package AER.
These are panel data on earnings for 595 individuals for the years 1976-1982.
</p>
</li></ol>
</li></ol>
<h3>Author(s)</h3>

<p>Bent Nielsen &lt;bent.nielsen@nuffield.ox.ac.uk&gt; 29 Jan 2015 updated 26 Aug 2020.</p>


<h3>References</h3>

<p>Clayton, D. and Schifflers, E. (1987a) Models for temperoral variation in cancer rates. I: age-period and age-cohort models. <em>Statistics in Medicine</em> 6, 449-467.
</p>
<p>Clayton, D. and Schifflers, E. (1987b) Models for temperoral variation in cancer rates. II: age-period-cohort models. <em>Statistics in Medicine</em> 6, 469-481.
</p>
<p>Fannon, Z. (2020). D.Phil. thesis. University of Oxford.
</p>
<p>Fannon, Z., Monden, C. and Nielsen, B. (2018) Age-period cohort modelling and covariates, with an application to obesity in England 2001-2014. <em>Download</em>: <a href="https://www.nuffield.ox.ac.uk/economics/Papers/2018/2018W05_obesity.pdf">Nuffield DP</a>. Supplement Code for replication: <a href="https://www.nuffield.ox.ac.uk/economics/Papers/2018/2018W05_obesityReplication.zip">Nuffield DP supplement</a>. 
</p>
<p>Fannon, Z. and Nielsen, B. (2019) Age-period-cohort models. <em>Oxford Research Encyclopedia of Economics and Finance</em>. Oxford University Press. <em>Download</em>: <code>doi.org/10.1093/acrefore/9780190625979.013.495</code>; Earlier version <a href="https://www.nuffield.ox.ac.uk/economics/Papers/2018/2018W04_age_period_cohort_models.pdf">Nuffield DP</a>. 
</p>
<p>Kuang, D., Nielsen, B. and Nielsen, J.P. (2008a) Identification of the age-period-cohort model and the extended chain ladder model. Biometrika 95, 979-986. <em>Download</em>: <a href="https://doi.org/10.1093/biomet/asn026">Article</a>; Earlier version <a href="http://www.nuffield.ox.ac.uk/economics/papers/2007/w5/KuangNielsenNielsen07.pdf">Nuffield DP</a>.
</p>
<p>Kuang, D., Nielsen, B. and Nielsen, J.P. (2008b) Forecasting with the age-period-cohort model and the extended chain-ladder model. Biometrika 95, 987-991. <em>Download</em>: <a href="https://doi.org/10.1093/biomet/asn038">Article</a>; Earlier version <a href="http://www.nuffield.ox.ac.uk/economics/papers/2008/w9/KuangNielsenNielsen_Forecast.pdf">Nuffield DP</a>.
</p>
<p>Kuang, D., Nielsen, B. and Nielsen, J.P. (2011) Forecasting in an extended chain-ladder-type model. Journal of Risk and Insurance 78, 345-359. <em>Download</em>: <a href="http://dx.doi.org/10.1111/j.1539-6975.2010.01395.x">Article</a>; Earlier version: <a href="http://www.nuffield.ox.ac.uk/economics/papers/2010/w5/Forecast24jun10.pdf">Nuffield DP</a>. 
</p>
<p>Martinez Miranda, M.D., Nielsen, B. and Nielsen, J.P. (2015) Inference and forecasting in the age-period-cohort model with unknown exposure with an application to mesothelioma mortality. <em>Journal of the Royal Statistical Society</em> A 178, 29-55. <em>Download</em>: <a href="https://doi.org/10.1111/rssa.12051">Article</a>, <a href="http://www.nuffield.ox.ac.uk/economics/papers/2013/Asbestos8mar13.pdf">Nuffield DP</a>. 
</p>
<p>Nielsen, B. (2015) apc: An R package for age-period-cohort analysis. <em>R Journal</em> 7, 52-64. <em>Download</em>: <a href="https://journal.r-project.org/archive/2015-2/nielsen.pdf">Open access</a>.
</p>
<p>Nielsen, B. (2014) Deviance analysis of age-period-cohort models. <em>Download</em>: <a href="http://www.nuffield.ox.ac.uk/economics/papers/2014/apc_deviance.pdf">Nuffield DP</a>.
</p>
<p>Nielsen, B. and Nielsen, J.P. (2014) Identification and forecasting in mortality models. The Scientific World Journal. vol. 2014, Article ID 347043, 24 pages. <em>Download</em>: <a href="http://www.hindawi.com/journals/tswj/2014/347043">Article</a>.
</p>


<h3>See Also</h3>

<p>Vignettes are available on
<a href="../doc/index.htm"><code>Vignettes</code></a>.
</p>
<p>Further information, including minor upgrades and a python version can be found on
<a href="http://users.ox.ac.uk/~nuff0078/apc/index.htm"><code>apc development web page</code></a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#	see vignettes
</code></pre>


</div>