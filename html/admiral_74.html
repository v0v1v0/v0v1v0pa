<div class="container">

<table style="width: 100%;"><tr>
<td>derive_param_framingham</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adds a Parameter for Framingham Heart Study Cardiovascular Disease
10-Year Risk Score</h2>

<h3>Description</h3>

<p>Adds a record for framingham score (FCVD101) for each by group
(e.g., subject and visit) where the source parameters are available.
</p>


<h3>Usage</h3>

<pre><code class="language-R">derive_param_framingham(
  dataset,
  by_vars,
  set_values_to = exprs(PARAMCD = "FCVD101"),
  sysbp_code = "SYSBP",
  chol_code = "CHOL",
  cholhdl_code = "CHOLHDL",
  age = AGE,
  sex = SEX,
  smokefl = SMOKEFL,
  diabetfl = DIABETFL,
  trthypfl = TRTHYPFL,
  get_unit_expr,
  filter = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>Input dataset
</p>
<p>The variables specified by the <code>by_vars</code> argument are expected to be in the dataset.
<code>PARAMCD</code>, and <code>AVAL</code> are expected as well.
</p>
<p>The variable specified by <code>by_vars</code> and <code>PARAMCD</code> must be a unique key of
the input dataset after restricting it by the filter condition (<code>filter</code>
parameter) and to the parameters specified by <code>sysbp_code</code>, <code>chol_code</code>
and <code>hdl_code</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by_vars</code></td>
<td>
<p>Grouping variables
</p>
<p>Only variables specified in <code>by_vars</code> will be populated
in the newly created records.
</p>
<p><em>Permitted Values</em>: list of variables created by <code>exprs()</code>
e.g. <code>exprs(USUBJID, VISIT)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>set_values_to</code></td>
<td>
<p>Variables to be set
</p>
<p>The specified variables are set to the specified values for the new
observations. For example <code>exprs(PARAMCD = "MAP")</code> defines the parameter code
for the new parameter.
</p>
<p><em>Permitted Values</em>: List of variable-value pairs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sysbp_code</code></td>
<td>
<p>Systolic blood pressure parameter code
</p>
<p>The observations where <code>PARAMCD</code> equals the specified value are considered
as the systolic blood pressure assessments.
</p>
<p><em>Permitted Values:</em> character value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chol_code</code></td>
<td>
<p>Total serum cholesterol code
</p>
<p>The observations where <code>PARAMCD</code> equals the specified value are considered
as the total cholesterol assessments. This must be measured in mg/dL.
</p>
<p><em>Permitted Values:</em> character value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cholhdl_code</code></td>
<td>
<p>HDL serum cholesterol code
</p>
<p>The observations where <code>PARAMCD</code> equals the specified value are considered
as the HDL cholesterol assessments. This must be measured in mg/dL.
</p>
<p><em>Permitted Values:</em> character value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age</code></td>
<td>
<p>Subject age
</p>
<p>A variable containing the subject's age.
</p>
<p><em>Permitted Values:</em> A numeric variable name that refers to a subject age
column of the input dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sex</code></td>
<td>
<p>Subject sex
</p>
<p>A variable containing the subject's sex.
</p>
<p><em>Permitted Values:</em> A character variable name that refers to a subject sex
column of the input dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smokefl</code></td>
<td>
<p>Smoking status flag
</p>
<p>A flag indicating smoking status.
</p>
<p><em>Permitted Values:</em> A character variable name that refers to a smoking status
column of the input dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diabetfl</code></td>
<td>
<p>Diabetic flag
</p>
<p>A flag indicating diabetic status.
</p>
<p><em>Permitted Values:</em> A character variable name that refers to a diabetic
status column of the input dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trthypfl</code></td>
<td>
<p>Treated with hypertension medication flag
</p>
<p>A flag indicating if a subject was treated with hypertension medication.
</p>
<p><em>Permitted Values:</em> A character variable name that refers to a column that
indicates whether a subject is treated for high blood
pressure</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>get_unit_expr</code></td>
<td>
<p>An expression providing the unit of the parameter
</p>
<p>The result is used to check the units of the input parameters.
</p>
<p>Permitted Values: A variable of the input dataset or a function call</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p>Filter condition
</p>
<p>The specified condition is applied to the input dataset before deriving the
new parameter, i.e., only observations fulfilling the condition are taken
into account.
</p>
<p><em>Permitted Values:</em> a condition</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The values of <code>age</code>, <code>sex</code>, <code>smokefl</code>, <code>diabetfl</code> and <code>trthypfl</code> will be
added to the <code>by_vars</code> list.
The predicted probability of having cardiovascular disease (CVD)
within 10-years according to Framingham formula. See AHA Journal article
General Cardiovascular Risk Profile for Use in Primary Care for reference.
</p>
<p><strong>For Women:</strong>
</p>

<table>
<tr>
<td style="text-align: right;">
<strong>Factor</strong> </td>
<td style="text-align: right;"> <strong>Amount</strong> </td>
</tr>
<tr>
<td style="text-align: right;">
Age </td>
<td style="text-align: right;"> 2.32888 </td>
</tr>
<tr>
<td style="text-align: right;">
Total Chol </td>
<td style="text-align: right;"> 1.20904 </td>
</tr>
<tr>
<td style="text-align: right;">
HDL Chol </td>
<td style="text-align: right;"> -0.70833 </td>
</tr>
<tr>
<td style="text-align: right;">
Sys BP </td>
<td style="text-align: right;"> 2.76157 </td>
</tr>
<tr>
<td style="text-align: right;">
Sys BP + Hypertension Meds </td>
<td style="text-align: right;"> 2.82263 </td>
</tr>
<tr>
<td style="text-align: right;">
Smoker </td>
<td style="text-align: right;"> 0.52873 </td>
</tr>
<tr>
<td style="text-align: right;">
Non-Smoker </td>
<td style="text-align: right;"> 0 </td>
</tr>
<tr>
<td style="text-align: right;">
Diabetic </td>
<td style="text-align: right;"> 0.69154 </td>
</tr>
<tr>
<td style="text-align: right;">
Not Diabetic </td>
<td style="text-align: right;"> 0 </td>
</tr>
<tr>
<td style="text-align: right;">
Average Risk </td>
<td style="text-align: right;"> 26.1931 </td>
</tr>
<tr>
<td style="text-align: right;">
Risk Period </td>
<td style="text-align: right;"> 0.95012 </td>
</tr>
<tr>
<td style="text-align: right;">
</td>
</tr>
</table>
<p><strong>For Men:</strong>
</p>

<table>
<tr>
<td style="text-align: right;">
<strong>Factor</strong> </td>
<td style="text-align: right;"> <strong>Amount</strong> </td>
</tr>
<tr>
<td style="text-align: right;">
Age </td>
<td style="text-align: right;"> 3.06117 </td>
</tr>
<tr>
<td style="text-align: right;">
Total Chol </td>
<td style="text-align: right;"> 1.12370 </td>
</tr>
<tr>
<td style="text-align: right;">
HDL Chol </td>
<td style="text-align: right;"> -0.93263 </td>
</tr>
<tr>
<td style="text-align: right;">
Sys BP </td>
<td style="text-align: right;"> 1.93303 </td>
</tr>
<tr>
<td style="text-align: right;">
Sys BP + Hypertension Meds </td>
<td style="text-align: right;"> 2.99881 </td>
</tr>
<tr>
<td style="text-align: right;">
Smoker </td>
<td style="text-align: right;"> .65451  </td>
</tr>
<tr>
<td style="text-align: right;">
Non-Smoker </td>
<td style="text-align: right;"> 0 </td>
</tr>
<tr>
<td style="text-align: right;">
Diabetic </td>
<td style="text-align: right;"> 0.57367  </td>
</tr>
<tr>
<td style="text-align: right;">
Not Diabetic </td>
<td style="text-align: right;"> 0 </td>
</tr>
<tr>
<td style="text-align: right;">
Average Risk </td>
<td style="text-align: right;"> 23.9802 </td>
</tr>
<tr>
<td style="text-align: right;">
Risk Period </td>
<td style="text-align: right;"> 0.88936 </td>
</tr>
<tr>
<td style="text-align: right;">
</td>
</tr>
</table>
<p><strong>The equation for calculating risk:</strong>
</p>
<p style="text-align: center;"><code class="reqn">RiskFactors = (log(Age) * AgeFactor)
+ (log(TotalChol) * TotalCholFactor)
+ (log(CholHDL) * CholHDLFactor) \\
+ (log(SysBP) * SysBPFactor) + Smoker
+ Diabetes Present - AvgRisk</code>
</p>

<p style="text-align: center;"><code class="reqn">Risk = 100 * (1 - RiskPeriodFactor^{RiskFactors})</code>
</p>



<h3>Value</h3>

<p>The input dataset with the new parameter added
</p>


<h3>See Also</h3>

<p><code>compute_framingham()</code>
</p>
<p>BDS-Findings Functions for adding Parameters/Records: 
<code>default_qtc_paramcd()</code>,
<code>derive_expected_records()</code>,
<code>derive_extreme_event()</code>,
<code>derive_extreme_records()</code>,
<code>derive_locf_records()</code>,
<code>derive_param_bmi()</code>,
<code>derive_param_bsa()</code>,
<code>derive_param_computed()</code>,
<code>derive_param_doseint()</code>,
<code>derive_param_exist_flag()</code>,
<code>derive_param_exposure()</code>,
<code>derive_param_map()</code>,
<code>derive_param_qtc()</code>,
<code>derive_param_rr()</code>,
<code>derive_param_wbc_abs()</code>,
<code>derive_summary_records()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(tibble)

adcvrisk &lt;- tribble(
  ~USUBJID, ~PARAMCD, ~PARAM, ~AVAL, ~AVALU,
  ~VISIT, ~AGE, ~SEX, ~SMOKEFL, ~DIABETFL, ~TRTHYPFL,
  "01-701-1015", "SYSBP", "Systolic Blood Pressure (mmHg)", 121,
  "mmHg", "BASELINE", 44, "F", "N", "N", "N",
  "01-701-1015", "SYSBP", "Systolic Blood Pressure (mmHg)", 115,
  "mmHg", "WEEK 2", 44, "F", "N", "N", "Y",
  "01-701-1015", "CHOL", "Total Cholesterol (mg/dL)", 216.16,
  "mg/dL", "BASELINE", 44, "F", "N", "N", "N",
  "01-701-1015", "CHOL", "Total Cholesterol (mg/dL)", 210.78,
  "mg/dL", "WEEK 2", 44, "F", "N", "N", "Y",
  "01-701-1015", "CHOLHDL", "Cholesterol/HDL-Cholesterol (mg/dL)", 54.91,
  "mg/dL", "BASELINE", 44, "F", "N", "N", "N",
  "01-701-1015", "CHOLHDL", "Cholesterol/HDL-Cholesterol (mg/dL)", 26.72,
  "mg/dL", "WEEK 2", 44, "F", "N", "N", "Y",
  "01-701-1028", "SYSBP", "Systolic Blood Pressure (mmHg)", 119,
  "mmHg", "BASELINE", 55, "M", "Y", "Y", "Y",
  "01-701-1028", "SYSBP", "Systolic Blood Pressure (mmHg)", 101,
  "mmHg", "WEEK 2", 55, "M", "Y", "Y", "Y",
  "01-701-1028", "CHOL", "Total Cholesterol (mg/dL)", 292.01,
  "mg/dL", "BASELINE", 55, "M", "Y", "Y", "Y",
  "01-701-1028", "CHOL", "Total Cholesterol (mg/dL)", 246.73,
  "mg/dL", "WEEK 2", 55, "M", "Y", "Y", "Y",
  "01-701-1028", "CHOLHDL", "Cholesterol/HDL-Cholesterol (mg/dL)", 65.55,
  "mg/dL", "BASELINE", 55, "M", "Y", "Y", "Y",
  "01-701-1028", "CHOLHDL", "Cholesterol/HDL-Cholesterol (mg/dL)", 44.62,
  "mg/dL", "WEEK 2", 55, "M", "Y", "Y", "Y"
)


adcvrisk %&gt;%
  derive_param_framingham(
    by_vars = exprs(USUBJID, VISIT),
    set_values_to = exprs(
      PARAMCD = "FCVD101",
      PARAM = "FCVD1-Framingham CVD 10-Year Risk Score (%)"
    ),
    get_unit_expr = AVALU
  )

derive_param_framingham(
  adcvrisk,
  by_vars = exprs(USUBJID, VISIT),
  set_values_to = exprs(
    PARAMCD = "FCVD101",
    PARAM = "FCVD1-Framingham CVD 10-Year Risk Score (%)"
  ),
  get_unit_expr = extract_unit(PARAM)
)
</code></pre>


</div>