<div class="container">

<table style="width: 100%;"><tr>
<td>diurnalAdj</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Dirunal adjustment for durations
</h2>

<h3>Description</h3>

<p>Performs a diurnal adjustment of the durations, i.e. removes a daily seasonal component. Four different methods of diurnal adjustment are available, namely "cubicSpline", "supsmu" (Friedman's SuperSmoother), "smoothSpline" (smoothed version of the cubic spline), or "FFF" (Flexible Fourier Form).
</p>


<h3>Usage</h3>

<pre><code class="language-R">diurnalAdj(dur, method = "cubicSpline", nodes = c(seq(600, 1105, 60), 1105),
aggregation = "all", span = "cv", spar = 0, Q = 4, returnSplineFnc = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dur</code></td>
<td>

<p>a data.frame containing the columns <code>durations</code>, containing durations, and <code>time</code>, containing the time stamps.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>

<p>the method used. One of "cubicSpline", "supsmu", "smoothSpline", or "FFF".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodes</code></td>
<td>

<p>only for <code>method = "cubicSpline"</code> or <code>method = "smoothSpline"</code>. A vector of nodes to use for the spline function, in the unit minutes after midnight. The first and last element of the vector must be the start and end of the trading day. The nodes given are actually the limits of intervalls, of wich the midpoints will be set as the nodes using the means of the intervals. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregation</code></td>
<td>

<p>what type of aggregation to use. Either "weekdays", "all", or "none". If for example "weekdays" is chosen, all Mondays will have the same daily seasonal component, and so on. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>span</code></td>
<td>

<p>argument passed to supsmu if <code>method = "supsmu"</code> were chosen. Affects the smoothness of the curve, see supsmu.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spar</code></td>
<td>

<p>argument passed to smooth.spline if <code>method = "smooth.spline"</code> were chosen. Affects the smoothness of the curve, see smooth.spline.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Q</code></td>
<td>

<p>number of trigonometric function pairs for <code>method = "FFF"</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnSplineFnc</code></td>
<td>

<p>if <code>TRUE</code> instead or returning the adjusted durations a list of spline objects will be returned, containing the coefficents of the spline function. Only available for <code>method = "cubicSpline"</code>. 
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>returnSplineFnc</code> is <code>FALSE</code> (default): the input
data.frame <code>dur</code> with an added column of the diurnally adjusted
durations called 'adjDur'.
</p>
<p>Otherwise, a list of spline objects containing the coefficents of the
spline function. 
</p>


<h3>Author(s)</h3>

<p>Markus Belfrage
</p>


<h3>Examples</h3>

<pre><code class="language-R">diurnalAdj(durData, aggregation = "none", method = "supsmu")

## Not run: 

head(durData)
f &lt;- diurnalAdj(durData, aggregation = "weekdays", method = "FFF", Q = 3)
head(f)

f &lt;- diurnalAdj(durData, aggregation = "all", returnSplineFnc = TRUE)
f

## End(Not run)
</code></pre>


</div>