<div class="container">

<table style="width: 100%;"><tr>
<td>process_modis_swath</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Mosaic MODIS swaths</h2>

<h3>Description</h3>

<p>This function will return a <code>SpatRaster</code> object with
values of selected subdatasets. Swath data include curvilinear
grids, which require warping/rectifying the original curvilinear grids
into rectilinear grids. The function internally warps each of inputs
then mosaic the warped images into one large <code>SpatRaster</code> object.
Users need to select a subdataset to process. The full path looks like
<code>"HDF4_EOS:EOS_SWATH:{file_path}:mod06:subdataset"</code>, where file_path is
the full path to the hdf file.
</p>


<h3>Usage</h3>

<pre><code class="language-R">process_modis_swath(
  path = NULL,
  date = NULL,
  subdataset = NULL,
  suffix = ":mod06:",
  resolution = 0.05,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>character. Full paths of hdf files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date</code></td>
<td>
<p>character(1). Date to query.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subdataset</code></td>
<td>
<p>character. Subdatasets to process.
<strong>Unlike other preprocessing functions, this argument should specify
the exact subdataset name.</strong> For example, when using MOD06_L2 product,
one may specify <code>c("Cloud_Fraction", "Cloud_Optical_Thickness")</code>,
etc. The subdataset names can be found in <code>terra::describe()</code> output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suffix</code></td>
<td>
<p>character(1). Should be formatted <code style="white-space: pre;">⁠:{product}:⁠</code>,
e.g., <code style="white-space: pre;">⁠:mod06:⁠</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resolution</code></td>
<td>
<p>numeric(1). Resolution of output raster.
Unit is degree (decimal degree in WGS84).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>For internal use.</p>
</td>
</tr>
</table>
<h3>Value</h3>


<ul>
<li>
<p> a <code>SpatRaster</code> object (crs = <code>"EPSG:4326"</code>): if <code>path</code> is a single file with
full specification of subdataset.
</p>
</li>
<li>
<p> a <code>SpatRaster</code> object (crs = <code>"EPSG:4326"</code>): if <code>path</code> is a list of files. In this case, the returned object will have the maximal extent of multiple warped layers
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Insang Song
</p>


<h3>See Also</h3>


<ul>
<li> <p><code>process_modis_warp()</code>, <code>stars::read_stars()</code>, <code>stars::st_warp()</code>
</p>
</li>
<li> <p><a href="https://gdal.org/en/latest/drivers/raster/hdf4.html">GDAL HDF4 driver documentation</a>
</p>
</li>
<li> <p><code>terra::describe()</code>: to list the full subdataset list with <code>sds = TRUE</code>
</p>
</li>
<li> <p><code>terra::sprc()</code>, <code>terra::rast()</code>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## NOTE: Example is wrapped in `\dontrun{}` as function requires a large
##       amount of data which is not included in the package.
## Not run: 
mod06l2_swath &lt;- process_modis_swath(
  path = list.files(
    "./data/mod06l2",
    full.names = TRUE,
    pattern = ".hdf"
  ),
  date = "2024-01-01",
  subdataset = "Cloud_Fraction",
  suffix = ":mod06:",
  resolution = 0.05
)

## End(Not run)
</code></pre>


</div>