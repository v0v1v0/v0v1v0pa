<div class="container">

<table style="width: 100%;"><tr>
<td>y2z</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Converts measurements to standard deviation scores (SDS)</h2>

<h3>Description</h3>

<p>Converts measurements into age- and sex-conditional standard deviation score
(SDS) using an external reference.
</p>


<h3>Usage</h3>

<pre><code class="language-R">y2z(
  y = c(75, 80, 85),
  x = 1,
  sex = "M",
  sub = "N",
  ref = get("nl4.hgt"),
  dist = "LMS",
  dec = 3,
  sex.fallback = NA,
  sub.fallback = NA,
  tail.adjust = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A numerical vector containing the outcome measurements.  The length
<code>length(y)</code> determines the size of the output vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A vector containing the values of the numerical covariate (typically
decimal age or height) at which conversion is desired.  Values are replicated
to match <code>length(y)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sex</code></td>
<td>
<p>A character vector indicating whether the male (<code>"M"</code>) of
female (<code>"F"</code>)reference should be used.  Values are replicated to match
<code>length(y)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sub</code></td>
<td>
<p>A character vector indicating the level of the <code>sub</code> field of
the reference standard defined in <code>ref</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref</code></td>
<td>
<p>A data frame containing a factor <code>sex</code>, a numerical variable
<code>age</code> containing the tabulated decimal point ages, and two or more
numerical variables with reference values. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist</code></td>
<td>
<p>A string identifying the type of distribution. Values values are:
<code>"NO"</code>, <code>"BCCG"</code>, <code>"LMS"</code>, <code>"BCPE"</code> and <code>"BCT"</code>.
The default is <code>"LMS"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dec</code></td>
<td>
<p>A scalar value indicating the number of decimals used to round the
value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sex.fallback</code></td>
<td>
<p>The level of the <code>sex</code> field used when no match is
found.  The default <code>sex.fallback=NA</code> specifies that 
unmatched entries should receive a <code>NA</code> value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sub.fallback</code></td>
<td>
<p>The level of the <code>sub</code> field used when no match is
found.  The default <code>sub.fallback=NA</code> specifies that 
unmatched entries should receive a <code>NA</code> value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tail.adjust</code></td>
<td>
<p>Logical. If <code>TRUE</code> then the WHO method for 
tail adjustment is applied. The default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Functions <code>z2y()</code> and <code>y2z()</code> are the inverse of each other.
</p>
<p>The argument <code>dist</code> determines the statistical distribution.  The
possibilities are as follows: </p>
 <dl>
<dt>list("\"NO\"")</dt>
<dd>
<p><code>ref</code>
should contain columns <code>mean</code> and <code>sd</code>, containing the mean and the
standard deviation in the external reference population.</p>
</dd>
<dt>list("\"LMS\"")</dt>
<dd>
<p><code>ref</code> should contain columns <code>L</code>, <code>S</code>
and <code>M</code> containing the LMS parameters.</p>
</dd>
<dt>list("\"BCCG\"")</dt>
<dd>
<p><code>ref</code> should contain columns <code>mu</code>,
<code>sigma</code> and <code>nu</code> containing the Box-Cox Cole-Green parameters.</p>
</dd>
<dt>list("\"BCPE\"")</dt>
<dd>
<p><code>ref</code> should contain columns <code>mu</code>,
<code>sigma</code>, <code>nu</code> and <code>tau</code> containing the Box-Cox Power
Exponential parameters.</p>
</dd> <dt>list("\"BCT\"")</dt>
<dd>
<p><code>ref</code> should contain
columns <code>mu</code>, <code>sigma</code>, <code>nu</code> and <code>tau</code> containing the
Box-Cox T distribution parameters.</p>
</dd> </dl>
<h3>Value</h3>

<p>For <code>y2z()</code>: A vector with <code>length(y)</code> elements containing
the standard deviation score.  For <code>z2y()</code>: A vector with
<code>length(z)</code> elements containing quantiles.
</p>


<h3>Author(s)</h3>

<p>Stef van Buuren, 2010
</p>


<h3>See Also</h3>

<p><code>z2y</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

boys &lt;- boys7482

# SDS of height 115 cm at age 5 years, 
# relative to Dutch boys reference
y2z(y=115, x=5)

# same relative to Dutch girls
y2z(y=115, x=5, sex="F")

# SDS of IOTF BMI cut-off value for overweight (boys 2-18) 
# relative to Dutch boys reference
cutoff &lt;- c(
18.41, 18.15, 17.89, 17.72, 17.55, 17.49, 17.42, 17.49, 17.55, 17.74,
17.92, 18.18, 18.44, 18.77, 19.10, 19.47, 19.84, 20.20, 20.55, 20.89, 
21.22, 21.57, 21.91, 22.27, 22.62, 22.96, 23.29, 23.60, 23.90, 24.18, 
24.46, 24.73, 25.00)
age &lt;- seq(2, 18, by=0.5)
(z &lt;- y2z(y=cutoff, x=age, sex="M", ref=nl4.bmi))

# apply inverse transformation to check calculations
round(z2y(z, age, ref=nl4.bmi), 2)
cutoff

# calculate percentiles of weight 12 kg at 2 years (boys, girls)
100*round(pnorm(y2z(y=c(12,12), x=2, sex=c("M","F"), ref=nl4.wgt)),2)

# # percentage of children lighter than 15kg at ages 2-5
e &lt;- expand.grid(age=2:5, sex=c("M","F"))
z &lt;- y2z(y=rep(15,nrow(e)), x=e$age, sex=e$sex, ref=nl4.wgt)
w &lt;- matrix(100*round(pnorm(z),2), nrow=2, byrow=TRUE)
dimnames(w) &lt;- list(c("boys","girls"),2:5)
w

# analysis in Z scale
hgt.z &lt;- y2z(y=boys$hgt, x=boys$age, sex="M", ref=nl4.hgt)
wgt.z &lt;- y2z(y=boys$wgt, x=boys$age, sex="M", ref=nl4.wgt)
plot(hgt.z, wgt.z, col="blue")


# z2y

# quantile at SD=0 of age 2 years, 
# height Dutch boys
z2y(z=0, x=2)

# same for Dutch girls
z2y(z=0, x=2, sex="F")

# quantile at SD=c(-1,0,1) of age 2 years, BMI Dutch boys
z2y(z=c(-1,0,+1), x=2, ref=nl4.bmi)

# 0SD line (P50) in kg of weight for age in 5-10 year, Dutch boys
z2y(z=rep(0,6), x=5:10, ref=nl4.wgt)

# 95th percentile (P95), age 10 years, wfa, Dutch boys
z2y(z=qnorm(0.95), x=10, ref=nl4.wgt)

# table of P3, P10, P50, P90, P97 of weight for 5-10 year old dutch boys
# age per year
age &lt;- 5:10
p &lt;- c(0.03,0.1,0.5,0.9,0.97)
z &lt;- rep(qnorm(p), length(age))
x &lt;- rep(age, each=length(p))
w &lt;- matrix(z2y(z, x=x, sex="M", ref=nl4.wgt), ncol=length(p),
 byrow=TRUE)
dimnames(w) &lt;- list(age, p)
round(w,1)

# standard set of Z-scores of weight for all tabulated ages, boys &amp; girls
# and three etnicities
sds &lt;- c(-2.5, -2, -1, 0, 1, 2, 2.5)
age &lt;- nl4.wgt$x
z &lt;- rep(sds, times=length(age))
x &lt;- rep(age, each=length(sds))
sex &lt;- rep(c("M","F"), each=length(z)/2)
w &lt;- z2y(z=z, x=x, sex=sex, ref=nl4.wgt)
w &lt;- matrix(w, ncol=length(sds), byrow=TRUE)
dimnames(w) &lt;- list(age, sds)
data.frame(sub=nl4.wgt$sub,sex=nl4.wgt$sex,round(w,2), row.names=NULL)

# P85 of BMI in 5-8 year old Dutch boys and girls
e &lt;- expand.grid(age=5:8, sex=c("M","F"))
w &lt;- z2y(z=rep(qnorm(0.85),nrow(e)), x=e$age, sex=e$sex, ref=nl4.bmi)
w &lt;- matrix(w, nrow=2, byrow=TRUE)
dimnames(w) &lt;- list(c("boys","girls"),5:8)
w

# data transformation of height z-scores to cm-scale
z &lt;- c(-1.83, 0.09, 2.33, 0.81, -1.20)
x &lt;- c(8.33,  0.23, 19.2, 24.3, 10)
sex &lt;- c("M", "M", "F", "M", "F")
round(z2y(z=z, x=x, sex=sex, ref=nl4.hgt), 1)

# interpolate published height standard 
# to daily values, days 0-31, boys
# on centiles -2SD, 0SD and +2SD 
days &lt;- 0:31
sds  &lt;- c(-2, 0, +2)
z    &lt;- rep(sds, length(days))
x    &lt;- rep(round(days/365.25,4), each=length(sds))
w    &lt;- z2y(z, x, sex="M", ref=nl4.hgt)
w    &lt;- matrix(w, ncol=length(sds), byrow=TRUE)
dimnames(w) &lt;- list(days, sds)
w

</code></pre>


</div>