<div class="container">

<table style="width: 100%;"><tr>
<td>plot_jointMarginalAPCeffects</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Joint plot to compare the marginal APC effects of multiple models</h2>

<h3>Description</h3>

<p>This function creates a joint plot of the marginal APC effects of multiple
estimated models. It creates a plot with one pane per age, period and
cohort effect, each containing one lines for each estimated model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_jointMarginalAPCeffects(
  model_list,
  dat,
  vlines_list = NULL,
  ylab = NULL,
  ylim = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model_list</code></td>
<td>
<p>A list of regression models estimated with
<code>gam</code> or <code>bam</code>. If the list is named, the
names are used as labels. Can also be a single model object instead of a list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>Dataset with columns <code>period</code> and <code>age</code>. If <code>y_var</code>
is specified, the dataset must contain the respective column. If <code>model</code>
is specified, the dataset must have been used for model estimation with
<code>gam</code> or <code>bam</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines_list</code></td>
<td>
<p>Optional list that can be used to highlight the borders of
specific age groups, time intervals or cohorts. Each element must be a
numeric vector of values on the x-axis where vertical lines should be drawn.
The list can maximally have three elements and must have names out of
<code>c("age","period","cohort"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab, ylim</code></td>
<td>
<p>Optional ggplot2 styling arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If the model was estimated with a log or logit link, the function
automatically performs an exponential transformation of the effect.
</p>
<p>Since the plot output created by the function is no <code>ggplot2</code> object,
but an object created with <code>ggpubr::ggarrange</code>, the overall theme
of the plot cannot be changed by adding the theme in the form of
'<code>plot_jointMarginalAPCeffects(...) + theme_minimal(...)</code>'.
Instead, you can call <code>theme_set(theme_minimal(...))</code> as an individual
call before calling <code>plot_jointMarginalAPCeffects(...)</code>. The latter
function will then use this global plotting theme.
</p>


<h3>Value</h3>

<p>Plot grid created with <code>ggarrange</code>.
</p>


<h3>Author(s)</h3>

<p>Alexander Bauer <a href="mailto:alexander.bauer@stat.uni-muenchen.de">alexander.bauer@stat.uni-muenchen.de</a>,
Maximilian Weigert <a href="mailto:maximilian.weigert@stat.uni-muenchen.de">maximilian.weigert@stat.uni-muenchen.de</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(APCtools)
library(mgcv)

data(travel)

# plot marginal effects of one model
model_pure &lt;- gam(mainTrip_distance ~ te(age, period), data = travel)
plot_jointMarginalAPCeffects(model_pure, dat = travel)

# plot marginal effects of multiple models
model_cov  &lt;- gam(mainTrip_distance ~ te(age, period) + s(household_income),
                  data = travel)
model_list &lt;- list("pure model"      = model_pure,
                   "covariate model" = model_cov)
plot_jointMarginalAPCeffects(model_list, dat = travel)

# mark specific cohorts
plot_jointMarginalAPCeffects(model_list, dat = travel,
                             vlines_list = list("cohort" = c(1966.5,1982.5,1994.5)))

</code></pre>


</div>