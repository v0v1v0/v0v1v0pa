<div class="container">

<table style="width: 100%;"><tr>
<td>plot_marginalAPCeffects</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot of marginal APC effects based on an estimated GAM model</h2>

<h3>Description</h3>

<p>Plot the marginal effect of age, period or cohort, based on an APC model
estimated as a semiparametric additive regression model with <code>gam</code>
or <code>bam</code>.
This function is a simple wrapper to <code>plot_partialAPCeffects</code>,
called with argument <code>hide_partialEffects = TRUE</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_marginalAPCeffects(
  model,
  dat,
  variable = "age",
  vlines_vec = NULL,
  return_plotData = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>Optional regression model estimated with <code>gam</code>
or <code>bam</code> to estimate a smoothed APC surface. Only used if
<code>y_var</code> is not
specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>Dataset with columns <code>period</code> and <code>age</code>. If <code>y_var</code>
is specified, the dataset must contain the respective column. If <code>model</code>
is specified, the dataset must have been used for model estimation with
<code>gam</code> or <code>bam</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable</code></td>
<td>
<p>One of <code>c("age","period","cohort")</code>, specifying the
temporal dimension for which the partial effect plots should be created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines_vec</code></td>
<td>
<p>Optional numeric vector of values on the x-axis where
vertical lines should be drawn. Can be used to highlight the borders of
specific age groups, time intervals or cohorts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_plotData</code></td>
<td>
<p>If TRUE, a list of the datasets prepared for plotting
is returned instead of the ggplot object. The list contains one dataset each
for the overall effect (= evaluations of the APC surface to plot the partial
effects) and for each marginal APC effect (no matter the specified value of
the argument <code>variable</code>). Defaults to FALSE.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>ggplot object
</p>


<h3>Author(s)</h3>

<p>Alexander Bauer <a href="mailto:alexander.bauer@stat.uni-muenchen.de">alexander.bauer@stat.uni-muenchen.de</a>,
Maximilian Weigert <a href="mailto:maximilian.weigert@stat.uni-muenchen.de">maximilian.weigert@stat.uni-muenchen.de</a>
</p>


<h3>References</h3>

<p>Weigert, M., Bauer, A., Gernert, J., Karl, M., Nalmpatian, A.,
KÃ¼chenhoff, H., and Schmude, J. (2021). Semiparametric APC analysis of
destination choice patterns: Using generalized additive models to quantify
the impact of age, period, and cohort on travel distances.
<em>Tourism Economics</em>. doi:10.1177/1354816620987198.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(APCtools)
library(mgcv)

data(travel)
model &lt;- gam(mainTrip_distance ~ te(age, period), data = travel)

plot_marginalAPCeffects(model, dat = travel, variable = "age")

# mark specific cohorts
plot_marginalAPCeffects(model, dat = travel, variable = "cohort",
                        vlines_vec = c(1966.5,1982.5,1994.5))

</code></pre>


</div>