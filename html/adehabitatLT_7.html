<div class="container">

<table style="width: 100%;"><tr>
<td>cutltraj</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Split Trajectories into Several Bursts</h2>

<h3>Description</h3>

<p>The function <code>cutltraj</code> split the bursts in an object of class
<code>ltraj</code> into several "sub-bursts", according to some specified
criterion.
</p>
<p>The function <code>bindltraj</code> binds the bursts an object of class
<code>ltraj</code> with the same attributes <code>"id"</code> into one unique
burst.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cutltraj(ltraj, criterion, value.NA = FALSE, nextr = TRUE, ...)
bindltraj(ltraj, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ltraj</code></td>
<td>
<p>an object of class <code>ltraj</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>criterion</code></td>
<td>
<p>a character string giving any syntactically correct R
logical expression implying the descriptive parameters in <code>x</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value.NA</code></td>
<td>
<p>logical.  The value that should be used to replace the
missing values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nextr</code></td>
<td>
<p>logical.  Whether the current "sub-burst" should stop
after (<code>nextr = TRUE</code>) or before (<code>nextr = FALSE</code>) the
first relocation matching <code>criterion</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to be passed to other functions</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Splitting a trajectory may be of interest in many situations. For
example, if it is known that two kinds of activities of the monitored
animals correspond to different properties of, say, the distance
between successive relocations, it may be of interest to split the
trajectory according to the values of these distances.
</p>
<p>The criterion used to cut the trajectory may imply any of the
parameters describing a trajectory in the object <code>ltraj</code> (e.g.,
<code>"dt"</code>, <code>"dist"</code>, <code>"dx"</code>, etc. see the help page of
<code>as.ltraj</code>), as well as any variable stored in the attribute
<code>"infolocs"</code> of the object.
</p>
<p>Two options are available in <code>cutltraj</code>, depending on the value
of <code>nextr</code>. If <code>nextr = FALSE</code>, any sequence of
successive relocations that *do not* match the criterion is considered
as a new burst.  For example, if for a given burst, the criterion
returns the vector <code>(FALSE, FALSE, FALSE, TRUE, TRUE, TRUE,
    FALSE, FALSE, FALSE)</code>, then the function <code>cutltraj</code> creates
two new bursts of relocations, the first one containing the first 3
relocations and the second one the last 3 relocations.
</p>
<p>If <code>nextr = TRUE</code>, any sequence of successive relocations that
*do not* match the criterion, *as well as the first relocation that
does match it after this sequence* is considered as a new burst. 
This option is available because many of the descriptive parameters
associated to a given relocation in an object of class <code>ltraj</code>
measure some specific feature concerning the position of the next
relocation.  For example, one may want to consider as a burst any
sequence of relocations for which the time lag is below one hour (the
criterion is <code>"dt &gt; 3600"</code>.  The first relocation for which this
criterion is TRUE belong to the burst, and it is the next one which
is excluded from the burst.  For example, if for a given burst, the
criterion returns the vector <code>(FALSE, FALSE, FALSE, TRUE, TRUE,
    TRUE, FALSE, FALSE, FALSE)</code>, then the function <code>cutltraj</code>
creates two new bursts of relocations, the first one containing the
first 4 relocations and the second one the last 3 relocations.
</p>


<h3>Value</h3>

<p>An object of class <code>ltraj</code>.
</p>


<h3>Author(s)</h3>

<p> Clement Calenge <a href="mailto:clement.calenge@ofb.gouv.fr">clement.calenge@ofb.gouv.fr</a> </p>


<h3>See Also</h3>

<p><code>ltraj</code> for additional information about objects
of class <code>ltraj</code> (and especially concerning the names of the
descriptive parameters that can be used in
<code>cutltraj</code>).  <code>is.sd</code> (especially the examples of this
help page) for other examples of use of this function</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#######################################################
##
## GPS monitoring of one bear

data(bear)

## We want to study the trajectory of the day at the scale
## of the day. We define one trajectory per day. The trajectory should begin
## at 22H00
## The following function returns TRUE if the date is comprised between
## 21H00 and 22H00 (i.e. correspond to the relocation taken at 21H30)

foo &lt;- function(date) {
     da &lt;- as.POSIXlt(date, "UTC")
     ho &lt;- da$hour + da$min/60
     return(ho&gt;21&amp;ho&lt;22)
}

## We cut the trajectory into bursts after the relocation taken at 21H30:

bea1 &lt;- cutltraj(bear, "foo(date)", nextr = TRUE)
bea1

## Remove the first and last burst:
bea2 &lt;- bea1[-c(1,length(bea1))]


#######################################################
##
## Bind the trajectories

bea3 &lt;- bindltraj(bea2)
bea3

## End(Not run)
</code></pre>


</div>