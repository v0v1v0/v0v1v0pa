<div class="container">

<table style="width: 100%;"><tr>
<td>create_aml_compute</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an AmlCompute cluster</h2>

<h3>Description</h3>

<p>Provision Azure Machine Learning Compute (AmlCompute) as a compute target
for training. AmlCompute is a managed-compute infrastructure that allows the
user to easily create a single or multi-node compute. To create a persistent
AmlCompute resource that can be reused across jobs, make sure to specify the
<code>vm_size</code> and <code>max_nodes</code> parameters. The compute can then be shared with
other users in the workspace and is kept between jobs. If <code>min_nodes = 0</code>,
the compute autoscales down to zero nodes when it isn't used, and scales up
automatically when a job is submitted.
</p>
<p>AmlCompute has default limits, such as the number of cores that can be
allocated. For more information, see
<a href="https://docs.microsoft.com/en-us/azure/machine-learning/service/how-to-manage-quotas">Manage and request quotas for Azure resources</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_aml_compute(
  workspace,
  cluster_name,
  vm_size,
  vm_priority = "dedicated",
  min_nodes = 0,
  max_nodes = NULL,
  idle_seconds_before_scaledown = NULL,
  admin_username = NULL,
  admin_user_password = NULL,
  admin_user_ssh_key = NULL,
  vnet_resourcegroup_name = NULL,
  vnet_name = NULL,
  subnet_name = NULL,
  tags = NULL,
  description = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>workspace</code></td>
<td>
<p>The <code>Workspace</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster_name</code></td>
<td>
<p>A string of the name of the cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vm_size</code></td>
<td>
<p>A string of the size of agent VMs. More details can be found
<a href="https://docs.microsoft.com/en-us/azure/templates/microsoft.compute/2019-12-01/virtualmachines#virtualmachineidentity-object">here</a>.
Note that not all sizes are available in all regions, as detailed in the
aformentioned link. Defaults to <code>'Standard_NC6'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vm_priority</code></td>
<td>
<p>A string of either <code>'dedicated'</code> or <code>'lowpriority'</code> to
use either dedicated or low-priority VMs. Defaults to <code>'dedicated'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_nodes</code></td>
<td>
<p>An integer of the minimum number of nodes to use on the
cluster. If not specified, will default to <code>0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_nodes</code></td>
<td>
<p>An integer of the maximum number of nodes to use on the
cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idle_seconds_before_scaledown</code></td>
<td>
<p>An integer of the node idle time in
seconds before scaling down the cluster. Defaults to <code>120</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>admin_username</code></td>
<td>
<p>A string of the name of the administrator user account
that can be used to SSH into nodes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>admin_user_password</code></td>
<td>
<p>A string of the password of the administrator user
account.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>admin_user_ssh_key</code></td>
<td>
<p>A string of the SSH public key of the administrator
user account.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vnet_resourcegroup_name</code></td>
<td>
<p>A string of the name of the resource group
where the virtual network is located.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vnet_name</code></td>
<td>
<p>A string of the name of the virtual network.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subnet_name</code></td>
<td>
<p>A string of the name of the subnet inside the vnet.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tags</code></td>
<td>
<p>A named list of tags for the cluster, e.g.
<code>list("tag" = "value")</code>.'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>description</code></td>
<td>
<p>A string of the description for the cluster.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The <code>AmlCompute</code> object.
</p>


<h3>Details</h3>

<p>For more information on using an Azure Machine Learning Compute resource
in a virtual network, see
<a href="https://docs.microsoft.com/en-us/azure/machine-learning/service/how-to-enable-virtual-network#use-a-machine-learning-compute-instance">Secure Azure ML experimentation and inference jobs within an Azure Virtual Network</a>.
</p>


<h3>See Also</h3>

<p><code>wait_for_provisioning_completion()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
ws &lt;- load_workspace_from_config()
compute_target &lt;- create_aml_compute(ws,
                                     cluster_name = 'mycluster',
                                     vm_size = 'STANDARD_D2_V2',
                                     max_nodes = 1)
wait_for_provisioning_completion(compute_target, show_output = TRUE)

## End(Not run)
</code></pre>


</div>