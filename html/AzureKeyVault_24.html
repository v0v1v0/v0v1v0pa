<div class="container">

<table style="width: 100%;"><tr>
<td>vault_access_policy</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Specify a key vault access policy</h2>

<h3>Description</h3>

<p>Specify a key vault access policy
</p>


<h3>Usage</h3>

<pre><code class="language-R">vault_access_policy(
  principal,
  tenant = NULL,
  key_permissions = "all",
  secret_permissions = "all",
  certificate_permissions = "all",
  storage_permissions = "all"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>principal</code></td>
<td>
<p>The user or service principal for this access policy. Can be a GUID, or a user, app or service principal object from the AzureGraph package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tenant</code></td>
<td>
<p>The tenant of the principal.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key_permissions</code></td>
<td>
<p>The permissions to grant for working with keys.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>secret_permissions</code></td>
<td>
<p>The permissions to grant for working with secrets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>certificate_permissions</code></td>
<td>
<p>The permissions to grant for working with certificates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>storage_permissions</code></td>
<td>
<p>The permissions to grant for working with storage accounts.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Client access to a key vault is governed by its access policies, which are set on a per-principal basis. Each principal (user or service) can have different permissions granted, for keys, secrets, certificates, and storage accounts.
</p>
<p>Here are the possible permissions. The permission "all" means to grant all permissions.
</p>

<ul>
<li>
<p> Keys: "get", "list", "update", "create", "import", "delete", "recover", "backup", "restore", "decrypt", "encrypt", "unwrapkey", "wrapkey", "verify", "sign", "purge"
</p>
</li>
<li>
<p> Secrets: "get", "list", "set", "delete", "recover", "backup", "restore", "purge"
</p>
</li>
<li>
<p> Certificates: "get", "list", "update", "create", "import", "delete", "recover", "backup", "restore", "managecontacts", "manageissuers", "getissuers", "listissuers", "setissuers", "deleteissuers", "purge"
</p>
</li>
<li>
<p> Storage accounts: "get", "list", "update", "set", "delete", "recover", "backup", "restore", "regeneratekey", "getsas", "listsas", "setsas", "deletesas", "purge"
</p>
</li>
</ul>
<h3>Value</h3>

<p>An object of class <code>vault_access_policy</code>, suitable for creating a key vault resource.
</p>


<h3>See Also</h3>

<p>create_key_vault, az_key_vault
</p>
<p><a href="https://docs.microsoft.com/en-us/azure/key-vault/">Azure Key Vault documentation</a>,
<a href="https://docs.microsoft.com/en-us/rest/api/keyvault">Azure Key Vault API reference</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

# default is to grant full access
vault_access_policy("user_id")

# use AzureGraph to specify a user via their email address rather than a GUID
usr &lt;- AzureGraph::get_graph_login()$get_user("username@aadtenant.com")
vault_access_policy(usr)

# grant a service principal read access to keys and secrets only
svc &lt;- AzureGraph::get_graph_login()$
    get_service_principal(app_id="app_id")
vault_access_policy(svc,
    key_permissions=c("get", "list"),
    secret_permissions=c("get", "list"),
    certificate_permissions=NULL,
    storage_permissions=NULL)


## End(Not run)
</code></pre>


</div>