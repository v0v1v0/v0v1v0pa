<div class="container">

<table style="width: 100%;"><tr>
<td>anthro_prevalence</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute prevalence estimates</h2>

<h3>Description</h3>

<p>Prevalence estimates according to the WHO recommended standard analysis:
includes prevalence estimates with corresponding standard errors
and confidence intervals, and z-score summary statistics
(mean and standard deviation) with most common cut-offs describing the
full index distribution (-3, -2, -1, +1, +2, +3), and at disaggregated
levels for all available factors (age, sex, type of residence,
geographical regions, wealth quintiles, mother education and one
additional factor the user is interested in and for
which data are available).
</p>


<h3>Usage</h3>

<pre><code class="language-R">anthro_prevalence(
  sex,
  age = NA_real_,
  is_age_in_month = FALSE,
  weight = NA_real_,
  lenhei = NA_real_,
  measure = NA_character_,
  oedema = "n",
  sw = NULL,
  cluster = NULL,
  strata = NULL,
  typeres = NA_character_,
  gregion = NA_character_,
  wealthq = NA_character_,
  mothered = NA_character_,
  othergr = NA_character_
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sex</code></td>
<td>
<p>A numeric or text variable containing gender information.
If it is numeric, its values must be: 1 for males and 2 for
females. If it is character, it must be "m" or "M" for males
and "f" or "F" for females. No z-scores will be calculated
if sex is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age</code></td>
<td>
<p>A numeric variable containing age information; age can be
in either days or months (if optional argument is_age_in_month
is set to TRUE). An exact age in days is expected and should
not be rounded if age is in months. Age-related z-scores will
NOT be calculated if age is missing (NA).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is_age_in_month</code></td>
<td>
<p>A logical flag; if TRUE, variable age unit will be
treated as months. The function converts it to days by dividing
age by 30.4375 and rounding it to integer so that reference
tables can be used. When unspecified, the default value FALSE
is used and age unit is treated as days.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>A numeric variable containing body weight information, which
must be in kilograms. Weight-related z-scores are not
calculated if body weight is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lenhei</code></td>
<td>
<p>A numeric variable containing length (recumbent length) or
height (standing height) information, which must be in
centimeters. Length/height-related z-scores will not be
calculated if lenhei is missing. For children with age
below 24 months (i.e. below 731 days) and standing height
measured, the function converts it to recumbent length by
adding 0.7 cm; and for children with age equal and above
24 months and measured in recumbent length, the function
converts it to standing height by subtracting 0.7 cm.
This way all the z-scores calculated by this function are
length-based for children below 24 months, and
height-based otherwise. This converted length/height
according to age is assigned to the variable clenhei in
the resulting data.frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>A character variable indicating whether recumbent length
or standing height was measured for each observation.
The values of this variable must be "L" or "l" for recumbent
length, and "H" or "h" for standing height.
Although it is highly recommended that this variable
is provided according to the measurements taken in
the survey, it is possible to run the analysis without
specifying this variable. If unspecified, the default
vector with all missing values is used. The function
imputes the missing values according to the
following algorithm:
</p>

<ul>
<li>
<p> If age is not missing, then it is recumbent length
if age below 24 months (731 days), and standing height
if age equal and above 24 months.
</p>
</li>
<li>
<p> If age is missing, then it is recumbent length if
measurement &lt; 87 cm and standing height
if measurement &gt;= 87 cm.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oedema</code></td>
<td>
<p>The values of this character variable must be "n", "N" or "2"
for non-oedema, and "y", "Y", "1" for oedema. Although it is highly
recommended that this variable is provided by the survey,
it is possible to run
the analysis without specifying this variable. If unspecified,
the default vector of all "n" with values considered as
non-oedema is used. Missing values will be
treated as non-oedema. For oedema, weight related z-scores
(zwei, zwfl and zbmi) are NOT calculated (set to missing),
BUT they are treated as being &lt; -3 SD in the weight-related
indicator prevalence (<code>anthro_prevalence</code>)
estimation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sw</code></td>
<td>
<p>An optional numeric vector containing the sampling weights.
If NULL, no sampling weights are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>An optional integer vector representing clusters. If the value
is NULL this is treated as a survey without a cluster. This is also the case
if all values are equal, then we assume there is also no cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>An optional integer vector representing strata. Pass NULL to
indicate that there are no strata.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>typeres</code></td>
<td>
<p>An optional integer or character vector representing a type of
residence.
Any values are accepted, however, “Rural” or “Urban” are preferable
for outputs purposes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gregion</code></td>
<td>
<p>An optional integer or character vector representing a
geographical region.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wealthq</code></td>
<td>
<p>An optional integer or character vector representing wealth
quintiles where (1=poorest; 2,3,4,5=richest).
All values can either be NA, or 1, 2, 3, 4, 5 or Q1, Q2, Q3, Q4, Q5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mothered</code></td>
<td>
<p>An optional integer or character vector representing the
education of the mother.
Any number of categories is accepted for the analysis, provided
sample sizes are sufficient in all categories. However, the common,
standard recommended categories are no education, primary school,
and secondary school or higher (“None”, “Primary” and “Secondary”).
Note: Mother education refers to the highest level of schooling
attained by the mother</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>othergr</code></td>
<td>
<p>An optional integer or character vector that is of interest
for stratified analysis.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In this function, all available (non-missing and non-flagged) z-score values
are used for each indicator-specific prevalence
estimation (standard analysis).
</p>
<p>Note: the function temporarily sets the <code>survey</code> option
<code>survey.lonely.psu</code> to "adjust" and then restores the original values.
The function is a wrapper around the <code>survey</code> package to compute
estimates for the different groups (e.g. by age or sex).
</p>
<p>If not all parameter values have equal length, parameter values will be
repeated to match the maximum length of all arguments except
<code>is_age_in_month</code> using <code>rep_len</code>. This happens without warnings.
</p>


<h3>Value</h3>

<p>Returns a data.frame with prevalence estimates for the various
groups.
</p>
<p>The output data frame includes prevalence estimates with corresponding
standard errors and confidence intervals,
and z-score summary statistics (mean and standard deviation) with most
common cut-offs describing the full index
distribution (-3, -2, -1, +1, +2, +3), and at disaggregated levels for
all available factors (age, sex, type of residence,
geographical regions, wealth quintiles, mother education and one
additional factor the user is interested in and for which
data are available).
</p>
<p>The resulting columns are coded with a <em>prefix</em>,
<em>a prevalence indicator</em> and <em>a suffix</em>:
</p>
<p><strong>Prefix:</strong>
</p>

<dl>
<dt>HA</dt>
<dd>
<p>Height-for-age</p>
</dd>
<dt>WA</dt>
<dd>
<p>Weight-for-age</p>
</dd>
<dt>WA_2</dt>
<dd>
<p>Underweight</p>
</dd>
<dt>BMI</dt>
<dd>
<p>Body-mass-index-for-age</p>
</dd>
<dt>WH</dt>
<dd>
<p>Weight-for-height</p>
</dd>
<dt>HA_WH</dt>
<dd>
<p>Height-for-age and weight-for-height combined</p>
</dd>
</dl>
<p><strong>Prevalence indicator:</strong>
</p>

<dl>
<dt>_3</dt>
<dd>
<p>Prevalence corresponding to &lt; -3 SD</p>
</dd>
<dt>_2</dt>
<dd>
<p>Prevalence corresponding to &lt; -2 SD</p>
</dd>
<dt>_1</dt>
<dd>
<p>Prevalence corresponding to &lt; -1 SD</p>
</dd>
<dt>1</dt>
<dd>
<p>Prevalence corresponding to &gt; +1 SD</p>
</dd>
<dt>2</dt>
<dd>
<p>Prevalence corresponding to &gt; +2 SD</p>
</dd>
<dt>3</dt>
<dd>
<p>Prevalence corresponding to &gt; +3 SD</p>
</dd>
</dl>
<p><strong>Suffix:</strong>
</p>

<dl>
<dt>_pop</dt>
<dd>
<p>Weighted sample size</p>
</dd>
<dt>_unwpop</dt>
<dd>
<p>Unweighted sample size</p>
</dd>
<dt>_r</dt>
<dd>
<p>Mean/prevalence</p>
</dd>
<dt>_ll</dt>
<dd>
<p>lower 95% confidence interval limit</p>
</dd>
<dt>_ul</dt>
<dd>
<p>upper 95% confidence interval limit</p>
</dd>
<dt>_stdev</dt>
<dd>
<p>Standard Deviation</p>
</dd>
<dt>_se</dt>
<dd>
<p>Standard error</p>
</dd>
</dl>
<p><strong>For example:</strong>
</p>

<dl>
<dt>WHZ_pop</dt>
<dd>
<p>Weight-for-height weighted sample size</p>
</dd>
<dt>HA_r</dt>
<dd>
<p>Height-for-age z-score mean</p>
</dd>
<dt>WA_stdev</dt>
<dd>
<p>Weight-for-age z-score Standard Deviation</p>
</dd>
<dt>WH2_r</dt>
<dd>
<p>Prevalence of weight-for-height &gt;+2 SD (overweight )</p>
</dd>
<dt>WH_r</dt>
<dd>
<p>Mean weight-for-height z-score</p>
</dd>
<dt>BMI_2_se</dt>
<dd>
<p>Prevalence of BMI-for-age &lt;-2 SD standard error</p>
</dd>
<dt>BMI_3_ll</dt>
<dd>
<p>Prevalence of BMI-for-age &lt;-3 SD lower 95% confidence
interval limit</p>
</dd>
<dt>HA_2_WH_2_ul</dt>
<dd>
<p>Prevalence of children Height-for-age and
weight-for-height combined (stunted &amp; wasted) lower 95% confidence
interval limit</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# because it takes too long for CRAN checks
library(anthro)

# compute the prevalence estimates for 100 random children
# with weight around 15kg and height around 100cm
res &lt;- anthro_prevalence(
  sex = c(1, 2),
  age = 1000, # days
  weight = rnorm(100, 15, 1),
  lenhei = rnorm(100, 100, 10)
)

# Height-for-age
# We extract prevalence estimates for &lt;-3SD, &lt;-2SD (Stunting)
# and the z-score mean
col_names &lt;- c("Group", "HAZ_unwpop", "HA_3_r", "HA_2_r", "HA_r")
res &lt;- res[, col_names]

# rename the columns
colnames(res) &lt;- c("Group", "Unweighted N", "-3SD", "-2SD", "z-score mean ")

# note that we only generated data for one age group
res

## End(Not run)
</code></pre>


</div>