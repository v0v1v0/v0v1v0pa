<div class="container">

<table style="width: 100%;"><tr>
<td>atime_versions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Asymptotic timing of git versions</h2>

<h3>Description</h3>

<p>Computation time and memory for a single R expression
evaluated using several different git versions.</p>


<h3>Usage</h3>

<pre><code class="language-R">atime_versions(
 pkg.path, N, setup, expr, sha.vec=NULL,
 times=10, seconds.limit=0.01, verbose=FALSE,
 pkg.edit.fun=pkg.edit.default, result=FALSE,
 N.env.parent=NULL,
 ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkg.path</code></td>
<td>
<p>Path to git repo containing R package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>numeric vector of data sizes to vary.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>setup</code></td>
<td>

<p>expression to evaluate for every data size, before timings.
In contrast to <code>expr</code>,
no replacement of <code>Package:</code> is performed.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>

<p>code with package double-colon prefix, for example
<code>PKG::fun(argA, argB)</code>, where PKG is the name of the
package specified by <code>pkg.path</code>. This code will be
evaluated for each different package version, by replacing
<code>PKG:</code> by <code>PKG.SHA:</code>.
To run different versions of implicitly-called functions
like <code>DT[i,j]</code>, you need
to call them explicitly, as in 
<code>data.table:::`[.data.table`(DT,i,j)</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sha.vec</code></td>
<td>
<p>named character vector / list of versions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>number of times to evaluate each timed expression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seconds.limit</code></td>
<td>
<p>if the median timing of any expression exceeds
this many seconds, then no timings for larger N are computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical, print messages after every data size?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pkg.edit.fun</code></td>
<td>
<p>function called to edit package before
installation, should typically replace instances of PKG with
PKG.SHA, default works with Rcpp packages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result</code></td>
<td>
<p>logical, save results? (default FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N.env.parent</code></td>
<td>
<p>environment to use as parent of environment
created for each data size N, or NULL to use default parent env.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>named versions.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For convenience, versions can
be specified either as code (...), data (<code>sha.vec</code>), or both.
Each version should be either <code>""</code> (to use currently installed
version of package, or if missing, install most recent
version from CRAN) or a SHA1 hash, which is passed as branch
arg to <code>git2r::checkout</code>; version names used to identify/interpret
the output/plots.
</p>


<h3>Value</h3>

<p>list of class atime with elements <code>seconds.limit</code> (numeric
input param), <code>timings</code> (data table of results).</p>


<h3>Author(s)</h3>

<p>Toby Dylan Hocking</p>


<h3>See Also</h3>

<p><code>atime_versions_exprs</code> 
converts <code>expr</code> into a list of expressions, one for each version,
passed to <code>atime</code> as the <code>expr.list</code> argument.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if(FALSE){

  tdir &lt;- tempfile()
  dir.create(tdir)
  git2r::clone("https://github.com/tdhock/binsegRcpp", tdir)
  atime.list &lt;- atime::atime_versions(
    pkg.path=tdir,
    N=2^seq(2, 20),
    setup={
      max.segs &lt;- as.integer(N/2)
      data.vec &lt;- 1:N
    },
    expr=binsegRcpp::binseg_normal(data.vec, max.segs),
    cv="908b77c411bc7f4fcbcf53759245e738ae724c3e",
    "rm unord map"="dcd0808f52b0b9858352106cc7852e36d7f5b15d",
    "mvl_construct"="5942af606641428315b0e63c7da331c4cd44c091")      
  plot(atime.list)

  atime::atime_versions_remove("binsegRcpp")

}

</code></pre>


</div>