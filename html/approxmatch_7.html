<div class="container">

<table style="width: 100%;"><tr>
<td>nrbalancematch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
The is the background function to perform matching using network optimization.
</h2>

<h3>Description</h3>

<p>This function takes as input the information on two groups, treated and control,
along with the data structure between the units of these two groups to create a
matching. Custom specification of the categorization of the units for near fine
balanced design and balance constraints can be provided.
</p>


<h3>Usage</h3>

<pre><code class="language-R">nrbalancematch(cardata.fil, trt_labs, ctrl_labs, stratify, extmatch = NA, 
distmat, balanceValues, nmatch = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cardata.fil</code></td>
<td>

<p>A data frame or matrix of the dataset. The units are identified using the 
rownames of the data.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trt_labs</code></td>
<td>

<p>A logical vector of same length as nrow(cardata.fil) for the treated units.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ctrl_labs</code></td>
<td>

<p>A logical vector of same length as nrow(cardata.fil) for the control units.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stratify</code></td>
<td>

<p>A character vector of same length as nrow(cardata.fil) specifyting the 
categorization of the units for fine balancing.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extmatch</code></td>
<td>

<p>The name of the column of cardata.fil on which design will be exactly matched.
This is optional.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distmat</code></td>
<td>

<p>A numeric matrix of distances of size the number of treated units <code class="reqn">\times</code>
number of control units. The rows and columns should be named by the unit 
names.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>balanceValues</code></td>
<td>

<p>A named integer vector of balance values of the categories.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nmatch</code></td>
<td>

<p>Number of control units to be matched to each treated units. A positive 
integer.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Do not use this function directly unless you are certain of the usage. 
</p>
<p>IMPORTANT NOTE: In order to perform matching, <code>kwaymatching</code> requires the 
user to load the optmatch (&gt;= 0.9-1) package separately. The manual loading is 
required due to software license issues. If the package is not loaded the 
<code>nrbalancematch</code> command will fail with an error saying the optmatch package 
is not present. Reference to optmatch is given below.
</p>


<h3>Value</h3>

<p>A matrix of two columns first column for the treated unit and the second column 
for the control unit. Units in the first column will be repeated <code>nmatch</code>
times.
</p>


<h3>Author(s)</h3>

<p>Bikram Karmakar
</p>


<h3>References</h3>

<p>Hansen, B.B. and Klopfer, S.O. (2006) Optimal full matching and related designs via network flows,
JCGS 15 609-627.
</p>
<p>Karmakar, B., Small, D. S. and Rosenbaum, P. R. (2019) Using Approximation Algorithms to Build 
Evidence Factors and Related Designs for Observational Studies, Journal of Computational 
and Graphical Statistics, 28, 698-709.
</p>


<h3>See Also</h3>

<p><code>tripletmatching</code>, <code>kwaymatching</code>
</p>


</div>