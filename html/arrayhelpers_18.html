<div class="container">

<table style="width: 100%;"><tr>
<td>makeNd</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Ensure/collapse an array into <code>n</code> dimensions and restore the old dimensions</h2>

<h3>Description</h3>

<p><code>nameNd</code> ensures a given number of dimensions:
If <code>a</code> has less than <code>N</code> dimensions, new dimensions of length 1 are appended.
If <code>a</code> has more than <code>N</code> dimensions, the supernumerary dimensions are collapsed onto
the last dimension.
</p>
<p>Attributes <code>old.dim</code> and <code>old.dimnames</code> are used by default. <code>restoredim</code> is the
inverse of <code>makeNd</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">makeNd(a, N)

restoredim(
  a,
  old = NULL,
  n = 1L,
  ...,
  usedim = TRUE,
  fromend = FALSE,
  drop = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>an array (matrix, vector)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>the desired number of dimensions, 0 to remove the <code>dim</code> and <code>dimnames</code>
attributes (i.e. to create a vector).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>old</code></td>
<td>
<p>list containing a list with (possibly) elements <code>dim</code>, <code>dimnames</code>, and
<code>names</code>. The nth last element of this list is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>how many makeNdim steps to go back?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>usedim</code></td>
<td>
<p>use only the specified dimensions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fromend</code></td>
<td>
<p>if <code>TRUE</code>, numeric <code>usedim</code> are counted from the end, see details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>
<p>should 1d arrays drop to vectors?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that missing attributes as well as <code>old.dim = NULL</code> produce a (dimensionless)
vector. This is also the case if <code>a</code> lost the <code>old.*</code> attributes during 
computations like <code>as.numeric</code>, <code>c</code>, etc..
</p>
<p><code>fromend</code> together with numeric <code>usedim</code> specifies dimensions counting from the
end. E.g. <code>fromend = TRUE</code> and <code>usedim = 1 : 3</code> for an array to be restored to 10d
means restoring dimensions 8 : 10. <code>fromend = TRUE</code> and <code>usedim = -(1 : 3)</code> restores
dimensions 1 to 7.
</p>


<h3>Value</h3>

<p>N-dimensional array
</p>
<p>an array
</p>


<h3>Author(s)</h3>

<p>Claudia Beleites
</p>
<p>Claudia Beleites
</p>


<h3>Examples</h3>

<pre><code class="language-R">v &lt;- arrayhelpers:::v
v
makeNd (v, 1)
dim (makeNd (v, 1))
dim (makeNd (v, 3))

m &lt;- arrayhelpers:::m
m
makeNd (m, 1)
dim (makeNd (m, 1))
makeNd (m, 0) 
dim (makeNd (m, 0))
makeNd (m, 3)

a &lt;- arrayhelpers:::a
a
dim (makeNd (a, 1))
dim (makeNd (a, 0))
makeNd (a,  2)          
makeNd (a, -2)
makeNd (a, -4)
makeNd (a, 3);


a &lt;- array (1 : 24, 4 : 3)
a
restoredim (makeNd (a, 0))

x &lt;- makeNd (a, 0)
attr (x, "old")

</code></pre>


</div>