<div class="container">

<table style="width: 100%;"><tr>
<td>itemMatrix-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Class itemMatrix â€” Sparse Binary Incidence Matrix to Represent Sets of
Items</h2>

<h3>Description</h3>

<p>The <code>itemMatrix</code> class is the basic building block for transactions,
and associations.  The class contains a sparse
Matrix representation of a set of itemsets and the
corresponding item labels.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'itemMatrix'
summary(object, maxsum = 6, ...)

## S4 method for signature 'itemMatrix'
dim(x)

nitems(x, ...)

## S4 method for signature 'itemMatrix'
nitems(x)

## S4 method for signature 'itemMatrix'
length(x)

toLongFormat(from, ...)

## S4 method for signature 'itemMatrix'
toLongFormat(from, cols = c("ID", "item"), decode = TRUE)

## S4 method for signature 'itemMatrix'
labels(object, itemSep = ",", setStart = "{", setEnd = "}")

itemLabels(object, ...)

itemLabels(object) &lt;- value

## S4 method for signature 'itemMatrix'
itemLabels(object)

## S4 replacement method for signature 'itemMatrix'
itemLabels(object) &lt;- value

itemInfo(object)

itemInfo(object) &lt;- value

## S4 method for signature 'itemMatrix'
itemInfo(object)

## S4 replacement method for signature 'itemMatrix'
itemInfo(object) &lt;- value

itemsetInfo(object)

itemsetInfo(object) &lt;- value

## S4 method for signature 'itemMatrix'
itemsetInfo(object)

## S4 replacement method for signature 'itemMatrix'
itemsetInfo(object) &lt;- value

## S4 method for signature 'itemMatrix'
dimnames(x)

## S4 replacement method for signature 'itemMatrix,list'
dimnames(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object, x, from</code></td>
<td>
<p>the object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxsum</code></td>
<td>
<p>integer, how many items should be shown for the summary?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols</code></td>
<td>
<p>columns for the long format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decode</code></td>
<td>
<p>decode item IDs to item labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>itemSep</code></td>
<td>
<p>item separator symbol.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>setStart</code></td>
<td>
<p>set start symbol.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>setEnd</code></td>
<td>
<p>set end symbol.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>replacement value</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>Representation</strong>
</p>
<p>Sets of itemsets are represented as a compressed sparse
binary matrix. Conceptually, columns represent items and rows are the sets/transactions.
In the compressed form, each itemset is a vector of column indices (called item
IDs) representing the items.
</p>
<p><strong>Warning:</strong> Ideally, we would store the matrix as a row-oriented sparse
matrix (<code>ngRMatrix</code>), but the <span class="pkg">Matrix</span> package provides better support for
column-oriented sparse classes (Matrix::ngCMatrix). The matrix is therefore internally stored
in transposed form.
</p>
<p><strong>Working with several <code>itemMatrix</code> objects</strong>
</p>
<p>If you work with several <code>itemMatrix</code> objects at the same time (e.g.,
several transaction sets, lhs and rhs of a rule, etc.), then the encoding
(itemLabes and order of the items in the binary matrix) in the different
itemMatrices is important and needs to conform. See itemCoding
to learn how to encode and recode <code>itemMatrix</code> objects.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>summary(itemMatrix)</code>: show a summary.
</p>
</li>
<li> <p><code>dim(itemMatrix)</code>: returns the number of rows
(itemsets) and columns (items in the encoding).
</p>
</li>
<li> <p><code>nitems(itemMatrix)</code>: returns the number of items in the encoding.
</p>
</li>
<li> <p><code>length(itemMatrix)</code>: returns the number of itemsets (rows) in the matrix.
</p>
</li>
<li> <p><code>toLongFormat(itemMatrix)</code>: convert the sets to long format
(a data.frame with two columns, ID and item). Column names
can be specified as a character vector of length 2 called <code>cols</code>.
</p>
</li>
<li> <p><code>labels(itemMatrix)</code>: returns labels for the itemsets.
The following arguments can be used to customize the representation
of the labels: <code>itemSep</code>, <code>setStart</code> and <code>setEnd</code>.
</p>
</li>
<li> <p><code>itemLabels(itemMatrix)</code>: returns the item labels used for encoding as a character vector.
</p>
</li>
<li> <p><code>itemLabels(itemMatrix) &lt;- value</code>: replaces the item labels used for encoding.
</p>
</li>
<li> <p><code>itemInfo(itemMatrix)</code>: returns the whole item/column information data.frame including labels.
</p>
</li>
<li> <p><code>itemInfo(itemMatrix) &lt;- value</code>: replaces the item/column info by a data.frame.
</p>
</li>
<li> <p><code>itemsetInfo(itemMatrix)</code>: returns the item set/row information data.frame.
</p>
</li>
<li> <p><code>itemsetInfo(itemMatrix) &lt;- value</code>: replaces the item set/row info by a data.frame.
</p>
</li>
<li> <p><code>dimnames(itemMatrix)</code>: returns a list with the dimname vectors.
</p>
</li>
<li> <p><code>dimnames(x = itemMatrix) &lt;- value</code>: replace the dimnames.
</p>
</li>
</ul>
<h3>Slots</h3>


<dl>
<dt><code>data</code></dt>
<dd>
<p>a sparse matrix of class Matrix::ngCMatrix representing the itemsets.
<strong>Warning:</strong> the matrix is stored in transposed form for efficiency reasons!.</p>
</dd>
<dt><code>itemInfo</code></dt>
<dd>
<p>a data.frame</p>
</dd>
<dt><code>itemsetInfo</code></dt>
<dd>
<p>a data.frame</p>
</dd>
</dl>
<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form
<code>new("itemMatrix", ...)</code>.  However, most of the time objects will be
created by coercion from a matrix, list or data.frame.
</p>


<h3>Coercions</h3>


<ul>
<li> <p><code>as("matrix", "itemMatrix")</code>
</p>
</li>
<li> <p><code>as("itemMatrix", "matrix")</code>
</p>
</li>
<li> <p><code>as("list", "itemMatrix")</code>
</p>
</li>
<li> <p><code>as("itemMatrix", "list")</code>
</p>
</li>
<li> <p><code>as("itemMatrix", "ngCMatrix")</code>
</p>
</li>
<li> <p><code>as("ngCMatrix", "itemMatrix")</code>
</p>
</li>
</ul>
<p><strong>Warning:</strong> the <code>ngCMatrix</code> representation is transposed!
</p>


<h3>Author(s)</h3>

<p>Michael Hahsler
</p>


<h3>See Also</h3>

<p>Other itemMatrix and transactions functions: 
<code>abbreviate()</code>,
<code>c()</code>,
<code>crossTable()</code>,
<code>duplicated()</code>,
<code>extract</code>,
<code>hierarchy</code>,
<code>image()</code>,
<code>inspect()</code>,
<code>is.superset()</code>,
<code>itemFrequency()</code>,
<code>itemFrequencyPlot()</code>,
<code>match()</code>,
<code>merge()</code>,
<code>random.transactions()</code>,
<code>sample()</code>,
<code>sets</code>,
<code>size()</code>,
<code>supportingTransactions()</code>,
<code>tidLists-class</code>,
<code>transactions-class</code>,
<code>unique()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(1234)

## Generate a logical matrix with 5000 random itemsets for 20 items
m &lt;- matrix(runif(5000 * 20) &gt; 0.8, ncol = 20,
            dimnames = list(NULL, paste("item", c(1:20), sep = "")))
head(m)

## Coerce the logical matrix into an itemMatrix object
imatrix &lt;- as(m, "itemMatrix")
imatrix

## An itemMatrix contains a set of itemsets (each row is an itemset).
## The length of the set is the number of rows.
length(imatrix)

## The sparese matrix also has regular matrix  dimensions.
dim(imatrix)
nrow(imatrix)
ncol(imatrix)

## Subsetting: Get first 5 elements (rows) of the itemMatrix. This can be done in
## several ways.
imatrix[1:5]            ### get elements 1:5
imatrix[1:5, ]          ### Matrix subsetting for rows 1:5
head(imatrix, n = 5)    ### head()

## Get first 5 elements (rows) of the itemMatrix as list.
as(imatrix[1:5], "list")

## Get first 5 elements (rows) of the itemMatrix as matrix.
as(imatrix[1:5], "matrix")

## Get first 5 elements (rows) of the itemMatrix as sparse ngCMatrix.
## **Warning:** For efficiency reasons, the ngCMatrix is transposed! You
## can transpose it again to get the expected format.
as(imatrix[1:5], "ngCMatrix")
t(as(imatrix[1:5], "ngCMatrix"))

## Get labels for the first 5 itemsets (first default and then with
## custom formating)
labels(imatrix[1:5])
labels(imatrix[1:5], itemSep = " + ", setStart = "", setEnd = "")

## Create itemsets manually from an itemMatrix. Itemsets contain items in the form of
## an itemMatrix and additional quality measures (not supplied in the example).
is &lt;- new("itemsets", items = imatrix)
is
inspect(head(is, n = 3))


## Create rules manually. I use imatrix[4:6] for the lhs of the rules and
## imatrix[1:3] for the rhs. Rhs and lhs cannot share items so I use
## itemSetdiff here. I also assign missing values for the quality measures support
## and confidence.
rules &lt;- new("rules",
             lhs = itemSetdiff(imatrix[4:6], imatrix[1:3]),
             rhs = imatrix[1:3],
             quality = data.frame(support = c(NA, NA, NA),
                                  confidence =  c(NA, NA, NA)
          ))
rules
inspect(rules)

## Manually create a itemMatrix with an item encoding that matches imatrix (20 items in order
## item1, item2, ..., item20)
itemset_list &lt;- list(c("item1","item2"),
                     c("item3"))

imatrix_new &lt;- encode(itemset_list, itemLabels = imatrix)
imatrix_new
compatible(imatrix_new, imatrix)

</code></pre>


</div>