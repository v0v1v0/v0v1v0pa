<div class="container">

<table style="width: 100%;"><tr>
<td>add_item</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Publish Content</h2>

<h3>Description</h3>

<p>Publishes an <code>sf</code> or <code>data.frame</code> object to an ArcGIS Portal as a
FeatureCollection.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_item(
  x,
  title,
  description = "",
  tags = character(0),
  snippet = "",
  categories = character(0),
  async = FALSE,
  type = "Feature Service",
  token = arc_token()
)

publish_item(
  item_id,
  publish_params = .publish_params(),
  file_type = "featureCollection",
  token = arc_token()
)

publish_layer(
  x,
  title,
  ...,
  publish_params = .publish_params(title, target_crs = sf::st_crs(x)),
  token = arc_token()
)

.publish_params(
  name = NULL,
  description = NULL,
  copyright = NULL,
  target_crs = 3857,
  max_record_count = 2000L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class <code>data.frame</code>. This can be an <code>sf</code> object or <code>tibble</code> or
any other subclass of <code>data.frame</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>A user-friendly string title for the layer that can be used in
a table of contents.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>description</code></td>
<td>
<p>a length 1 character vector containing the description of
the item that is being added. Note that the value cannot be larger than 64kb.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tags</code></td>
<td>
<p>a character vector of tags to add to the item.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>snippet</code></td>
<td>
<p>a length 1 character vector with no more than 2048 characters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>categories</code></td>
<td>
<p>a character vector of the categories of the item.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>async</code></td>
<td>
<p>default <code>FALSE</code>. Cannot be changed at this time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>default <code>"Feature Service"</code>. Must not be changed at this time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token</code></td>
<td>
<p>an <code>httr2_token</code> as created by <code>auth_code()</code> or similar</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>item_id</code></td>
<td>
<p>the ID of the item to be published.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>publish_params</code></td>
<td>
<p>a list of named values of the <code>publishParameters</code>. Must match
the values in the <a href="https://developers.arcgis.com/rest/users-groups-and-items/publish-item.htm#GUID-9E8F8526-5D58-4706-95F3-432905CC3303">/publish endpoint documentation</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file_type</code></td>
<td>
<p>default <code>"featureCollection"</code>. Cannot be changed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed into <code>add_item()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>a scalar character of the name of the layer. Must be unique.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>copyright</code></td>
<td>
<p>an optional character scalar containing copyright text to
add to the published Feature Service.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target_crs</code></td>
<td>
<p>the CRS of the Feature Service to be created. By default,
<code>EPSG:3857</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_record_count</code></td>
<td>
<p>the maximum number of records that can be returned
from the created Feature Service.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
</p>

<ul>
<li> <p><code>add_item()</code> takes a data.frame like object and uploads it as an item in
your portal.
</p>
</li>
<li> <p><code>publish_item()</code> takes an ID of an item in your portal and publishes it
as a feature service.
</p>
</li>
<li> <p><code>publish_layer()</code> is a high-level wrapper that first adds an object as
an item in your portal and subsequently publishes it for you.
</p>
</li>
<li> <p><code>.publish_params()</code> is a utility function to specify optional publish
parameters such as copyright text, and the spatial reference of the
published feature collection.
</p>
</li>
</ul>
<p>Note that there is <em>only</em> support for feature services meaning that only
tables and feature layers can be made by these functions.
</p>


<h4>Publish Parameters</h4>

<p>When publishing an item to a portal, a number of <a href="https://developers.arcgis.com/rest/users-groups-and-items/publish-item.htm#GUID-9E8F8526-5D58-4706-95F3-432905CC3303">publish parameters</a> can be provided. Most importantly is the <code>targetSR</code> which will be
the CRS of the hosted feature service. By default this is <code>EPSG:3857</code>.
</p>
<p><code>publish_layer()</code> will use the CRS of the input object, <code>x</code>, by default. If
publishing content in two steps with <code>add_item()</code> and <code>publish_item()</code>, use
<code>.publish_params()</code> to craft your publish parameters. Ensure that the CRS
provided to <code>target_crs</code> matches that of the item you added with
<code>add_item()</code>.
</p>



<h3>Value</h3>

<p>A named list containing the url of the newly published service.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
  nc &lt;- sf::st_read(system.file("shape/nc.shp", package = "sf"))
  x &lt;- nc[1:5, 13]

  token &lt;- auth_code()
  set_arc_token(token)

  publish_res &lt;- publish_layer(
    x, "North Carolina SIDS sample"
  )

## End(Not run)
</code></pre>


</div>