<div class="container">

<table style="width: 100%;"><tr>
<td>pk_build</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a NONMEM PK(PD) dataset</h2>

<h3>Description</h3>

<p>Input a pre-processed ex and pc domain for combination into a NONMEM dataset.
Additional pd endpoints, subject-level covariates, and time-varying covariates can also be added.
Other parameters can customize some calculations and formatting.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pk_build(
  ex,
  pc = NA,
  pd = NA,
  sl.cov = NA,
  tv.cov = NA,
  time.units = "days",
  cycle.length = NA,
  na = -999,
  time.rnd = NULL,
  amt.rnd = NULL,
  dv.rnd = NULL,
  cov.rnd = NULL,
  impute = NA,
  BDV = FALSE,
  DDV = FALSE,
  PDV = FALSE,
  sparse = 3,
  demo.map = TRUE,
  tv.cov.fill = "downup",
  keep.other = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ex</code></td>
<td>
<p>dose event dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pc</code></td>
<td>
<p>pc event dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pd</code></td>
<td>
<p>pd event dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sl.cov</code></td>
<td>
<p>subject-level covariate dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tv.cov</code></td>
<td>
<p>time-varying covariate dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.units</code></td>
<td>
<p>units for time attributes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cycle.length</code></td>
<td>
<p>cycle length in units of days</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na</code></td>
<td>
<p>value for missing numeric items</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.rnd</code></td>
<td>
<p>time attribute rounding parameter</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>amt.rnd</code></td>
<td>
<p>amount attribute rounding parameter</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dv.rnd</code></td>
<td>
<p>dependent variable attribute rounding parameter</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cov.rnd</code></td>
<td>
<p>covariate attribute rounding parameter</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>impute</code></td>
<td>
<p>imputation method</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>BDV</code></td>
<td>
<p>baseline pd attribute</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DDV</code></td>
<td>
<p>change from baseline pd attribute</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PDV</code></td>
<td>
<p>percent change from baseline pd attribute</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sparse</code></td>
<td>
<p>threshold for sparse sampling</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>demo.map</code></td>
<td>
<p>toggle pre-set numeric values for SEX, RACE, and ETHNIC demographic variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tv.cov.fill</code></td>
<td>
<p>time-varying covariate fill direction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep.other</code></td>
<td>
<p>filter to keep or remove other events, EVID = 2</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>PK(PD) dataset
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Simple ex domain with 1 subject and 1 dose
ex &lt;- data.frame(STUDYID = "ABC101",
                 USUBJID = "ABC101-001",
                 EXSTDTC = "2000-01-01 10:00:00",
                 EXSTDY = 1,
                 EXTPTNUM = 0,
                 EXDOSE = 100,
                 CMT = 1,
                 EXTRT = "ABC",
                 EXDOSU = "mg",
                 VISIT = "Day 1",
                 EXTPT = "Dose",
                 EXDOSFRQ = "Once",
                 EXROUTE = "Oral")

## Simple pc domain with 1 subject and 3 observations
pc &lt;- data.frame(USUBJID = "ABC101-001",
                 PCDTC = c("2000-01-01 09:40:00",
                           "2000-01-01 10:29:00",
                           "2000-01-01 12:05:00"),
                 PCDY = 1,
                 PCTPTNUM = c(0, ##Units of hours
                              0.021,
                              0.083),
                 PCSTRESN = c(NA,
                              469,
                              870),
                 PCLLOQ = 25,
                 CMT = 2,
                 VISIT = "Day 1",
                 PCTPT = c("Pre-dose",
                           "30-min post-dose",
                           "2-hr post-dose"),
                 PCTEST = "ABC",
                 PCSTRESU = "ug/mL")

## Create with pk_build()
df &lt;- pk_build(ex, pc)

</code></pre>


</div>