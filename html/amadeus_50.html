<div class="container">

<table style="width: 100%;"><tr>
<td>download_nei</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download road emissions data</h2>

<h3>Description</h3>

<p>The <code>download_nei()</code> function accesses and downloads road emissions data from the <a href="https://www.epa.gov/air-emissions-inventories/national-emissions-inventory-nei">U.S Environmental Protection Agency's (EPA) National Emissions Inventory (NEI)</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">download_nei(
  epa_certificate_path = system.file("extdata/cacert_gaftp_epa.pem", package = "amadeus"),
  certificate_url =
    "http://cacerts.digicert.com/DigiCertGlobalG2TLSRSASHA2562020CA1-1.crt",
  year = c(2017L, 2020L),
  directory_to_save = NULL,
  acknowledgement = FALSE,
  download = FALSE,
  remove_command = FALSE,
  unzip = TRUE,
  hash = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>epa_certificate_path</code></td>
<td>
<p>character(1). Path to the certificate file
for EPA DataCommons. Default is
'extdata/cacert_gaftp_epa.pem' under the package installation path.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>certificate_url</code></td>
<td>
<p>character(1). URL to certificate file. See notes for
details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>Available years of NEI data.
Default is <code>c(2017L, 2020L)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>directory_to_save</code></td>
<td>
<p>character(1). Directory to save data. Two
sub-directories will be created for the downloaded zip files ("/zip_files")
and the unzipped data files ("/data_files").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acknowledgement</code></td>
<td>
<p>logical(1). By setting <code>TRUE</code> the
user acknowledges that the data downloaded using this function may be very
large and use lots of machine storage and memory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>download</code></td>
<td>
<p>logical(1). <code>FALSE</code> will generate a *.txt file
containing all download commands. By setting <code>TRUE</code> the function
will download all of the requested data files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_command</code></td>
<td>
<p>logical(1).
Remove (<code>TRUE</code>) or keep (<code>FALSE</code>)
the text file containing download commands.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unzip</code></td>
<td>
<p>logical(1). Unzip the downloaded zip files.
Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hash</code></td>
<td>
<p>logical(1). By setting <code>TRUE</code> the function will return
an <code>rlang::hash_file()</code> hash character corresponding to the
downloaded files. Default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>


<ul>
<li>
<p> For <code>hash = FALSE</code>, NULL
</p>
</li>
<li>
<p> For <code>hash = TRUE</code>, an <code>rlang::hash_file</code> character.
</p>
</li>
<li>
<p> Zip and/or data files will be downloaded and stored in
respective sub-directories within <code>directory_to_save</code>.
</p>
</li>
</ul>
<h3>Note</h3>

<p>For EPA Data Commons certificate errors, follow the steps below:
</p>

<ol>
<li>
<p> Click Lock icon in the address bar at https://gaftp.epa.gov
</p>
</li>
<li>
<p> Click Show Certificate
</p>
</li>
<li>
<p> Access Details
</p>
</li>
<li>
<p> Find URL with *.crt extension
Currently we bundle the pre-downloaded crt and its PEM (which is accepted
in wget command) file in ./inst/extdata. The instruction above is for
certificate updates in the future.
</p>
</li>
</ol>
<h3>Author(s)</h3>

<p>Ranadeep Daw, Insang Song
</p>


<h3>References</h3>

<p>United States Environmental Protection Agency (2024).
“Air Emissions Inventories.”
<a href="https://www.epa.gov/air-emissions-inventories">https://www.epa.gov/air-emissions-inventories</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">download_nei(
  year = c(2017L, 2020L),
  directory_to_save = tempdir(),
  acknowledgement = TRUE,
  download = FALSE, # NOTE: download skipped for examples,
  remove_command = TRUE,
  unzip = FALSE
)
</code></pre>


</div>