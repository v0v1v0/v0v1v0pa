<div class="container">

<table style="width: 100%;"><tr>
<td>theil_t</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Theil T Index</h2>

<h3>Description</h3>

<p>Calculates the Theil T Index of a given accessibility distribution. Values
range from 0 (when all individuals have exactly the same accessibility
levels) to the natural log of <em>n</em>, in which <em>n</em> is the number of individuals
in the accessibility dataset. If the individuals can be classified into
mutually exclusive and completely exhaustive groups, the index can be
decomposed into a between-groups inequaliy component and a within-groups
component.
</p>


<h3>Usage</h3>

<pre><code class="language-R">theil_t(
  accessibility_data,
  sociodemographic_data,
  opportunity,
  population,
  socioeconomic_groups = NULL,
  group_by = character(0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>accessibility_data</code></td>
<td>
<p>A data frame. The accessibility levels whose
inequality should be calculated. Must contain the columns <code>id</code> and any
others specified in <code>opportunity</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sociodemographic_data</code></td>
<td>
<p>A data frame. The distribution of
sociodemographic characteristics of the population in the study area cells.
Must contain the columns <code>id</code> and any others specified in <code>population</code> and
<code>socioeconomic_groups</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opportunity</code></td>
<td>
<p>A string. The name of the column in <code>accessibility_data</code>
with the accessibility levels to be considerend when calculating inequality
levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>population</code></td>
<td>
<p>A string. The name of the column in <code>sociodemographic_data</code>
with the number of people in each cell. Used to weigh accessibility levels
when calculating inequality.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>socioeconomic_groups</code></td>
<td>
<p>A string. The name of the column in
<code>sociodemographic_data</code> whose values identify the socioeconomic groups that
should be used to calculate the between- and within-groups inequality
levels. If <code>NULL</code> (the default), between- and within-groups components are
not calculated and only the total aggregate inequality is returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_by</code></td>
<td>
<p>A <code>character</code> vector. When not <code>character(0)</code> (the default),
indicates the <code>accessibility_data</code> columns that should be used to group the
inequality estimates by. For example, if <code>accessibility_data</code> includes a
<code>scenario</code> column that identifies distinct scenarios that each
accessibility estimates refer to (e.g. before and after a transport policy
intervention), passing <code>"scenario"</code> to this parameter results in inequality
estimates grouped by scenario.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>socioeconomic_groups</code> is <code>NULL</code>, a data frame containing the
total Theil T estimates for the study area. If not, a list containing three
dataframes: one summarizing the total inequality and the between- and
within-groups components, one listing the contribution of each group to the
between-groups component and another listing the contribution of each group
to the within-groups component.
</p>


<h3>See Also</h3>

<p>Other inequality: 
<code>concentration_index()</code>,
<code>gini_index()</code>,
<code>palma_ratio()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data_dir &lt;- system.file("extdata", package = "accessibility")
travel_matrix &lt;- readRDS(file.path(data_dir, "travel_matrix.rds"))
land_use_data &lt;- readRDS(file.path(data_dir, "land_use_data.rds"))

access &lt;- cumulative_cutoff(
  travel_matrix,
  land_use_data,
  cutoff = 30,
  opportunity = "jobs",
  travel_cost = "travel_time"
)

ti &lt;- theil_t(
  access,
  sociodemographic_data = land_use_data,
  opportunity = "jobs",
  population = "population"
)
ti

# to calculate inequality between and within income deciles, we pass
# "income_decile" to socioeconomic_groups.
# some cells, however, are classified as in the decile NA because their
# income per capita is NaN, as they don't have any population. we filter
# these cells from our accessibility data, otherwise the output would include
# NA values (note that subsetting the data like this doesn't affect the
# assumption that groups are completely exhaustive, because cells with NA
# income decile don't have any population)

na_decile_ids &lt;- land_use_data[is.na(land_use_data$income_decile), ]$id
access &lt;- access[! access$id %in% na_decile_ids, ]
sociodem_data &lt;- land_use_data[! land_use_data$id %in% na_decile_ids, ]

ti &lt;- theil_t(
  access,
  sociodemographic_data = sociodem_data,
  opportunity = "jobs",
  population = "population",
  socioeconomic_groups = "income_decile"
)
ti

</code></pre>


</div>