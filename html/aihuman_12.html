<div class="container">

<table style="width: 100%;"><tr>
<td>CalAPCEparallel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate APCE using parallel computing</h2>

<h3>Description</h3>

<p>Calculate average principal causal effects (APCE) with ordinal decision using parallel computing. See Section 3.4 for more details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CalAPCEparallel(
  data,
  mcmc.re,
  subgroup,
  name.group = c("overall", "Sex0", "Sex1", "Sex1 White0", "Sex1 White1"),
  rho = 0,
  burnin = 0,
  out.length = 500,
  c0 = 0,
  c1 = 0,
  ZX = NULL,
  save.individual.optimal.decision = FALSE,
  optimal.decision.only = FALSE,
  dmf = NULL,
  fair.dmf.only = FALSE,
  size = 5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as "Z", "D", and "Y" respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mcmc.re</code></td>
<td>
<p>A <code>mcmc</code> object generated by <code>AiEvalmcmc()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subgroup</code></td>
<td>
<p>A list of numeric vectors for the index of each of the five subgroups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name.group</code></td>
<td>
<p>A list of character vectors for the label of five subgroups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>A sensitivity parameter. The default is  <code>0</code> which implies the unconfoundedness assumption (Assumption 4).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>burnin</code></td>
<td>
<p>A proportion of burnin for the Markov chain. The default is <code>0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.length</code></td>
<td>
<p>An integer to specify the progress on the screen. Every <code>out.length</code>-th iteration is printed on the screen. The default is <code>500</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c0</code></td>
<td>
<p>The cost of an outcome. See Section 3.7 for more details. The default is <code>0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c1</code></td>
<td>
<p>The cost of an unnecessarily harsh decision. See Section 3.7 for more details. The default is <code>0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ZX</code></td>
<td>
<p>The data matrix for interaction terms. The default is the interaction between Z and all of the pre-treatment covariates (X).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save.individual.optimal.decision</code></td>
<td>
<p>A logical argument specified to save individual optimal decision rules. The default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimal.decision.only</code></td>
<td>
<p>A logical argument specified to compute only the optimal decision rule. The default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dmf</code></td>
<td>
<p>A numeric vector of binary DMF recommendations. If <code>null</code>, use judge's decisions (0 if the decision is 0 and 1 o.w; e.g., signature or cash bond).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fair.dmf.only</code></td>
<td>
<p>A logical argument specified to compute only the fairness of given DMF recommendations. The default is <code>FALSE</code>. Not used in the analysis for the JRSSA paper.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>The number of parallel computing. The default is <code>5</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>list</code> with the following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>P.D1.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for quantity P(D(1)=d| R=r), dimension 1 is each posterior sample; dimension 2 is subgroup, dimension 3 is (k+1) values of D from 0 to k, dimension 4 is (k+2) values of R from 0 to k+1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>P.D0.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for quantity P(D(0)=d| R=r).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>APCE.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for quantity P(D(1)=d| R=r)-P(D(0)=d| R=r).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>P.R.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+2) for quantity P(R=r) for r from 0 to (k+1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Optimal.Z.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 for the proportion of the cases where treatment (PSA provided) is optimal.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Optimal.D.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) for the proportion of optimal decision rule.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>P.DMF.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for the proportion of binary DMF recommendations. Not used in the analysis for the JRSSA paper.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Utility.g_d.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n for the individual utility of judge's decisions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Utility.g_dmf.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n for the individual utility of DMF recommendation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Utility.diff.control.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n.mcmc for estimated difference in utility between judge's decisions and DMF recommendation among control group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Utility.diff.treated.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n.mcmc for estimated difference in utility between judge's decisions and DMF recommendation among treated group.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
data(synth)
sample_mcmc = AiEvalmcmc(data = synth, n.mcmc = 10)
subgroup_synth = list(1:nrow(synth),which(synth$Sex==0),which(synth$Sex==1),
                      which(synth$Sex==1&amp;synth$White==0),which(synth$Sex==1&amp;synth$White==1))
sample_apce = CalAPCEparallel(data = synth, mcmc.re = sample_mcmc, 
                              subgroup = subgroup_synth, 
                              size = 1) # adjust the size


</code></pre>


</div>