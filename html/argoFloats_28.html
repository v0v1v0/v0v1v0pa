<div class="container">

<table style="width: 100%;"><tr>
<td>mapApp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Interactive App For Viewing Argo Float Positions</h2>

<h3>Description</h3>

<p><code>mapApp()</code> sets up an interactive "shiny app" session for exploring
the spatial-temporal distribution of Argo profiles.  The graphical
user interface (GUI) is meant to be reasonably self-explanatory,
and a button labelled Help yields a pop-up window with
more information that might not be evident at first glance.
A number of keystrokes exist to assist the user including: <br><strong>u</strong>: undo previous actions <br><strong>i</strong>: zoom in <br><strong>o</strong>: zoom out <br><strong>n</strong>: go north <br><strong>e</strong>: go east <br><strong>s</strong>: go south <br><strong>w</strong>: go west <br><strong>f</strong>: go forward in time <br><strong>b</strong>: go backward in time <br><strong>r</strong>: reset to initial state <br><strong>h</strong>: hold active hover message (press h again to undo) <br><strong>0</strong>: unzoom an area <br><strong>d</strong>: toggle debugging flag <br>
More details are provided in the rest of this documentation
page, and in Section 4 of Kelley et al. (2021).
</p>


<h3>Usage</h3>

<pre><code class="language-R">mapApp(
  age = argoDefaultIndexAge(),
  server = argoDefaultServer(),
  destdir = argoDefaultDestdir(),
  colLand = "lightgray",
  debug = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>age</code></td>
<td>
<p>numeric value indicating how old a downloaded file
must be (in days), for it to be considered out-of-date.  The
default, <code>argoDefaultIndexAge()</code>, limits downloads to once per day, as a way
to avoid slowing down a workflow with a download that might take
a minute or so. Note that setting <code>age=0</code> will force a new
download, regardless of the age of the local file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>server</code></td>
<td>
<p>character value, or vector of character values, indicating the name of
servers that supply argo data to be acquired with <code>getIndex()</code>.  If not supplied,
the default will be determined with <code>argoDefaultServer()</code>, which uses
a value set by <code>options("argoFloats.server"=URL)</code>
where <code>URL</code> is an appropriate URL, or <code>"ifremer-https"</code> if no such option was
set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>destdir</code></td>
<td>
<p>character value indicating the directory in which to store
downloaded files. The default value is to compute this using
<code>argoDefaultDestdir()</code>, which returns <code style="white-space: pre;">⁠~/data/argo⁠</code> by default,
although it also provides ways to set other values using
<code>options()</code>.
Set <code>destdir=NULL</code>
if <code>destfile</code> is a filename with full path information.
File clutter is reduced by creating a top-level directory called
<code>data</code>, with subdirectories for various file types; see
“Examples”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colLand</code></td>
<td>
<p>a colour specification for the land.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>debug</code></td>
<td>
<p>integer value that controls how much information <code>mapApp()</code> prints
to the console as it works.  The default value of 0 leads to a fairly limited
amount of printing, while higher values lead to more information. This information
can be helpful in diagnosing problems or bottlenecks.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>mapApp()</code> uses <code>getIndex()</code> to download index files from an Argo server
the first time it runs.  This can be slow, taking a minute or more, depending
on the internet connection and load on the server.  Once the index
files are downloaded, <code>mapApp()</code> categorizes profiles as Core,
BGC, or Deep (which may be displayed in any combination, using
GUI elements).
</p>
<p>The <code>hi-res</code> button will only affect the coastline, not the topography,
unless there is a local file named <code>topoWorldFine.rda</code> that contains
an alternative topographic information. Here is how to create such a file:
</p>
<div class="sourceCode R"><pre>library(oce)
topoFile &lt;- download.topo(west=-180, east=180,
                          south=-90, north=90,
                          resolution=10,
                          format="netcdf", destdir=".")
topoWorldFine &lt;- read.topo(topoFile)
save(topoWorldFine, file="topoWorldFine.rda")
unlink(topoFile) # clean up
</pre></div>


<h3>Value</h3>

<p><code>mapApp</code> has no return value, since it creates a shiny app by passing
control to <code>shiny::runApp()</code>, which never returns.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley and Jaimie Harbin
</p>


<h3>References</h3>

<p>Kelley, D. E., Harbin, J., &amp; Richards, C. (2021).
argoFloats: An R package for analyzing Argo data.
Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
    library(argoFloats)
    mapApp()
}

</code></pre>


</div>