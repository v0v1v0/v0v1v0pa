<div class="container">

<table style="width: 100%;"><tr>
<td>monitor_collapse</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Collapse an <code>mts_monitor</code> object into a single time series</h2>

<h3>Description</h3>

<p>Collapses data from all time series in a <code>mts_monitor</code> into a
single-time series <em>mts_monitor</em> object using the function provided in the
<code>FUN</code> argument. The single-time series result will be located at the mean
longitude and latitude unless <code>longitude</code> and <code>latitude</code>
parameters are specified.
</p>
<p>Any columns of <code>monitor$meta</code> that are constant across all records will
be retained in the returned <em>mts_monitor</em> <code>meta</code> dataframe.
</p>
<p>The core metadata associated with this location (<em>e.g.</em>
<code>countryCode, stateCode, timezone, ...</code>) will be determined from
the most common (or average) value found in <code>monitor$meta</code>. This will be
a reasonable assumption for the vast majority of intended use cases where
data from multiple instruments in close proximity are averaged together.
</p>


<h3>Usage</h3>

<pre><code class="language-R">monitor_collapse(
  monitor,
  longitude = NULL,
  latitude = NULL,
  deviceID = "generatedID",
  FUN = mean,
  na.rm = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>monitor</code></td>
<td>
<p><em>mts_monitor</em> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>longitude</code></td>
<td>
<p>Longitude of the collapsed time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latitude</code></td>
<td>
<p>Latitude of the collapsed time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deviceID</code></td>
<td>
<p>Device identifier for the collapsed time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>Function used to collapse multiple time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Logical specifying whether NA values should be ignored when FUN
is applied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to be passed on to the <code>apply()</code> function.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <em>mts_monitor</em> object representing a single time series. (A list with
<code>meta</code> and <code>data</code> dataframes.)
</p>


<h3>Note</h3>

<p>After <code>FUN</code> is applied, values of <code>+/-Inf</code> and <code>NaN</code> are
converted to <code>NA</code>. This is a convenience for the common case where
<code>FUN = min/max</code> or <code>FUN = mean</code> and some of the time steps have all
missing values. See the R documentation for <code>min</code> for an explanation.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(AirMonitor)

# Lane County, Oregon AQSIDs all begin with "41039"
LaneCounty &lt;-
  NW_Megafires %&gt;%
  monitor_filter(stringr::str_detect(AQSID, '^41039')) %&gt;%
  monitor_filterDate(20150821, 20150828)

# Get min/max for all monitors
LaneCounty_min &lt;- monitor_collapse(LaneCounty, deviceID = 'LaneCounty_min', FUN = min)
LaneCounty_max &lt;- monitor_collapse(LaneCounty, deviceID = 'LaneCounty_max', FUN = max)

# Create plot
monitor_timeseriesPlot(
  LaneCounty,
  shadedNight = TRUE,
  main = "Lane County Range of PM2.5 Values"
)

# Add min/max lines
monitor_timeseriesPlot(LaneCounty_max, col = 'red', type = 's', add = TRUE)
monitor_timeseriesPlot(LaneCounty_min, col = 'blue', type = 's', add = TRUE)
</code></pre>


</div>