<div class="container">

<table style="width: 100%;"><tr>
<td>tauW</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute weighted naive and <em>tau</em> statistics for a cross-classification matrix</h2>

<h3>Description</h3>

<p><code>tauW</code>: Computes: (1) unweighted naive, (2) weighted naive, (3) unweighted <em>tau</em>, (4) weighted <em>tau</em> accuracy statistics
</p>


<h3>Usage</h3>

<pre><code class="language-R">tauW(
  CM,
  W = diag(sqrt(length(as.matrix(CM)))),
  P = rep(1/nrow(as.matrix(CM)), nrow(as.matrix(CM)))
)

summaryTauW(result.tau)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>CM</code></td>
<td>
<p>a square confusion (cross-classification) matrix (rows: allocation, columns: reference)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>W</code></td>
<td>
<p>weights: 1 on diagonals, [-1..1] off giving partial credit to this error</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>P</code></td>
<td>
<p>prior probability vector, length = number of rows/columns in <code>CM</code> and <code>W</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result.tau</code></td>
<td>
<p><code>tauW()</code> result</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>summaryTauW</code>: prints a summary of the results from <em>tauW</em>
</p>
<p><code>xtableTauW</code>: formats a LaTeX table with results from <em>tauW</em> and saves it as a <code>.tex</code> file for import into a LaTeX document.
</p>
<p>Input matrices <code>CM</code> and <code>W</code> may be in <code>data.frame</code> format and will be converted
</p>
<p>Weights matrix <code>W</code>: 0 = no credit; 1 = full credit; -1 = maximum penalty
</p>
<p>If absent, default is no partial credit, i.e., unweighted.
</p>
<p>Prior probabilities vector <code>P</code>: If absent, <code>P</code> are equal priors for each class. Special value <code>P = 0</code> is interpreted as <code>P</code> = column marginals.
</p>
<p>Error checks: <code>CM</code> must be square; <code>P</code> must have correct number of classes and sum to 1 +/- 0.0001; <code>W</code> &amp; <code>CM</code> must be conformable
</p>


<h3>Value</h3>

<p>Results are returned in a list with obvious R names
</p>


<h3>Author(s)</h3>

<p>D.G. Rossiter
</p>


<h3>References</h3>


<ul>
<li>
<p> Rossiter, D. G., Zeng, R., &amp; Zhang, G.-L. (2017). Accounting for taxonomic distance in accuracy assessment of soil class predictions. Geoderma, 292, 118–127. <a href="https://doi.org/10.1016/j.geoderma.2017.01.012">doi:10.1016/j.geoderma.2017.01.012</a>
</p>
</li>
<li>
<p> Ma, Z. K., &amp; Redmond, R. L. (1995). Tau-coefficients for accuracy assessment of classification of remote-sensing data. Photogrammetric Engineering and Remote Sensing, 61(4), 435–439.
</p>
</li>
<li>
<p> Naesset, E. (1996). Conditional tau coefficient for assessment of producer’s accuracy of classified remotely sensed data. ISPRS Journal of Photogrammetry and Remote Sensing, 51(2), 91–98. <a href="https://doi.org/10.1016/0924-2716%2869%2900007-4">doi:10.1016/0924-2716(69)00007-4</a>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
# example confusion matrix
# rows: allocation (user's counts)
# columns: reference (producer's counts)
crossclass &lt;- matrix(data=c(2,1,0,5,0,0,
                            1,74,2,1,3,6,
                            0,5,8,6,1,3,
                            6,1,3,91,0,0,
                            0,4,0,0,0,4,
                            0,6,2,2,4,38),
                     nrow=6, byrow=TRUE)
row.names(crossclass) &lt;- c("OP", "SA", "UA", "UC", "AV", "AC")
colnames(crossclass) &lt;- row.names(crossclass)

# build the weights matrix
# how much credit for a mis-allocation
weights &lt;- matrix(data=c(1.00,0.05,0.05,0.15,0.05,0.15,
                         0.05,1.00,0.05,0.05,0.05,0.35,
                         0.05,0.05,1.00,0.20,0.15,0.15,
                         0.15,0.05,0.25,1.00,0.10,0.25,
                         0.05,0.10,0.15,0.10,1.00,0.15,
                         0.20,0.30,0.10,0.25,0.20,1.00),
                  nrow=6, byrow=TRUE)

# unweighted accuracy
summaryTauW(nnaive &lt;- tauW(crossclass))

# unweighted tau with equal priors, equivalent to Foody (1992) modified Kappa
tauW(crossclass)$tau

# unweighted tau with user's = producer's marginals, equivalent to original kappa
(priors &lt;-  apply(crossclass, 2, sum)/sum(crossclass))
tauW(crossclass, P=priors)$tau

# weighted accuracy; tau with equal priors
summaryTauW(weighted &lt;- tauW(crossclass, W=weights))

# weighted accuracy; tau with user's = producer's marginals
summaryTauW(tauW(crossclass, W=weights, P=priors))

# change in accuracy statistics weighted vs. non-weighted
(weighted$overall.weighted - weighted$overall.naive)
(weighted$user.weighted - weighted$user.naive)
(weighted$prod.weighted - weighted$prod.naive)

</code></pre>


</div>