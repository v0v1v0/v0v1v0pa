<div class="container">

<table style="width: 100%;"><tr>
<td>balancing_cost</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Balancing cost accessibility measure</h2>

<h3>Description</h3>

<p>Calculates the balancing cost measure, which is defined as the travel cost
required to reach as many opportunities as the number of people in a given
origin. Originally proposed by
Barboza et al. (2021), under the name
"balancing time".
</p>
<p>This function is generic over any kind of numeric travel cost,
such as distance, time and money.
</p>


<h3>Usage</h3>

<pre><code class="language-R">balancing_cost(
  travel_matrix,
  land_use_data,
  opportunity,
  travel_cost,
  demand,
  cost_increment = 1,
  group_by = character(0),
  fill_missing_ids = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>travel_matrix</code></td>
<td>
<p>A data frame. The travel matrix describing the costs
(i.e. travel time, distance, monetary cost, etc.) between the origins and
destinations in the study area. Must contain the columns <code>from_id</code>, <code>to_id</code>
and any others specified in <code>travel_cost</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>land_use_data</code></td>
<td>
<p>A data frame. The distribution of opportunities within
the study area cells. Must contain the columns <code>id</code> and any others
specified in <code>opportunity</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opportunity</code></td>
<td>
<p>A string. The name of the column in <code>land_use_data</code>
with the number of opportunities/resources/services to be considered when
calculating accessibility levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>travel_cost</code></td>
<td>
<p>A string. The name of the column in <code>travel_matrix</code>
with the travel cost between origins and destinations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>demand</code></td>
<td>
<p>A string. The name of the column in <code>land_use_data</code> with the
number of people in each origin that will be considered potential
competitors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cost_increment</code></td>
<td>
<p>A number. The cost increment that should be used when
defining the travel cost distribution from which the potential balancing
costs will be picked. For example, an increment of 1 tends to suitable for
travel time distributions, meaning that the function will first check if
any origins reach their balancing cost with a travel time of 0 minutes,
then 1 minute, 2 minutes, 3, 4, ..., etc. A increment of 1 might be too big
for a distribution of monetary costs, on the other hand, which could
possibly benefit from a smaller increment of 0.05, for example, resulting
in the function looking for balancing costs first at a cost of 0, then
0.05, 0.10, ..., etc. Defaults to 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_by</code></td>
<td>
<p>A <code>character</code> vector. When not <code>character(0)</code> (the default),
indicates the <code>travel_matrix</code> columns that should be used to group the
accessibility estimates by. For example, if <code>travel_matrix</code> includes a
departure time column, that specifies the departure time of each entry in
the data frame, passing <code>"departure_time"</code> to this parameter results in
accessibility estimates grouped by origin and by departure time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill_missing_ids</code></td>
<td>
<p>A <code>logical</code>. When calculating grouped accessibility
estimates (i.e. when <code>by_col</code> is not <code>NULL</code>), some combinations of groups
and origins may be missing. For example, if a single trip can depart from
origin <code>A</code> at 7:15am and reach destination <code>B</code> within 55 minutes, but no
trips departing from <code>A</code> at 7:30am can be completed at all, this second
combination will not be included in the output. When <code>TRUE</code> (the default),
the function identifies which combinations would be left out and fills
their respective accessibility values with 0, which incurs in a
performance penalty.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame containing the accessibility estimates for each
origin/destination (depending if <code>active</code> is <code>TRUE</code> or <code>FALSE</code>) in the
travel matrix.
</p>
<p>A data frame containing the accessibility estimates for each origin
in the travel matrix. Origins marked with a <code>NA</code> balancing cost never reach
as many opportunities as there is people residing in them, given the
specified travel matrix.
</p>


<h3>References</h3>

<p>Barboza MH, Carneiro MS, Falavigna C, Luz G, Orrico R (2021).
“Balancing Time: Using a New Accessibility Measure in Rio de Janeiro.”
<em>Journal of Transport Geography</em>, <b>90</b>, 102924.
ISSN 09666923, <a href="https://doi.org/10.1016/j.jtrangeo.2020.102924">doi:10.1016/j.jtrangeo.2020.102924</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data_dir &lt;- system.file("extdata", package = "accessibility")
travel_matrix &lt;- readRDS(file.path(data_dir, "travel_matrix.rds"))
land_use_data &lt;- readRDS(file.path(data_dir, "land_use_data.rds"))

bc &lt;- balancing_cost(
  travel_matrix,
  land_use_data,
  opportunity = "jobs",
  travel_cost = "travel_time",
  demand = "population"
)
head(bc)

</code></pre>


</div>