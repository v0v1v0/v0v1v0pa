<div class="container">

<table style="width: 100%;"><tr>
<td>compute_duration</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute Duration</h2>

<h3>Description</h3>

<p>Compute duration between two dates, e.g., duration of an adverse event,
relative day, age, ...
</p>


<h3>Usage</h3>

<pre><code class="language-R">compute_duration(
  start_date,
  end_date,
  in_unit = "days",
  out_unit = "days",
  floor_in = TRUE,
  add_one = TRUE,
  trunc_out = FALSE,
  type = "duration"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>start_date</code></td>
<td>
<p>The start date
</p>
<p>A date or date-time object is expected.
</p>
<p>Refer to <code>derive_vars_dt()</code> to impute and derive a date from a date
character vector to a date object.
</p>
<p>Refer to <code>convert_dtc_to_dt()</code> to obtain a vector of imputed dates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_date</code></td>
<td>
<p>The end date
</p>
<p>A date or date-time object is expected.
</p>
<p>Refer to <code>derive_vars_dt()</code> to impute and derive a date from a date
character vector to a date object.
</p>
<p>Refer to <code>convert_dtc_to_dt()</code> to obtain a vector of imputed dates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>in_unit</code></td>
<td>
<p>Input unit
</p>
<p>See floor_in and add_one parameter for details.
</p>
<p>Permitted Values (case-insensitive):
</p>
<p>For years: <code>"year"</code>, <code>"years"</code>, <code>"yr"</code>, <code>"yrs"</code>, <code>"y"</code>
</p>
<p>For months: <code>"month"</code>, <code>"months"</code>, <code>"mo"</code>, <code>"mos"</code>
</p>
<p>For days: <code>"day"</code>, <code>"days"</code>, <code>"d"</code>
</p>
<p>For hours: <code>"hour"</code>, <code>"hours"</code>, <code>"hr"</code>, <code>"hrs"</code>, <code>"h"</code>
</p>
<p>For minutes: <code>"minute"</code>, <code>"minutes"</code>, <code>"min"</code>, <code>"mins"</code>
</p>
<p>For seconds: <code>"second"</code>, <code>"seconds"</code>, <code>"sec"</code>, <code>"secs"</code>, <code>"s"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out_unit</code></td>
<td>
<p>Output unit
</p>
<p>The duration is derived in the specified unit
</p>
<p>Permitted Values (case-insensitive):
</p>
<p>For years: <code>"year"</code>, <code>"years"</code>, <code>"yr"</code>, <code>"yrs"</code>, <code>"y"</code>
</p>
<p>For months: <code>"month"</code>, <code>"months"</code>, <code>"mo"</code>, <code>"mos"</code>
</p>
<p>For weeks: <code>"week"</code>, <code>"weeks"</code>, <code>"wk"</code>, <code>"wks"</code>, <code>"w"</code>
</p>
<p>For days: <code>"day"</code>, <code>"days"</code>, <code>"d"</code>
</p>
<p>For hours: <code>"hour"</code>, <code>"hours"</code>, <code>"hr"</code>, <code>"hrs"</code>, <code>"h"</code>
</p>
<p>For minutes: <code>"minute"</code>, <code>"minutes"</code>, <code>"min"</code>, <code>"mins"</code>
</p>
<p>For seconds: <code>"second"</code>, <code>"seconds"</code>, <code>"sec"</code>, <code>"secs"</code>, <code>"s"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>floor_in</code></td>
<td>
<p>Round down input dates?
</p>
<p>The input dates are round down with respect to the input unit, e.g., if the
input unit is 'days', the time of the input dates is ignored.
</p>
<p>Default: <code>TRUE</code>
</p>
<p>Permitted Values: <code>TRUE</code>, <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_one</code></td>
<td>
<p>Add one input unit?
</p>
<p>If the duration is non-negative, one input unit is added. i.e., the
duration can not be zero.
</p>
<p>Default: <code>TRUE</code>
</p>
<p>Permitted Values: <code>TRUE</code>, <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trunc_out</code></td>
<td>
<p>Return integer part
</p>
<p>The fractional part of the duration (in output unit) is removed, i.e., the
integer part is returned.
</p>
<p>Default: <code>FALSE</code>
</p>
<p>Permitted Values: <code>TRUE</code>, <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>lubridate duration type.
</p>
<p>See below for details.
</p>
<p>Default: <code>"duration"</code>
</p>
<p>Permitted Values: <code>"duration"</code>, <code>"interval"</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The output is a numeric vector providing the duration as time from
start to end date in the specified unit. If the end date is before the start
date, the duration is negative.
</p>


<h3>Value</h3>

<p>The duration between the two date in the specified unit
</p>


<h3>Duration Type</h3>

<p>The <a href="https://lubridate.tidyverse.org/">lubridate</a> package calculates two
types of spans between two dates: duration and interval.
While these calculations are largely the same, when the unit of the time period
is month or year the result can be slightly different.
</p>
<p>The difference arises from the ambiguity in the length of <code>"1 month"</code> or
<code>"1 year"</code>.
Months may have 31, 30, 28, or 29 days, and years are 365 days and 366 during leap years.
Durations and intervals help solve the ambiguity in these measures.
</p>
<p>The <strong>interval</strong> between <code>2000-02-01</code> and <code>2000-03-01</code> is <code>1</code> (i.e. one month).
The <strong>duration</strong> between these two dates is <code>0.95</code>, which accounts for the fact
that the year 2000 is a leap year, February has 29 days, and the average month
length is <code>30.4375</code>, i.e. <code>29 / 30.4375 = 0.95</code>.
</p>
<p>For additional details, review the
<a href="https://lubridate.tidyverse.org/reference/timespan.html">lubridate time span reference page</a>.
</p>


<h3>See Also</h3>

<p><code>derive_vars_duration()</code>
</p>
<p>Date/Time Computation Functions that returns a vector: 
<code>compute_age_years()</code>,
<code>compute_dtf()</code>,
<code>compute_tmf()</code>,
<code>convert_date_to_dtm()</code>,
<code>convert_dtc_to_dt()</code>,
<code>convert_dtc_to_dtm()</code>,
<code>impute_dtc_dt()</code>,
<code>impute_dtc_dtm()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(lubridate)

# Derive duration in days (integer), i.e., relative day
compute_duration(
  start_date = ymd_hms("2020-12-06T15:00:00"),
  end_date = ymd_hms("2020-12-24T08:15:00")
)

# Derive duration in days (float)
compute_duration(
  start_date = ymd_hms("2020-12-06T15:00:00"),
  end_date = ymd_hms("2020-12-24T08:15:00"),
  floor_in = FALSE,
  add_one = FALSE
)

# Derive age in years
compute_duration(
  start_date = ymd("1984-09-06"),
  end_date = ymd("2020-02-24"),
  trunc_out = TRUE,
  out_unit = "years",
  add_one = FALSE
)

# Derive duration in hours
compute_duration(
  start_date = ymd_hms("2020-12-06T9:00:00"),
  end_date = ymd_hms("2020-12-06T13:30:00"),
  out_unit = "hours",
  floor_in = FALSE,
  add_one = FALSE,
)
</code></pre>


</div>