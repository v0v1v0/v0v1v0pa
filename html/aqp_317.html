<div class="container">

<table style="width: 100%;"><tr>
<td>SoilProfileCollection</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>An S4 object representation of a group of soil profiles.</h2>

<h3>Description</h3>

<p>In general, one should use <code>depths()</code> to initiate a SoilProfileCollection object from data. However, sometimes there are instances where either an empty, or very specific, object is needed. If that is the case, the general constructor <code>SoilProfileCollection</code> is available.
</p>


<h3>Usage</h3>

<pre><code class="language-R">SoilProfileCollection(
  idcol = "id",
  hzidcol = "hzID",
  depthcols = c("top", "bottom"),
  metadata = list(aqp_df_class = "data.frame", aqp_group_by = "", aqp_hzdesgn = "",
    aqp_hztexcl = "", stringsAsFactors = FALSE),
  horizons = data.frame(id = character(0), hzID = character(0), top = numeric(0), bottom
    = numeric(0), stringsAsFactors = FALSE),
  site = data.frame(id = character(0), stringsAsFactors = FALSE),
  sp = new("SpatialPoints"),
  diagnostic = data.frame(stringsAsFactors = FALSE),
  restrictions = data.frame(stringsAsFactors = FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>idcol</code></td>
<td>
<p>character Profile ID Column Name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hzidcol</code></td>
<td>
<p>character Horizon ID Column Name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depthcols</code></td>
<td>
<p>character, length 2 Top and Bottom Depth Column Names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadata</code></td>
<td>
<p>list, metadata including data.frame class in use and depth units</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>horizons</code></td>
<td>
<p>data.frame An object inheriting from data.frame containing Horizon data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>site</code></td>
<td>
<p>data.frame An object inheriting from data.frame containing Site data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sp</code></td>
<td>
<p>SpatialPoints A SpatialPoints object. No longer used in aqp 2+, see <code>?initSpatial</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diagnostic</code></td>
<td>
<p>data.frame An object inheriting from data.frame containing diagnostic feature data. Must contain profile ID. See <code>diagnostic_hz()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>restrictions</code></td>
<td>
<p>data.frame An object inheriting from data.frame containing restrictive feature data. Must contain profile ID. See <code>restrictions()</code></p>
</td>
</tr>
</table>
<h3>Slots</h3>


<dl>
<dt><code>idcol</code></dt>
<dd>
<p>character.</p>
</dd>
<dt><code>hzidcol</code></dt>
<dd>
<p>character.</p>
</dd>
<dt><code>depthcols</code></dt>
<dd>
<p>character.</p>
</dd>
<dt><code>metadata</code></dt>
<dd>
<p>list.</p>
</dd>
<dt><code>horizons</code></dt>
<dd>
<p>data.frame.</p>
</dd>
<dt><code>site</code></dt>
<dd>
<p>data.frame.</p>
</dd>
<dt><code>sp</code></dt>
<dd>
<p>SpatialPoints.</p>
</dd>
<dt><code>diagnostic</code></dt>
<dd>
<p>data.frame.</p>
</dd>
<dt><code>restrictions</code></dt>
<dd>
<p>data.frame.</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Pierre Roudier, Dylan E. Beaudette, Andrew G. Brown
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## structure of default, empty SoilProfileCollection
str(SoilProfileCollection())


## use the depths() formula interface to specify
## profile ID, top and bottom depth and set up
## a SPC that is topologically correct and complete

d &lt;- do.call('rbind', lapply(1:10, random_profile))

# promote to SoilProfileCollection and plot
depths(d) &lt;- id ~ top + bottom
plot(d)

# split into new SoilProfileCollection objects by index
d.1 &lt;- d[1, ]
d.2 &lt;- d[2, ]
d.345 &lt;- d[3:5, ]

# combine profile collections
# note that profiles are sorted according to ID
d.new &lt;- c(d.345, d.1, d.2)
plot(d.new)

data(sp1)

## init SoilProfileCollection objects from data.frame
depths(sp1) &lt;- id ~ top + bottom

## depth units
du &lt;- depth_units(sp1)
depth_units(sp1) &lt;- 'in'
depth_units(sp1) &lt;- du

## horizon designation column
hzdesgnname(sp1) &lt;- "name"
hzdesgnname(sp1)

## all designations in an SPC (useful for single profile SPC)
hzDesgn(sp1)

## horizon texture class column
hztexclname(sp1) &lt;- "texture"
hztexclname(sp1)

## get/set metadata on SoilProfileCollection objects
# this is a 1-row data.frame
m &lt;- metadata(sp1)
m$sampler &lt;- 'Dylan'
metadata(sp1) &lt;- m

## extract horizon data from SoilProfileCollection objects as data.frame
h &lt;- horizons(sp1)

# also merge (left-join) of new columns and
# replacement of existing columns via horizons&lt;-
horizons(sp1) &lt;- h

# get number of horizons
nrow(sp1)


## getting site-level data
site(sp1)

## setting site-level data
# site-level data from horizon-level data (stored in @horizons)
site(sp1) &lt;- ~ group


# make some fake site data, and append from data.frame
# a matching ID column must be present in both @site and new data
# note that IDs should all be character class
d &lt;- data.frame(id=profile_id(sp1), p=runif(n=length(sp1)), stringsAsFactors=FALSE)
site(sp1) &lt;- d

# edit horizon depths
horizonDepths(sp1) &lt;- c('t', 'b')
horizonDepths(sp1)

# edit profile IDs
p &lt;- sprintf("%s-new", profile_id(sp1))
profile_id(sp1) &lt;- p
profile_id(sp1)

</code></pre>


</div>