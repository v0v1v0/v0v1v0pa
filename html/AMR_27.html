<div class="container">

<table style="width: 100%;"><tr>
<td>add_custom_microorganisms</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Custom Microorganisms</h2>

<h3>Description</h3>

<p>With <code>add_custom_microorganisms()</code> you can add your own custom microorganisms, such the non-taxonomic outcome of laboratory analysis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_custom_microorganisms(x)

clear_custom_microorganisms()
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a data.frame resembling the microorganisms data set, at least containing column "genus" (case-insensitive)</p>
</td>
</tr></table>
<h3>Details</h3>

<p>This function will fill in missing taxonomy for you, if specific taxonomic columns are missing, see <em>Examples</em>.
</p>
<p><strong>Important:</strong> Due to how <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> works, the <code>add_custom_microorganisms()</code> function has to be run in every <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> session - added microorganisms are not stored between sessions and are thus lost when <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> is exited.
</p>
<p>There are two ways to circumvent this and automate the process of adding microorganisms:
</p>
<p><strong>Method 1:</strong> Using the package option <code>AMR_custom_mo</code>, which is the preferred method. To use this method:
</p>

<ol>
<li>
<p> Create a data set in the structure of the microorganisms data set (containing at the very least column "genus") and save it with <code>saveRDS()</code> to a location of choice, e.g. <code>"~/my_custom_mo.rds"</code>, or any remote location.
</p>
</li>
<li>
<p> Set the file location to the package option <code>AMR_custom_mo</code>: <code>options(AMR_custom_mo = "~/my_custom_mo.rds")</code>. This can even be a remote file location, such as an https URL. Since options are not saved between <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> sessions, it is best to save this option to the <code>.Rprofile</code> file so that it will be loaded on start-up of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>. To do this, open the <code>.Rprofile</code> file using e.g. <code>utils::file.edit("~/.Rprofile")</code>, add this text and save the file:
</p>
<div class="sourceCode r"><pre># Add custom microorganism codes:
options(AMR_custom_mo = "~/my_custom_mo.rds")
</pre></div>
<p>Upon package load, this file will be loaded and run through the <code>add_custom_microorganisms()</code> function.
</p>
</li>
</ol>
<p><strong>Method 2:</strong> Loading the microorganism directly from your <code>.Rprofile</code> file. Note that the definitions will be stored in a user-specific <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> file, which is a suboptimal workflow. To use this method:
</p>

<ol>
<li>
<p> Edit the <code>.Rprofile</code> file using e.g. <code>utils::file.edit("~/.Rprofile")</code>.
</p>
</li>
<li>
<p> Add a text like below and save the file:
</p>
<div class="sourceCode r"><pre> # Add custom antibiotic drug codes:
 AMR::add_custom_microorganisms(
   data.frame(genus = "Enterobacter",
              species = "asburiae/cloacae")
 )
</pre></div>
</li>
</ol>
<p>Use <code>clear_custom_microorganisms()</code> to clear the previously added microorganisms.
</p>


<h3>See Also</h3>

<p><code>add_custom_antimicrobials()</code> to add custom antimicrobials.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# a combination of species is not formal taxonomy, so
# this will result in "Enterobacter cloacae cloacae",
# since it resembles the input best:
mo_name("Enterobacter asburiae/cloacae")

# now add a custom entry - it will be considered by as.mo() and
# all mo_*() functions
add_custom_microorganisms(
  data.frame(
    genus = "Enterobacter",
    species = "asburiae/cloacae"
  )
)

# E. asburiae/cloacae is now a new microorganism:
mo_name("Enterobacter asburiae/cloacae")

# its code:
as.mo("Enterobacter asburiae/cloacae")

# all internal algorithms will work as well:
mo_name("Ent asburia cloacae")

# and even the taxonomy was added based on the genus!
mo_family("E. asburiae/cloacae")
mo_gramstain("Enterobacter asburiae/cloacae")

mo_info("Enterobacter asburiae/cloacae")


# the function tries to be forgiving:
add_custom_microorganisms(
  data.frame(
    GENUS = "BACTEROIDES / PARABACTEROIDES SLASHLINE",
    SPECIES = "SPECIES"
  )
)
mo_name("BACTEROIDES / PARABACTEROIDES")
mo_rank("BACTEROIDES / PARABACTEROIDES")

# taxonomy still works, even though a slashline genus was given as input:
mo_family("Bacteroides/Parabacteroides")


# for groups and complexes, set them as species or subspecies:
add_custom_microorganisms(
  data.frame(
    genus = "Citrobacter",
    species = c("freundii", "braakii complex"),
    subspecies = c("complex", "")
  )
)
mo_name(c("C. freundii complex", "C. braakii complex"))
mo_species(c("C. freundii complex", "C. braakii complex"))
mo_gramstain(c("C. freundii complex", "C. braakii complex"))

</code></pre>


</div>