<div class="container">

<table style="width: 100%;"><tr>
<td>within_n_sds</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Return a function to create z-score checking predicate</h2>

<h3>Description</h3>

<p>This function takes one argument, the number of standard deviations
within which to accept a particular data point.
</p>


<h3>Usage</h3>

<pre><code class="language-R">within_n_sds(n, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>The number of standard deviations from the mean
within which to accept a datum</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to be passed to <code>within_bounds</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>As an example, if '2' is passed into this function, this will return
a function that takes a vector and figures out the bounds of two
standard deviations from the mean. That function will then return
a <code>within_bounds</code> function that can then be applied
to a single datum. If the datum is within two standard deviations of
the mean of the vector given to the function returned by this function,
it will return TRUE. If not, FALSE.
</p>
<p>This function isn't meant to be used on its own, although it can. Rather,
this function is meant to be used with the <code>insist</code> function to
search for potentially erroneous data points in a data set.
</p>


<h3>Value</h3>

<p>A function that takes a vector and returns a
<code>within_bounds</code> predicate based on the standard deviation
of that vector.
</p>


<h3>See Also</h3>

<p><code>within_n_mads</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">test.vector &lt;- rnorm(100, mean=100, sd=20)

within.one.sd &lt;- within_n_sds(1)
custom.bounds.checker &lt;- within.one.sd(test.vector)
custom.bounds.checker(105)     # returns TRUE
custom.bounds.checker(40)      # returns FALSE

# same as
within_n_sds(1)(test.vector)(40)    # returns FALSE

within_n_sds(2)(test.vector)(as.numeric(NA))  # returns TRUE
# because, by default, within_bounds() will accept
# NA values. If we want to reject NAs, we have to
# provide extra arguments to this function
within_n_sds(2, allow.na=FALSE)(test.vector)(as.numeric(NA))  # returns FALSE

# or in a pipeline, like this was meant for

library(magrittr)

iris %&gt;%
  insist(within_n_sds(5), Sepal.Length)

</code></pre>


</div>