<div class="container">

<table style="width: 100%;"><tr>
<td>Auction2ndLogit-Functions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>2nd Score Procurement Auction Model with (Nested) Logit Demand</h2>

<h3>Description</h3>

<p>Calibrates consumer demand using (Nested) Logit and then
simulates the price effect of a merger between two firms
under the assumption that all firms in the market are playing a
differentiated products 2nd score auction game.
</p>
<p>Let k denote the number of products produced by all firms playing the
auction game below.
</p>


<h3>Usage</h3>

<pre><code class="language-R">auction2nd.logit(
  prices,
  shares,
  margins,
  ownerPre,
  ownerPost,
  normIndex = ifelse(isTRUE(all.equal(sum(shares), 1, check.names = FALSE)), 1, NA),
  mcDelta = rep(0, length(prices)),
  subset = rep(TRUE, length(prices)),
  insideSize = NA_real_,
  mcDeltaOutside = 0,
  control.slopes,
  labels = paste("Prod", 1:length(prices), sep = "")
)

auction2nd.logit.nests(
  prices,
  shares,
  margins,
  nests,
  diversions,
  ownerPre,
  ownerPost,
  normIndex = ifelse(isTRUE(all.equal(sum(shares), 1, check.names = FALSE)), 1, NA),
  mcDelta = rep(0, length(prices)),
  subset = rep(TRUE, length(prices)),
  insideSize = NA_real_,
  mcDeltaOutside = 0,
  parmsStart,
  constraint = TRUE,
  control.slopes,
  labels = paste("Prod", 1:length(prices), sep = "")
)

auction2nd.logit.alm(
  prices,
  shares,
  margins,
  ownerPre,
  ownerPost,
  mktElast = NA_real_,
  insideSize = NA_real_,
  mcDelta = rep(0, length(prices)),
  subset = rep(TRUE, length(prices)),
  mcDeltaOutside = 0,
  parmsStart,
  control.slopes,
  labels = paste("Prod", 1:length(prices), sep = "")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>prices</code></td>
<td>
<p>A length k vector of product prices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shares</code></td>
<td>
<p>A length k vector of product (quantity) shares. Values must be
between 0 and 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>margins</code></td>
<td>
<p>A length k vector of product margins (in levels, not percents), some of which may
equal NA.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ownerPre</code></td>
<td>
<p>EITHER a vector of length k whose values
indicate which firm produced a product pre-merger OR
a k x k matrix of pre-merger ownership shares.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ownerPost</code></td>
<td>
<p>EITHER a vector of length k whose values
indicate which firm produced a product after the merger OR
a k x k matrix of post-merger ownership shares.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>normIndex</code></td>
<td>
<p>An integer equalling the index (position) of the
inside product whose mean valuation will be normalized to 1. Default
is 1, unless ‘shares’ sum to less than 1, in which case the default is
NA and an outside good is assumed to exist.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mcDelta</code></td>
<td>
<p>A vector of length k where each element equals the
(level) change in a product's marginal costs due to
the merger. Default is 0, which assumes that the merger does not
affect any products' marginal cost.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>A vector of length k where each element equals TRUE if
the product indexed by that element should be included in the
post-merger simulation and FALSE if it should be excluded.Default is a
length k vector of TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>insideSize</code></td>
<td>
<p>An integer equal to total pre-merger units sold.
If shares sum to one, this also equals the size of the market.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mcDeltaOutside</code></td>
<td>
<p>A length 1 vector indicating the change in the marginal cost of the
outside good. Default is 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control.slopes</code></td>
<td>
<p>A list of  <code>optim</code>  control parameters passed
to the calibration routine optimizer (typically the <code>calcSlopes</code> method).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>A k-length vector of labels. Default is "Prod#", where
‘#’ is a number between 1 and the length of ‘prices’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nests</code></td>
<td>
<p>A length k factor of product nests.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diversions</code></td>
<td>
<p>A k x k matrix of diversion ratios with diagonal
elements equal to -1. Default is missing, in which case diversion
according to share is assumed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parmsStart</code></td>
<td>
<p>For <code>auction2nd.logit.alm</code>, a length 2 vector of starting values used to solve for
price coefficient and the share of the outside good. The first element should
always be the price coefficient and the second should be
the outside good. For <code>auction2nd.logit.nests</code>, a length n+1 vector of starting values used to solve for
price coefficient and the nesting parameters. The first element should
always be the price coefficient and the remaining elements should be
the nesting parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint</code></td>
<td>
<p>if TRUE, then the nesting parameters for all
non-singleton nests are assumed equal. If FALSE, then each
non-singleton nest is permitted to have its own value. Default is
TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mktElast</code></td>
<td>
<p>a negative value indicating market elasticity. Default is NA.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Using product prices, quantity shares and all of the
product margins from at least one firm, <code>auction2nd.logit</code> is able to
recover the price coefficient and product mean valuations in a
Logit demand model. <code>auction2nd.logit</code> then uses these
calibrated parameters to simulate a merger between two firms, under the assumption that firms are participating in a 2nd score procurement auction.
</p>
<p><code>auction2nd.logit.nests</code> is identical to <code>auction2nd.logit</code> except that it assumes
that products can be grouped into nests. Additional margin information is needed to 
identify th nesting parameters. 
</p>
<p><code>auction2nd.logit.alm</code> is identical to <code>auction2nd.logit</code> except that it assumes
that an outside product exists and uses additional margin
information to estimate the share of the outside good.
</p>


<h3>Value</h3>

<p><code>auction2nd.logit</code> returns an instance of <code>Auction2ndLogit</code>,
a child class of <code>Logit</code>. <code>auction2nd.logit.nests</code> returns an instance of <code>Auction2ndLogitNests</code>.
<code>auction2nd.logit</code> returns an instance of <code>Auction2ndLogitALM</code>.
</p>


<h3>Author(s)</h3>

<p>Charles Taragin <a href="mailto:ctaragin+antitrustr@gmail.com">ctaragin+antitrustr@gmail.com</a>
</p>


<h3>References</h3>

<p>Miller, Nathan (2014). “Modeling the effects of mergers in procurement”
<em>International Journal of Industrial Organization</em> , <b>37</b>, pp. 201-208.
</p>


<h3>See Also</h3>

<p><code>logit</code>,<code>logit.nests</code> for simulating mergers under a Nash-Bertrand pricing game with Logit demand
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Calibration and simulation results from a merger between firms 2 and 3
## of a 4-firm market
## Source: Miller 2014 backup materials http://www.nathanhmiller.org/research

share = c(0.29,0.40,0.28,0.03)

price = c(35.53,  154, 84.08, 53.16)*1e3
cost  =  c(NA, 101, NA, NA)*1e3

ownerPre &lt;- ownerPost &lt;- diag(length(share))

#Suppose products 2 and 3 merge
ownerPost[2,3] &lt;- ownerPost[3,2] &lt;- 1

margin = price - cost

result.2nd &lt;- auction2nd.logit(price,share,margin,
                           ownerPre=ownerPre,ownerPost=ownerPost,normIndex=2)


print(result.2nd)
summary(result.2nd,revenue=FALSE)

##re-run without any price information except Firm 2

price &lt;- rep(NA_real_, length(price))

result.noprice &lt;- auction2nd.logit(price,share,margin,
                                   ownerPre=ownerPre,ownerPost=ownerPost,normIndex=2)

print(result.noprice)
summary(result.noprice,revenue=FALSE)

##changing the units of prices and margins can yield dramatically different results 

price = c(35.53,  154, 84.08, 53.16)
cost  =  c(NA, 101, NA, NA)
margin &lt;- price - cost

result.units &lt;- auction2nd.logit(price,share,margin,
                                   ownerPre=ownerPre,ownerPost=ownerPost,normIndex=2)

print(result.units)
summary(result.units,revenue=FALSE)

## Get a detailed description of the 'Auction2ndLogit' class slots
showClass("Auction2ndLogit")

## Show all methods attached to the 'Auction2ndLogit' Class
showMethods(classes="Auction2ndLogit")

</code></pre>


</div>