<div class="container">

<table style="width: 100%;"><tr>
<td>AIPW_tmle</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Augmented Inverse Probability Weighting (AIPW) uses tmle or tmle3 as inputs</h2>

<h3>Description</h3>

<p><code>AIPW_tmle</code> class uses a fitted <code>tmle</code> or <code>tmle3</code> object as input
</p>


<h3>Details</h3>

<p>Create an AIPW_tmle object that uses the estimated efficient influence function from a fitted <code>tmle</code> or <code>tmle3</code> object
</p>


<h3>Value</h3>

<p><code>AIPW_tmle</code> object
</p>


<h3>Constructor</h3>

<p><code>AIPW$new(Y = NULL, A = NULL, tmle_fit = NULL, verbose = TRUE)</code>
</p>


<h4>Constructor Arguments</h4>


<table>
<tr>
<td style="text-align: left;">
<strong>Argument</strong>      </td>
<td style="text-align: left;">   <strong>Type</strong>     </td>
<td style="text-align: left;">     <strong>Details</strong> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>Y</code>               </td>
<td style="text-align: left;">   Integer           </td>
<td style="text-align: left;">     A vector of outcome (binary (0, 1) or continuous) </td>
</tr>
<tr>
<td style="text-align: left;">
<code>A</code>               </td>
<td style="text-align: left;">   Integer           </td>
<td style="text-align: left;">     A vector of binary exposure (0 or 1) </td>
</tr>
<tr>
<td style="text-align: left;">
<code>tmle_fit</code>        </td>
<td style="text-align: left;">   Object             </td>
<td style="text-align: left;">    A fitted <code>tmle</code> or <code>tmle3</code> object </td>
</tr>
<tr>
<td style="text-align: left;">
<code>verbose</code>         </td>
<td style="text-align: left;">   Logical           </td>
<td style="text-align: left;">    Whether to print the result (Default = TRUE)
</td>
</tr>
</table>
<h3>Public Methods</h3>


<table>
<tr>
<td style="text-align: left;">
<strong>Methods</strong>      </td>
<td style="text-align: left;">   <strong>Details</strong>                                      </td>
<td style="text-align: left;"> <strong>Link</strong>     </td>
</tr>
<tr>
<td style="text-align: left;">
<code>summary()</code>      </td>
<td style="text-align: left;">   Summary of the average treatment effects from AIPW    </td>
<td style="text-align: left;">   summary.AIPW_base</td>
</tr>
<tr>
<td style="text-align: left;">
<code>plot.p_score()</code> </td>
<td style="text-align: left;">   Plot the propensity scores by exposure status         </td>
<td style="text-align: left;">   plot.p_score</td>
</tr>
<tr>
<td style="text-align: left;">
<code>plot.ip_weights()</code> </td>
<td style="text-align: left;">   Plot the inverse probability weights using truncated propensity scores  </td>
<td style="text-align: left;">   plot.ip_weights</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>Public Variables</h3>


<table>
<tr>
<td style="text-align: left;">
<strong>Variable</strong>     </td>
<td style="text-align: left;">   <strong>Generated by</strong>      </td>
<td style="text-align: left;">     <strong>Return</strong> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>n</code>              </td>
<td style="text-align: left;">   Constructor                </td>
<td style="text-align: left;">     Number of observations </td>
</tr>
<tr>
<td style="text-align: left;">
<code>obs_est</code>        </td>
<td style="text-align: left;">   Constructor                </td>
<td style="text-align: left;">     Components calculating average causal effects </td>
</tr>
<tr>
<td style="text-align: left;">
<code>estimates</code>      </td>
<td style="text-align: left;">   <code>summary()</code>                </td>
<td style="text-align: left;">     A list of Risk difference, risk ratio, odds ratio </td>
</tr>
<tr>
<td style="text-align: left;">
<code>result</code>         </td>
<td style="text-align: left;">   <code>summary()</code>                </td>
<td style="text-align: left;">     A matrix contains RD, ATT, ATC, RR and OR with their SE and 95%CI </td>
</tr>
<tr>
<td style="text-align: left;">
<code>g.plot</code>         </td>
<td style="text-align: left;">   <code>plot.p_score()</code>           </td>
<td style="text-align: left;">     A density plot of propensity scores by exposure status </td>
</tr>
<tr>
<td style="text-align: left;">
<code>ip_weights.plot</code>         </td>
<td style="text-align: left;">   <code>plot.ip_weights()</code>           </td>
<td style="text-align: left;">     A box plot of inverse probability weights </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h4>Public Variable Details</h4>


<dl>
<dt><code>obs_est</code></dt>
<dd>
<p>This list extracts from the fitted <code>tmle</code> object.
It includes propensity scores (<code>p_score</code>), counterfactual predictions (<code>mu</code>, <code>mu1</code> &amp; <code>mu0</code>) and efficient influence functions (<code>aipw_eif1</code> &amp; <code>aipw_eif0</code>)</p>
</dd>
<dt><code>g.plot</code></dt>
<dd>
<p>This plot is generated by <code>ggplot2::geom_density</code></p>
</dd>
<dt><code>ip_weights.plot</code></dt>
<dd>
<p>This plot uses truncated propensity scores stratified by exposure status (<code>ggplot2::geom_boxplot</code>)</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R">vec &lt;- function() sample(0:1,100,replace = TRUE)
df &lt;- data.frame(replicate(4,vec()))
names(df) &lt;- c("A","Y","W1","W2")

## From tmle
library(tmle)
library(SuperLearner)
tmle_fit &lt;- tmle(Y=df$Y,A=df$A,W=subset(df,select=c("W1","W2")),
                 Q.SL.library="SL.glm",
                 g.SL.library="SL.glm",
                 family="binomial")
AIPW_tmle$new(A=df$A,Y=df$Y,tmle_fit = tmle_fit,verbose = TRUE)$summary()
</code></pre>


</div>