<div class="container">

<table style="width: 100%;"><tr>
<td>analyze_AssetCorr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function to evaluate several default time series simultaneously
</h2>

<h3>Description</h3>

<p>To give a first insight of several default time series, this function combines multiple estimator functions (intra and inter) and visualize the results.
</p>


<h3>Usage</h3>

<pre><code class="language-R">analyze_AssetCorr(DTS,N, B=NA, DB=NA, JC=FALSE, CI_Boot=NA, Adjust=0.0001,
type="bca", Intra=c("AMM","FMM","CMM","JDP1","JDP2","MLE","AMLE","Beta","Mode"),
Inter=c("Copula","Cov","JDP","MLE"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>DTS</code></td>
<td>
<p>a matrix, containing the default time series of each sector.

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>a matrix, containing the number of obligors at the beginning of the period of sector.

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>an integer, indicating how many bootstrap repetitions should be used for the single bootstrap corrected estimate (intra and inter).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DB</code></td>
<td>
<p>a combined vector, indicating how many bootstrap repetitions should be used for the inner (first entry) and outer loop (second entry) to correct the bias using the double bootstrap (intra and inter).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>JC</code></td>
<td>
<p> a logical variable, indicating if the jackknife corrected estimate should be calculated (intra and inter).

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI_Boot</code></td>
<td>
<p>a number, indicating the desired confidence interval if the single bootstrap correction is specified.
By default, the interval is calculated as the bootstrap corrected and accelerated confidence interval (Bca). Furthermore, the analytical confidence intervals are provided, using the same value as <code>CI_Boot</code>(intra and inter).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Adjust</code></td>
<td>
<p>a number, which should be added to a observed default rate of 0 or subtracted form a observed default rate of 1 (only for the intraAMLE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>a string, indicating the desired method to calculate the bootstrap confidence intervals. For more details see <code>boot.ci</code>. Studendized confidence intervals are not supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Intra</code></td>
<td>
<p>a combined string, indicating which intra correlation estimators should be used. All estimators are set as default.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Inter</code></td>
<td>
<p>a combined string, indicating which inter correlation estimators should be used. All estimators are set as default.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To give an first insight, the function provides an overview of the several default time series and estimates using different estimators (intra and inter) simultaneously. The plug-in estimates of the intra correlation using inter correlation methods will be estimated via <code>intraMLE</code>.
If <code>DB</code> is specified, the single bootstrap corrected estimate will be calculated by using the bootstrap values of the outer loop.
</p>


<h3>Value</h3>

<p>The returned value is a list, containing the following entries:
</p>
<p>Estimators_Intra
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Sector</code></td>
<td>
<p>Number of the sector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Sector_Name</code></td>
<td>
<p>Name of the sector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Estimator</code></td>
<td>
<p>Name of the applied estimator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Estimate</code></td>
<td>
<p>Value of the calculated estimate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Type</code></td>
<td>
<p>String, which indicating corrected/non-corrected estimates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correction</code></td>
<td>
<p>Name of the correction method</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>Number of single bootstrap repetitions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DB</code></td>
<td>
<p>Number of the double bootstrap repetitions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI_Boot</code></td>
<td>
<p>Selected two-sided bootstrap confidence interval</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI</code></td>
<td>
<p>A string, indicating if the corresponding value is the upper or lower bound</p>
</td>
</tr>
</table>
<p>Estimators_Inter
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Sector_1</code></td>
<td>
<p>Number of the sector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Sector_Name_1</code></td>
<td>
<p>Name of the sector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Sector_2</code></td>
<td>
<p>Number of the sector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Sector_Name_2</code></td>
<td>
<p>Name of the sector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Estimator</code></td>
<td>
<p>Name of the applied estimator to Sector_1 and Sector_2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Estimate</code></td>
<td>
<p>Value of the calculated estimateto Sector_1 and Sector_2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Type</code></td>
<td>
<p>String, which indicating corrected/non-corrected estimates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correction</code></td>
<td>
<p>Name of the correction method</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>Number of single bootstrap repetitions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DB</code></td>
<td>
<p>Number of the double bootstrap repetitions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI_Boot</code></td>
<td>
<p>Selected two-sided bootstrap confidence interval</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI</code></td>
<td>
<p>A string, indicating if the corresponding value is the upper or lower bound</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Kevin Jakob
</p>


<h3>References</h3>

<p>Botha M, van Vuuren G (2010).
“Implied asset correlation in retail loan portfolios.”
<em>Journal of Risk Management in Financial Institutions</em>, <b>3</b>(2), 156–173. 
</p>
<p>Chang J, Hall P (2015).
“Double-bootstrap methods that use a single double-bootstrap simulation.”
<em>Biometrika</em>, <b>102</b>(1), 203–214.
</p>
<p>De Servigny A, Renault O (2002).
“Default correlation: empirical evidence.”
<em>Working Paper, Standard and Poors</em>.
Available at: <a href="https://www.semanticscholar.org/paper/Default-correlation%3A-empirical-evidence-Servigny-Renault/aae251436d0e3b489951c0d38463d71106755675">https://www.semanticscholar.org/paper/Default-correlation%3A-empirical-evidence-Servigny-Renault/aae251436d0e3b489951c0d38463d71106755675</a>.
</p>
<p>Duellmann K, Gehde-Trapp M (2004).
“Systematic risk in recovery rates: an empirical analysis of US corporate credit exposures.”
<em>Bundesbank Series 2, Discussion Paper</em>.
Available at SSRN: <a href="http://hdl.handle.net/10419/19729">http://hdl.handle.net/10419/19729</a>. Accessed: 02.11.2017.
</p>
<p>Efron B, Tibshirani RJ (1994).
<em>An introduction to the bootstrap</em>.
CRC press.
</p>
<p>Frei C, Wunsch M (2018).
“Moment Estimators for Autocorrelated Time Series and their Application to Default Correlations.”
<em>Journal of Credit Risk</em>, <b>14</b>, 1–29.
</p>
<p>Gordy MB (2000).
“A comparative anatomy of credit risk models.”
<em>Journal of Banking &amp; Finance</em>, <b>24</b>(1), 119–149.
</p>
<p>Gordy MB, Heitfield E (2010).
“Small-sample estimation of models of portfolio credit risk.”
In <em>Recent Advances in Financial Engineering: Proceedings of the KIER-TMU International Workshop on Financial Engineering, 2009: Otemachi, Sankei Plaza, Tokyo, 3-4 August 2009</em>, 43–63.
</p>
<p>Kalkbrener M, Onwunta A (2010).
“Validating structural credit portfolio models.”
<em>Model risk - identification, measurement and management. Risk Books, London</em>, 233–261.
</p>
<p>Lucas DJ (1995).
“Default correlation and credit analysis.”
<em>The Journal of Fixed Income</em>, <b>4</b>(4), 76–87.
</p>
<p>Meyer C (2009).
“Estimation of intra-sector asset correlations.”
<em>The Journal of Risk Model Validation</em>, <b>3</b>(3), 47–79.
</p>
<p>Teetor P (2011).
<em>R Cookbook: Proven recipes for data analysis, statistics, and graphics</em>.
O'Reilly Media, Inc.
</p>


<h3>See Also</h3>

<p><code>intraAMM</code>, <code>intraFMM</code>, <code>intraJDP2</code>,
<code>intraMLE</code>, <code>intraJDP1</code>, <code>intraCMM</code>,
<code>intraMode</code>,<code>intraBeta</code>,
<code>interJDP</code>, <code>interCopula</code>,<code>interCMM</code>, 
<code>interCov</code>, <code>interMLE</code>, <code>intraALL</code>, 
<code>interALL</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

library(mvtnorm)
set.seed(111)
NoO=1000 #Number of obligors in each sector
Years=20
AC=0.3
PD=0.01

Psi=rmvnorm(Years,sigma=matrix(c(1,0.5,0.5,0.5,1,0.5,0.5,0.5,1),3))
PDcond1=pnorm((qnorm(PD)-sqrt(AC)*Psi[,1])/sqrt(1-AC))
PDcond2=pnorm((qnorm(PD)-sqrt(AC/2)*Psi[,2])/sqrt(1-AC/2))
PDcond3=pnorm((qnorm(PD)-sqrt(AC*2)*Psi[,3])/sqrt(1-AC*2))

DTS=cbind(rbinom(Years,NoO,PDcond1),rbinom(Years,NoO,PDcond2),rbinom(Years,NoO,PDcond3))
N=matrix(NoO,nrow = Years,ncol = 3)

Output&lt;-analyze_AssetCorr(DTS,N)

#Bootstrap Correction and CIs

Output&lt;-analyze_AssetCorr(DTS,N,B=100,CI_Boot=0.95)

#Double Bootstrap Correction and Jackknife
Output&lt;-analyze_AssetCorr(DTS,N,DB=c(50,50),JC=TRUE)






</code></pre>


</div>