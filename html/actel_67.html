<div class="container">

<table style="width: 100%;"><tr>
<td>distancesMatrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate Distances Matrix</h2>

<h3>Description</h3>

<p>Using a previously created transition layer (see <code>transitionLayer</code>), calculates the distances
between spatial points. Adapted from Grant Adams' script "distance to closest mpa". if the argument 'actel'
is set to TRUE (default), an actel-compatible matrix is generated, and the user will be asked if they would
like to save the matrix as 'distances.csv' in the current directory.
</p>


<h3>Usage</h3>

<pre><code class="language-R">distancesMatrix(
  t.layer,
  starters = NULL,
  targets = starters,
  coord.x = "x",
  coord.y = "y",
  id.col = NULL,
  actel = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>t.layer</code></td>
<td>
<p>A TransitionLayer object, generated by <code>transitionLayer</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>starters</code></td>
<td>
<p>A data frame with the points from which to start measuring the distance. Ignored if actel = TRUE (default), as the 'spatial.csv' is loaded as starters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>targets</code></td>
<td>
<p>A data frame with the points to which a way must be found. Ignored if actel = TRUE (default), as the 'spatial.csv' is loaded as targets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coord.x, coord.y</code></td>
<td>
<p>The names of the columns containing the x and y coordinates in the starters and targets. Must be identical in the starters and targets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id.col</code></td>
<td>
<p>The name of the column containing the IDs of the points to be used as starters and targets. Must be identical in both files. Ignored if actel = TRUE (default), as the stations' standard names are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>actel</code></td>
<td>
<p>Logical: Should the distance matrix be optimized for actel? Defaults to TRUE.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>It is highly recommended to read the manual page regarding distances matrices before running this function.
You can find it here: <a href="https://hugomflavio.github.io/actel-website/manual-distances.html">https://hugomflavio.github.io/actel-website/manual-distances.html</a>
</p>


<h3>Value</h3>

<p>A matrix with the distances between each pair of points.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# check if R can run the distance functions
aux &lt;- c(
  length(suppressWarnings(packageDescription("raster"))),
  length(suppressWarnings(packageDescription("gdistance"))),
  length(suppressWarnings(packageDescription("sp"))),
  length(suppressWarnings(packageDescription("terra"))))

missing.packages &lt;- sapply(aux, function(x) x == 1)

if (any(missing.packages)) {
  message("Sorry, this function requires packages '",
    paste(c("raster", "gdistance", "sp", "terra")[missing.packages], collapse = "', '"),
    "' to operate. Please install ", ifelse(sum(missing.packages) &gt; 1, "them", "it"),
    " before proceeding.")
} else {
  # move to a temporary directory
  old.wd &lt;- getwd()
  setwd(tempdir())

  # Fetch location of actel's example files
  aux &lt;- system.file(package = "actel")[1]

  # create a temporary spatial.csv file
  file.copy(paste0(aux, "/example_spatial.csv"), "spatial.csv")

  # import the shape file and use the spatial.csv
  # to check the extents.
  x &lt;- shapeToRaster(shape = paste0(aux, "/example_shapefile.shp"),
    coord.x = "x", coord.y = "y", size = 20)

  raster::plot(x)

  # Build the transition layer
  t.layer &lt;- transitionLayer(x)

  # compile the distances matrix. Columns x and y in the spatial dataframe
  # contain the coordinates of the stations and release sites.
  distancesMatrix(t.layer, coord.x = 'x', coord.y = 'y')

  # return to original directory
  setwd(old.wd)
  rm(old.wd)
}
rm(aux, missing.packages)


</code></pre>


</div>