<div class="container">

<table style="width: 100%;"><tr>
<td>sox_spectro</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create spectrogram image from wave file</h2>

<h3>Description</h3>

<p>Using the external program <code>SoX</code> (the Swiss Army knife of sound processing
programs), create a spectrogram image file. Note that you must have <code>SoX</code>
installed to use this function. Spectrograms will be silently overwritten.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sox_spectro(
  path,
  dir_out = "Spectrograms",
  prepend = "spectro_",
  width = NULL,
  height = NULL,
  start = NULL,
  end = NULL,
  rate = "20k",
  dry_run = FALSE,
  quiet = FALSE,
  sox_file_path = NULL,
  skip_check = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Character. Path to wave file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir_out</code></td>
<td>
<p>Character. Output directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prepend</code></td>
<td>
<p>Character. Text to add to the start of the output file.
Defaults to "spectro_".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>Numeric. Width of the spectrogram image in pixels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>Numeric. Height of the spectrogram image in pixels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>Numeric/Character. Start the spectrogram at this time (seconds
or HH:MM:SS format).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>
<p>Numeric/Character. End time the spectrogram at this time (seconds
or HH:MM:SS format).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rate</code></td>
<td>
<p>Numeric. Audio sampling rate to display (used by the <code>rate</code>
effect in <code>sox</code>). This effectively limits the upper frequency of the
spectrogram to rate/2. The default (<code>"20k"</code>), limits the spectrogram to
10kHz. Use <code>rate = NULL</code> for no limiting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dry_run</code></td>
<td>
<p>Logical. If <code>TRUE</code> show the sox command, but do not run (for
debugging and understanding precise details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Logical. Whether to suppress progress messages and other
non-essential updates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sox_file_path</code></td>
<td>
<p>Path to sox file if not installed at the system level,
otherwise NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip_check</code></td>
<td>
<p>Logical. Should the function skip check to ensure SoX is installed.
This may allow speed ups if running across large numbers of files.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Most arguments are passed through to the <code>seewave::sox()</code> command.
</p>

<ul>
<li>
<p> width and height correspond to the <code>-x</code> and <code>-y</code> options for the
<code>spectrogram</code> effect.
</p>
</li>
<li> <p><code>start</code> and <code>end</code> are used by the <code>trim</code> effect
</p>
</li>
<li> <p><code>rate</code> is passed on to the <code>rate</code> effect
</p>
</li>
</ul>
<p>Based on code from Sam Hache.
</p>


<h3>Value</h3>

<p>Does not return anything, but creates a spectrogram image in
<code>dir_out</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Prep sample file
w &lt;- tuneR::sine(440, duration = 300000)
td &lt;- tempdir()
temp_wave &lt;- glue::glue("{td}/test_wave.wav")
tuneR::writeWave(w, temp_wave)

# Create spectrograms

try({sox_spectro(temp_wave)
sox_spectro(temp_wave, rate = NULL)
sox_spectro(temp_wave, start = 2, end = 3)
sox_spectro(temp_wave, start = "0:01", end = "0:04")
sox_spectro(temp_wave, prepend = "")
})

# Clean up
unlink(temp_wave)
unlink("Spectrograms", recursive = TRUE)
</code></pre>


</div>