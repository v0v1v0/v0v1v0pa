<div class="container">

<table style="width: 100%;"><tr>
<td>apc.get.index</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get indices for mapping data into trapezoid formation</h2>

<h3>Description</h3>

<p>This function does the internal book keeping between the original data format and the trapezoid format.
It creates index matrices to transform data between original format, trapezoid format and a vector,
as well as values to keep track of the labels for the time scales.
</p>
<p>The generalized trapezoids are introduced in Kuang, Nielsen and Nielsen (2008), see also Nielsen (2014).</p>


<h3>Usage</h3>

<pre><code class="language-R">apc.get.index(apc.data.list)</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>apc.data.list</code></td>
<td>
<p>See <code>apc.data.list</code> for a description of the format</p>
</td>
</tr></table>
<h3>Value</h3>

<p>A list containing the following values.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>Matrix.  An argument</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dose</code></td>
<td>
<p>Matrix or NULL.  An argument</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.format</code></td>
<td>
<p>Character.  An argument</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit</code></td>
<td>
<p>Numeric. An argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.xmax</code></td>
<td>
<p>Numeric.  Number of rows of response matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.ymax</code></td>
<td>
<p>Numeric.  Number of columns of response matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.xlab</code></td>
<td>
<p>Character. Label for row index of response  matrix. Derived from <code>data.format</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.ylab</code></td>
<td>
<p>Character. Label for column index of response  matrix. Derived from <code>data.format</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.xlab1</code></td>
<td>
<p>Numeric.  Year for smallest row index of response  matrix.    </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.ylab1</code></td>
<td>
<p>Numeric.  Year for smallest column index of response  matrix. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.data</code></td>
<td>
<p>Numeric.  Number of observations. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index.data</code></td>
<td>
<p>Matrix of dimension <code>n.data</code>x2.  Index pairs for observations in the original coordinate system as given by <code>data.format</code>.  Same order as in <code>index.trap</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index.trap</code></td>
<td>
<p>Matrix of dimension <code>n.data</code>x2.  Index pairs for observations in an age/cohort system.  Hence the coordinates of a trapezoid matrix.  Same order as in <code>index.data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age.max</code></td>
<td>
<p>Numeric.  Number of age groups.	 </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>per.max</code></td>
<td>
<p>Numeric.  Number of period groups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coh.max</code></td>
<td>
<p>Numeric.  Number of cohort groups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>per.zero</code></td>
<td>
<p>Numeric.  Anchor for period index, so that period starts from <code>per.zero</code>+1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>per.odd</code></td>
<td>
<p>Logic.  TRUE if per.zero is odd.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>U</code></td>
<td>
<p>Numeric.  Integer value of (per.zero+3)/2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age1</code></td>
<td>
<p>Numeric.  Year for smallest age index. Derived for data.format="CP", "PC", otherwise an argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>per1</code></td>
<td>
<p>Numeric.  Year for smallest period index. Derived for data.format="AC","CA","CL","CL.vector.by.row","trapezoid", otherwise an argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coh1</code></td>
<td>
<p>Numeric.  Year for smallest cohort index. Derived for data.format="AP", "PA", otherwise an argument.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Bent Nielsen &lt;bent.nielsen@nuffield.ox.ac.uk&gt; 31 Mar 2015</p>


<h3>References</h3>

<p>Kuang, D., Nielsen, B. and Nielsen, J.P. (2008a) Identification of the age-period-cohort model and the extended chain ladder model. Biometrika 95, 979-986. <em>Download</em>: <a href="https://doi.org/10.1093/biomet/asn026">Article</a>; Earlier version <a href="http://www.nuffield.ox.ac.uk/economics/papers/2007/w5/KuangNielsenNielsen07.pdf">Nuffield DP</a>.
</p>
<p>Nielsen, B. (2014) Deviance analysis of age-period-cohort models.  <a href="http://www.nuffield.ox.ac.uk/economics/papers/2014/apc_deviance.pdf">Nuffield DP</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">################
#	Artificial data

###############
#	Artificial data
#	Generate a 3x5 matrix and make arbitrary decisions for rest

response &lt;- matrix(data=seq(1:15),nrow=3,ncol=5)
data.list	&lt;- list(response=response,dose=NULL,data.format="AP",
					age1=25,per1=1955,coh1=NULL,
					unit=5,per.zero=NULL,per.max=NULL,time.adjust=0)
apc.get.index(data.list)

</code></pre>


</div>