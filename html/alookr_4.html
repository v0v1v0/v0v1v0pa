<div class="container">

<table style="width: 100%;"><tr>
<td>compare_diag</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Diagnosis of train set and test set of split_df object</h2>

<h3>Description</h3>

<p>Diagnosis of similarity between datasets splitted by train set and set included in the "split_df" class.
</p>


<h3>Usage</h3>

<pre><code class="language-R">compare_diag(
  .data,
  add_character = FALSE,
  uniq_thres = 0.01,
  miss_msg = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>an object of class "split_df", usually, a result of a call to split_df().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_character</code></td>
<td>
<p>logical. Decide whether to include text variables in the
compare of categorical data. The default value is FALSE, which also not includes character variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uniq_thres</code></td>
<td>
<p>numeric. Set a threshold to removing variables when the ratio of unique values(number of unique values / number of observation) is greater than the set value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>miss_msg</code></td>
<td>
<p>logical. Set whether to output a message when diagnosing missing value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical. Set whether to echo information to the console at runtime.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In the two split datasets, a variable with a single value, a variable with a level not found in any dataset, and a variable with a high ratio to the number of levels are diagnosed.
</p>


<h3>Value</h3>

<p>list.
Variables of tbl_df for first component named "single_value":
</p>

<ul>
<li>
<p> variables : character. variable name
</p>
</li>
<li>
<p> train_uniq : character. the type of unique value in train set. it is divided into "single" and "multi".
</p>
</li>
<li>
<p> test_uniq : character. the type of unique value in test set. it is divided into "single" and "multi".
</p>
</li>
</ul>
<p>Variables of tbl_df for second component named "uniq_rate":
</p>

<ul>
<li>
<p> variables : character. categorical variable name
</p>
</li>
<li>
<p> train_uniqcount : numeric. the number of unique value in train set
</p>
</li>
<li>
<p> train_uniqrate : numeric. the ratio of unique values(number of unique values / number of observation) in train set
</p>
</li>
<li>
<p> test_uniqcount : numeric. the number of unique value in test set
</p>
</li>
<li>
<p> test_uniqrate : numeric. the ratio of unique values(number of unique values / number of observation) in test set
</p>
</li>
</ul>
<p>Variables of tbl_df for third component named "missing_level":
</p>

<ul>
<li>
<p> variables : character. variable name
</p>
</li>
<li>
<p> n_levels : integer. count of level of categorical variable
</p>
</li>
<li>
<p> train_missing_nlevel : integer. the number of non-existent levels in the train set
</p>
</li>
<li>
<p> test_missing_nlevel : integer. he number of non-existent levels in the test set
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)

# Credit Card Default Data
head(ISLR::Default)

defaults &lt;- ISLR::Default
defaults$id &lt;- seq(NROW(defaults))

set.seed(1)
defaults[sample(seq(NROW(defaults)), 3), "student"] &lt;- NA
set.seed(2)
defaults[sample(seq(NROW(defaults)), 10), "balance"] &lt;- NA

sb &lt;- defaults %&gt;%
  split_by(default)

sb %&gt;%
  compare_diag()

sb %&gt;%
  compare_diag(add_character = TRUE)

sb %&gt;%
  compare_diag(uniq_thres = 0.0005)

</code></pre>


</div>