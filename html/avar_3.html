<div class="container">

<table style="width: 100%;"><tr>
<td>avar</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute the Empirical Allan Variance</h2>

<h3>Description</h3>

<p>This function estimates the Allan variance.
</p>


<h3>Usage</h3>

<pre><code class="language-R">avar(x, type = "mo", ...)

## Default S3 method:
avar(x, type = "mo", freq = 1, ...)

## S3 method for class 'imu'
avar(x, type = "mo", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>vec</code> of time series observations or an <code>imu</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A <code>string</code> containing either <code>"mo"</code> for Maximal Overlap or <code>"to"</code> for Tau Overlap.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The decomposition and the amount of time it takes to perform this function depends on whether you are using
the Maximal Overlap or the Tau Overlap.
</p>


<h3>Value</h3>

<p>If the input <code>x</code> is a <code>vec</code>, then the function returns a <code>list</code> that contains:
</p>

<ul>
<li>
<p> "levels": The averaging time at each level.
</p>
</li>
<li>
<p> "allan": The estimated Allan variance.
</p>
</li>
<li>
<p> "type": Type of estimator (<code>mo</code> or <code>to</code>).
</p>
</li>
</ul>
<p>If the input <code>x</code> is an <code>imu</code> object, then the function returns a <code>list</code> that contains:
</p>

<ul>
<li>
<p> "sensor": Name of the sensor.
</p>
</li>
<li>
<p> "freq": The frequency at which the error signal is measured.
</p>
</li>
<li>
<p> "n": Sample size of the data.
</p>
</li>
<li>
<p> "type": The types of sensors considered in the data.
</p>
</li>
<li>
<p> "axis": The axes of sensors considered in the data.
</p>
</li>
<li>
<p> "avar": A list containing the computed Allan variance based on the data.
</p>
</li>
</ul>
<h3>Maximal Overlap Allan Variance</h3>

<p>Given <code class="reqn">N</code> equally spaced samples with averaging time <code class="reqn">\tau = n\tau _0</code>,
we define <code class="reqn">n</code> as an integer such that <code class="reqn"> 1 \le n \le \frac{N}{2}</code>.
Therefore, <code class="reqn">n</code> can be selected from <code class="reqn">\left\{ {n|n &lt; \left\lfloor {{{\log }_2}\left( N \right)} \right\rfloor } \right\}</code>
Based on the latter, we have <code class="reqn">M = N - 2n</code> levels of decomposition.
The Maximal-overlap estimator is given by:
</p>
<p style="text-align: center;"><code class="reqn">\frac{1}{{2\left( {N - 2k + 1} \right)}}\sum\limits_{t = 2k}^N {{{\left[ {{{\bar Y}_t}\left( k \right) - {{\bar Y}_{t - k}}\left( k \right)} \right]}^2}} </code>
</p>

<p>where </p>
<p style="text-align: center;"><code class="reqn"> {{\bar y}_t}\left( \tau  \right) = \frac{1}{\tau }\sum\limits_{i = 0}^{\tau  - 1} {{{\bar y}_{t - i}}} </code>
</p>
<p>.
</p>


<h3>Tau-Overlap Allan Variance</h3>

<p>Given <code class="reqn">N</code> equally spaced samples with averaging time <code class="reqn">\tau = n\tau _0</code>,
we define <code class="reqn">n</code> as an integer such that <code class="reqn"> 1 \le n \le \frac{N}{2}</code>.
Therefore, <code class="reqn">n</code> can be selected from <code class="reqn">\left\{ {n|n &lt; \left\lfloor {{{\log }_2}\left( N \right)} \right\rfloor } \right\}</code>
Based on the latter, we have <code class="reqn">m = \left\lfloor {\frac{{N - 1}}{n}} \right\rfloor  - 1</code> levels of decomposition.
The tau-overlap estimator is given by:
</p>
<p>where <code class="reqn"> {{\bar y}_t}\left( \tau  \right) = \frac{1}{\tau }\sum\limits_{i = 0}^{\tau  - 1} {{{\bar y}_{t - i}}} </code>.
</p>


<h3>References</h3>

<p>Long-Memory Processes, the Allan Variance and Wavelets, D. B. Percival and P. Guttorp
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(999)
Xt = rnorm(10000)
av_mat_mo = avar(Xt, type = "mo", freq = 100)
av_mat_tau = avar(Xt, type = "to")

</code></pre>


</div>