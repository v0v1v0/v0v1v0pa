<div class="container">

<table style="width: 100%;"><tr>
<td>CreateInputsCrit.GRiwrmInputsModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creation of the InputsCrit object required to the <code>ErrorCrit</code> functions</h2>

<h3>Description</h3>

<p>This function can be used either for a catchment (with an <em>InputsModel</em> object) or for a network (with a <em>GRiwrmInputsModel</em> object)
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'GRiwrmInputsModel'
CreateInputsCrit(
  InputsModel,
  FUN_CRIT = ErrorCrit_NSE,
  RunOptions,
  Obs,
  AprioriIds = NULL,
  k = 0.15,
  AprCelerity = 1,
  ...
)

## S3 method for class 'InputsModel'
CreateInputsCrit(InputsModel, FUN_CRIT, ...)

CreateInputsCrit(InputsModel, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>InputsModel</code></td>
<td>
<p>object of class <em>InputsModel</em> or <em>GRiwrmInputsModel</em>. See CreateInputsModel</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN_CRIT</code></td>
<td>
<p>[function (atomic or list)] error criterion function (e.g. airGR::ErrorCrit_RMSE, airGR::ErrorCrit_NSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RunOptions</code></td>
<td>
<p>object of class <em>RunOptions</em> or <em>GRiwrmRunOptions</em>, see CreateRunOptions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Obs</code></td>
<td>
<p>numeric, matrix or data.frame series of observed flows, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AprioriIds</code></td>
<td>
<p>(optional) named list or named vector of character used for the parameter regularization (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>(optional) numeric weight coefficient used in the parameter regularization (See airGR::CreateInputsCrit_Lavenne)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AprCelerity</code></td>
<td>
<p>(optional) numeric Default celerity used as a priori parameter for upstream catchments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to airGR::CreateInputsCrit, see details</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See airGR::CreateInputsCrit documentation for a complete list of arguments.
</p>
<p><code>Obs</code> argument is equivalent to the same argument in airGR::CreateInputsCrit except that it must be a matrix or a data.frame if <code>InputsModel</code> is a <em>GRiwrmInputsModel</em> object.
Then, each column of the matrix or data.frame represents the observations of one of the simulated node with the name of the columns representing the id of each node.
</p>
<p>With a <em>GRiwrmInputsModel</em> object, all arguments are applied on each sub-catchments of the network.
</p>
<p>Parameter regularization consists of defining a priori parameters which are
used in a composed criterion based on the formula proposed by
Lavenne et al. (2019) (See airGR::CreateInputsCrit_Lavenne).
The parameter <code>AprioriIds</code> allows to define which neighbor sub-catchment is
used for providing a priori parameters.
Its format is as follows:
<code>AprioriIds &lt;- c("Downstream sub-catchment 1" = "A priori upstream sub-catchment 1", ...)</code>
where the quoted strings are the ids of the sub-catchments.
The node providing a priori parameters must be calibrated before the
current one.
The sequence order of calibration can be checked with getNodeRanking.
If the latter is not adequate, this order can be forced by setting the node providing
a priori parameters as donor of the current node in CreateGRiwrm.
See vignettes for more details.
The parameter <code>AprCelerity</code> is a default value used as a priori for the
parameter 'Celerity' in case of an upstream catchment (without celerity parameter)
is used as a priori catchment.
</p>


<h3>Value</h3>

<p>Depending on the class of <code>InputsModel</code> argument (respectively <code>InputsModel</code> and <code>GRiwrmInputsModel</code> object), the returned value is respectively:
</p>

<ul>
<li>
<p> a <code>InputsCrit</code> object (See airGR::CreateInputsCrit)
</p>
</li>
<li>
<p> a <code>GRiwrmInputsCrit</code> object which is a list of <code>InputsCrit</code> objects with one item per modeled sub-catchment
</p>
</li>
</ul>
<h3>References</h3>

<p>De Lavenne, A., Andréassian, V., Thirel, G., Ramos, M.-H., Perrin, C., 2019. A Regularization Approach to Improve the Sequential Calibration of a Semidistributed Hydrological Model. Water Resources Research 55, 8821–8839. <a href="https://doi.org/10.1029/2018WR024266">doi:10.1029/2018WR024266</a>
</p>


<h3>See Also</h3>

<p><code>CreateGRiwrm()</code>, <code>CreateInputsModel.GRiwrm()</code>, <code>CreateRunOptions()</code>, <code>CreateCalibOptions()</code>, <code>Calibration()</code>
</p>


</div>