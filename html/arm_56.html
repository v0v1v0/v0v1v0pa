<div class="container">

<table style="width: 100%;"><tr>
<td>balance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Functions to compute the balance statistics</h2>

<h3>Description</h3>

<p>This function computes the balance statistics before and after matching.
</p>


<h3>Usage</h3>

<pre><code class="language-R">balance(rawdata, treat, matched, estimand="ATT")

## S3 method for class 'balance'
print(x, ..., combined = FALSE, digits = 2)

## S3 method for class 'balance'
plot(x, longcovnames=NULL, which.covs="mixed",
    v.axis=TRUE, cex.main=1, cex.vars=1, cex.pts=1,
    mar=c(4, 3, 5.1, 2), plot=TRUE, x.max = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>rawdata</code></td>
<td>
<p>The full covariate dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treat</code></td>
<td>
<p>the vector of treatment assignments for the full dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matched</code></td>
<td>
<p>vector of weights to apply to the full dataset to create the
restructured data: for matching without replacement these will all be 0's and 1's; 
for one-to-one matching with replacement these will all be non-negative
integers; for IPTW or more complicated matching methods these could be any non-negative numbers</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimand</code></td>
<td>
<p>can either be <code>ATT</code>, <code>ATC</code>, or <code>ATE</code>, default is <code>ATT</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object return by the balance function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>combined</code></td>
<td>
<p>default is <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>minimal number of <em>significant</em> digits, default is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>longcovnames</code></td>
<td>
<p>long covariate names.  If not provided, plot will 
use covariate variable name by default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which.covs</code></td>
<td>
<p><code>mixed</code> then it plots all as std diffs;
<code>binary</code> it only plots binary and as abs unstd diffs;
<code>cont</code> it only plots non-binary and as abs std diffs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>v.axis</code></td>
<td>
<p>default is <code>TRUE</code>, which shows the top axisâ€“axis(3).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.main</code></td>
<td>
<p>font size of main title</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.vars</code></td>
<td>
<p>font size of variabel names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.pts</code></td>
<td>
<p>point size of the estimates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mar</code></td>
<td>
<p>A numerical vector of the form <code>c(bottom, left, top, right)</code>
which gives the number of lines of margin to be specified on
the four sides of the plot. The default is <code>c(0,3,5.1,2)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>default is <code>TRUE</code>, which will plot the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.max</code></td>
<td>
<p>set the max of the <code>xlim</code>, default is <code>NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other plot options may be passed to this function</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function plots the balance statistics before and after matching.  
The open circle dots represent the unmatched balance statistics.  The 
solid dots represent the matched balance statistics. The closer the value
of the estimates to the zero, the better the treated and control groups are 
balanced after matching.
</p>


<h3>Note</h3>

 
<p>The function does not work with predictors that contain factor(x), log(x) or all
other data transformation. Create new objects for these variables.  Attach
them into the original dataset before doing the matching procedure.
</p>


<h3>Author(s)</h3>

<p>Jennifer Hill <a href="mailto:jennifer.hill@nyu.edu">jennifer.hill@nyu.edu</a>; 
Yu-Sung Su <a href="mailto:suyusung@tsinghua.edu.cn">suyusung@tsinghua.edu.cn</a>
</p>


<h3>References</h3>

<p>Andrew Gelman and Jennifer Hill. (2006).
<em>Data Analysis Using Regression and Multilevel/Hierarchical Models</em>.
Cambridge University Press. (Chapter 10)</p>


<h3>See Also</h3>

<p><code>matching</code>,
<code>par</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># matching first
old.par &lt;- par(no.readonly = TRUE)
data(lalonde)
attach(lalonde)
fit &lt;- glm(treat ~ re74 + re75 + age + factor(educ) + 
            black + hisp + married + nodegr + u74 + u75, 
            family=binomial(link="logit"))
pscores &lt;- predict(fit, type="link")
matches &lt;- matching(z=lalonde$treat, score=pscores)
matched &lt;- matches$cnts

# balance check
b.stats &lt;- balance(lalonde, treat, matched, estimand = "ATT")
print(b.stats)
plot(b.stats)
par(old.par)
</code></pre>


</div>