<div class="container">

<table style="width: 100%;"><tr>
<td>scenario-builder</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read, create, update &amp; deduplicate scenario builder</h2>

<h3>Description</h3>

<p><img src="../help/figures/badge_api_ok.svg" alt="Antares API OK"></p>
<p>Read, create, update &amp; deduplicate scenario builder.
</p>


<h3>Usage</h3>

<pre><code class="language-R">scenarioBuilder(
  n_scenario = 1,
  n_mc = NULL,
  areas = NULL,
  areas_rand = NULL,
  group_bc = NULL,
  group_bc_rand = NULL,
  coef_hydro_levels = NULL,
  mode = NULL,
  opts = antaresRead::simOptions()
)

readScenarioBuilder(
  ruleset = "Default Ruleset",
  as_matrix = TRUE,
  opts = antaresRead::simOptions()
)

updateScenarioBuilder(
  ldata,
  ruleset = "Default Ruleset",
  series = NULL,
  clusters_areas = NULL,
  links = NULL,
  opts = antaresRead::simOptions()
)

clearScenarioBuilder(
  ruleset = "Default Ruleset",
  opts = antaresRead::simOptions()
)

deduplicateScenarioBuilder(
  ruleset = "Default Ruleset",
  opts = antaresRead::simOptions()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n_scenario</code></td>
<td>
<p>Number of scenario.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_mc</code></td>
<td>
<p>Number of Monte-Carlo years.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>areas</code></td>
<td>
<p>Areas to use in scenario builder, if <code>NULL</code> (default) all areas in Antares study are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>areas_rand</code></td>
<td>
<p>Areas for which to use <code>"rand"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_bc</code></td>
<td>
<p><code>character</code> Bindgind constraints's groups names to use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_bc_rand</code></td>
<td>
<p><code>character</code> Bindgind constraints which to use <code>"rand"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coef_hydro_levels</code></td>
<td>
<p>Hydro levels coefficients.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p><code>character</code> "bc" to edit binding constraints.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opts</code></td>
<td>
<p>List of simulation parameters returned by the function
<code>antaresRead::setSimulationPath()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ruleset</code></td>
<td>
<p>Ruleset to read.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as_matrix</code></td>
<td>
<p>If <code>TRUE</code> (default) return a <code>matrix</code>, else a <code>list</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ldata</code></td>
<td>
<p>A <code>matrix</code> obtained with <code>scenarioBuilder</code>,
or a named list of matrices obtained with <code>scenarioBuilder</code>, names must be
'l', 'h', 'w', 's', 't', 'r', 'ntc', 'hl' or 'bc', depending on the series to update.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>series</code></td>
<td>
<p>Name(s) of the serie(s) to update if <code>ldata</code> is a single <code>matrix</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clusters_areas</code></td>
<td>
<p>A <code>data.table</code> with two columns <code>area</code> and <code>cluster</code>
to identify area/cluster couple to update for thermal or renewable series.
Default is to read clusters description and update all couples area/cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>links</code></td>
<td>
<p>Links to use if series is <code>"ntc"</code>.
Either a simple vector with links described as <code style="white-space: pre;">⁠"area01%area02⁠</code> or a <code>data.table</code> with two columns <code>from</code> and <code>to</code>.
Default is to read existing links and update them all.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>scenarioBuilder</code> : a <code>matrix</code>
</p>
<p><code>readScenarioBuilder</code> : a <code>list</code> of <code>matrix</code> or <code>list</code> according to <code>as_matrix</code> parameters.
</p>


<h3>Note</h3>


<ul>
<li> <p><code>series = "ntc"</code> is only available with Antares &gt;= 8.2.0.
</p>
</li>
<li>
<p> For <code>series = "hl"</code>, each value must be between 0 and 1.
</p>
</li>
<li>
<p> User must enable/disable <code>custom-scenario</code> property in <code>settings/generaldata.ini</code> by himself.
</p>
</li>
<li> <p><code>series = "bc"</code> is only available with Antares &gt;= 8.7.0.
</p>
</li>
</ul>
<p>For a single matrix, value of series can be :
</p>

<ul>
<li>
<p> h or hydro
</p>
</li>
<li>
<p> hl or hydrolevels
</p>
</li>
<li>
<p> l or load
</p>
</li>
<li>
<p> ntc
</p>
</li>
<li>
<p> r or renewables
</p>
</li>
<li>
<p> s or solar
</p>
</li>
<li>
<p> t or thermal
</p>
</li>
<li>
<p> w or wind
</p>
</li>
</ul>
<h3>See Also</h3>

<p><a href="https://rte-antares-rpackage.github.io/antaresEditObject/articles/scenario-builder.html">Scenario Builder vignette</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

library(antaresRead)
library(antaresEditObject)

# simulation path
setSimulationPath(
  path = "pat/to/simulation",
  simulation = "input"
)

# Create a scenario builder matrix
sbuilder &lt;- scenarioBuilder(
  n_scenario = 51,
  n_mc = 2040,
  areas_rand = c("fr", "be")
)
sbuilder[, 1:6]
dim(sbuilder)

# Create a scenario builder matrix for hydro levels (use case 1)
sbuilder &lt;- scenarioBuilder(
  n_mc = opts$parameters$general$nbyears,
  areas = c("fr", "be"),
  coef_hydro_levels = c(0.1, 0.9)
)

# Create a scenario builder matrix for hydro levels (use case 2)
sbuilder &lt;- scenarioBuilder(
  n_mc = opts$parameters$general$nbyears,
  areas = c("fr", "be"),
  coef_hydro_levels = c(runif(opts$parameters$general$nbyears)
  , runif(opts$parameters$general$nbyears)
  )
)

# Create a scenario builder matrix with 
 # bindings constraints groups (study version &gt;= 8.7.0)
  # Use parameter "mode" with "bc"   
sbuilder &lt;- scenarioBuilder(
  n_scenario = 51,
  n_mc = 2040,
  group_bc = c("my_bc_1", "my_bc_2"), 
  group_bc_rand = "my_bc_2",
  mode = "bc"
)

# Read previous scenario builder
# in a matrix format
prev_sb &lt;- readScenarioBuilder()


# Update scenario builder

# Single matrix for load serie
updateScenarioBuilder(ldata = sbuilder, series = "load") # can be l instead of load

# equivalent as
updateScenarioBuilder(ldata = list(l = sbuilder))

# for binding constraints (study version &gt;= 8.7.0)
updateScenarioBuilder(ldata = sbuilder, series = "bc")

# update several series

# same input
sbuilder
updateScenarioBuilder(
  ldata = sbuilder, 
  series = c("load", "hydro", "solar")
)

# List of matrix
updateScenarioBuilder(ldata = list(
  l = load_sb,
  h = hydro_sb,
  s = solar_sb
))

# Deduplicate scenario builder

deduplicateScenarioBuilder()

## End(Not run)
</code></pre>


</div>