<div class="container">

<table style="width: 100%;"><tr>
<td>testAllSigMatrices</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate all the signature matrices one time with the option to leave out half of the data as a test set</h2>

<h3>Description</h3>

<p>This wrapper is helpful for repetitively matrix generation. It generates seed matrix, all-gene matrix, augmented matrix, shrunk matrix,
and all the clustered matrices in one call.
</p>


<h3>Usage</h3>

<pre><code class="language-R">testAllSigMatrices(
  exprData,
  randomize = TRUE,
  skipShrink = FALSE,
  proportional = FALSE,
  handMetaCluster = NULL,
  testOnHalf = TRUE,
  condTol = 1.01,
  numChunks = 100,
  plotIt = TRUE,
  fastStop = TRUE,
  singleCore = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>exprData</code></td>
<td>
<p>The gene express data. Each row is a gene, and each column is an example of a particular cell type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>randomize</code></td>
<td>
<p>Set to to TRUE randomize the sets selected by ADAPTS::scSample (DEFAULT: TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skipShrink</code></td>
<td>
<p>Set to TRUE to skip shrinking the signatrure matrix (DEFAULT: TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proportional</code></td>
<td>
<p>Set to true to make the training set cell type proportional.  Ignores group size (DEFAULT: FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>handMetaCluster</code></td>
<td>
<p>A List of pre-defined meta clusters.Set to NULL to automatically group indistinguishable cells 
into same cluster using clustWspillOver.(DEFAULT: NULL)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>testOnHalf</code></td>
<td>
<p>Set to TRUE to leave half the data as a test set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>condTol</code></td>
<td>
<p>The tolerance in the reconstruction algorithm.  1.0 = no tolerance, 1.05 = 5% tolerance (DEFAULT: 1.01)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numChunks</code></td>
<td>
<p>The number of groups of genes to remove while shrinking (DEFAULT: NULL, i.e. 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotIt</code></td>
<td>
<p>Set to FALSE to suppress plots (DEFAULT: TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fastStop</code></td>
<td>
<p>Halt early when the condition number changes by less than 1 for 3 iterations (DEFAULT: TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>singleCore</code></td>
<td>
<p>TRUE for a single core (DEFAULT: TRUE)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of results including prediction accuracy and cell enrichment
</p>


<h3>Examples</h3>

<pre><code class="language-R">ct1 &lt;- runif(1000, 0, 100)
ct2 &lt;- runif(1000, 0, 100)
ct3 &lt;- runif(1000, 0, 100)
ct4 &lt;- runif(1000, 0, 100)
dataMat &lt;- cbind(ct1, ct1, ct1, ct1, ct1, ct1, ct2, ct2, ct2, ct2, ct3, ct3, ct3,ct3,ct4,ct4)
rownames(dataMat) &lt;- make.names(rep('gene', nrow(dataMat)), unique=TRUE)
noise &lt;- matrix(runif(nrow(dataMat)*ncol(dataMat), -2, 2), nrow = nrow(dataMat), byrow = TRUE)
dataMat &lt;- dataMat + noise
metaList &lt;- list()
colnames(dataMat) &lt;- sub('\\..*','', colnames(dataMat))
metaList[[1]] &lt;- c(unique(colnames(dataMat))[1])  #Cell Type 1
metaList[[2]] &lt;- c(unique(colnames(dataMat))[2])  #Cell Type 2
metaList[[3]] &lt;- c(unique(colnames(dataMat))[3])  #Cell Type 3
metaList[[4]] &lt;- c(unique(colnames(dataMat))[4:length(unique(colnames(dataMat)))])  #Cell Type 4
#options(mc.cores=2)
#  This is a meta-function that calls other functions, 
#  The execution speed is too slow for the CRAN automated check
#testAllSigMatrices(exprData=dataMat, randomize = TRUE, skipShrink=FALSE, 
#    proportional=FALSE, handMetaCluster=metaList, testOnHalf=TRUE, numChunks=NULL)
</code></pre>


</div>