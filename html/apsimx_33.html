<div class="container">

<table style="width: 100%;"><tr>
<td>edit_apsimx_replacement</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Edit a replacement component in an .apsimx (JSON) file</h2>

<h3>Description</h3>

<p>edit the replacement componenet of an JSON apsimx file. It does not replace the GUI, but it can save time by quickly editing parameters and values.
</p>


<h3>Usage</h3>

<pre><code class="language-R">edit_apsimx_replacement(
  file = "",
  src.dir = ".",
  wrt.dir = ".",
  node = NULL,
  node.child = NULL,
  node.subchild = NULL,
  node.subsubchild = NULL,
  node.sub3child = NULL,
  node.sub4child = NULL,
  node.sub5child = NULL,
  node.string = NULL,
  root = list("Models.Core.Replacements", NA),
  parm = NULL,
  value = NULL,
  overwrite = FALSE,
  edit.tag = "-edited",
  verbose = TRUE,
  grep.options
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>file ending in .apsimx to edit (JSON)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>src.dir</code></td>
<td>
<p>directory containing the .apsimx file; defaults to the current working directory</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wrt.dir</code></td>
<td>
<p>should be used if the destination directory is different from the src.dir</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node</code></td>
<td>
<p>specific node to edit</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.child</code></td>
<td>
<p>specific node child component to edit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.subchild</code></td>
<td>
<p>specific node sub-child to edit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.subsubchild</code></td>
<td>
<p>specific node sub-subchild to edit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.sub3child</code></td>
<td>
<p>specific node sub-sub-subchild to edit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.sub4child</code></td>
<td>
<p>specific node sub-sub-sub-subchild to edit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.sub5child</code></td>
<td>
<p>specific node sub-sub-sub-sub-subchild to edit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node.string</code></td>
<td>
<p>passing of a string instead of the node hierarchy. It can either start with a dot or not.
However, the ‘best’ form is not to start with a dot as it should be a more convenient form of passing
the nodes and their childs and not a real ‘jsonpath’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>root</code></td>
<td>
<p>‘root’ node to explore (default = “Models.Core.Replacements”)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parm</code></td>
<td>
<p>specific parameter to edit</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>new values for the parameter</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>logical; if <code>TRUE</code> the old file is overwritten, a new file is written otherwise</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edit.tag</code></td>
<td>
<p>if the file is edited a different tag from the default ‘-edited’ can be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>whether to print information about successful edit</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grep.options</code></td>
<td>
<p>Additional options for grep. To be passed as a list.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is simply a script that prints the relevant parameters which are likely to need editing. It does not print all information from an .apsimx file.
</p>


<h3>Value</h3>

<p>(when verbose=TRUE) complete file path to edited .apsimx file is returned as a character string.
As a side effect this function creates a new (JSON) .apsimx file.
</p>


<h3>Note</h3>

<p>The components that can be edited are restricted becuase this is better in preventing
errors of editing unintended parts of the file.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
extd.dir &lt;- system.file("extdata", package = "apsimx")
## Writing to a temp directory, but change as needed
tmp.dir &lt;- tempdir()

## Inspect original values
inspect_apsimx_replacement("MaizeSoybean.apsimx", 
                           src.dir = extd.dir,
                           node = "Maize", 
                           node.child = "Phenology",
                           node.subchild = "ThermalTime", 
                           node.subsubchild = "BaseThermalTime",
                           node.sub3child = "Response")

edit_apsimx_replacement("MaizeSoybean.apsimx", 
                        src.dir = extd.dir, wrt.dir = tmp.dir,
                        node = "Maize", 
                        node.child = "Phenology",
                        node.subchild = "ThermalTime", 
                        node.subsubchild = "BaseThermalTime",
                        node.sub3child = "Response",
                        parm = "X",
                        value = c(10, 20, 30, 40, 50)) 
## inspect it
inspect_apsimx_replacement("MaizeSoybean-edited.apsimx", 
                           src.dir = tmp.dir,
                           node = "Maize", 
                           node.child = "Phenology",
                           node.subchild = "ThermalTime", 
                           node.subsubchild = "BaseThermalTime",
                           node.sub3child = "Response")

## Illustrating using 'node.string'
## Equivalent to the code to edit above

edit_apsimx_replacement("MaizeSoybean-edited.apsimx", 
                        src.dir = tmp.dir, wrt.dir = tmp.dir,
                        node.string = "Maize.Phenology.ThermalTime.BaseThermalTime.Response",
                        parm = "X",
                        value = c(11, 21, 31, 41, 51),
                        edit.tag = "-ns") 
                        
inspect_apsimx_replacement("MaizeSoybean-edited-ns.apsimx", 
                           src.dir = tmp.dir,
                           node = "Maize", 
                           node.child = "Phenology",
                           node.subchild = "ThermalTime", 
                           node.subsubchild = "BaseThermalTime",
                           node.sub3child = "Response")


</code></pre>


</div>