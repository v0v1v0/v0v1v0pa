<div class="container">

<table style="width: 100%;"><tr>
<td>munsell2rgb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert Munsell Color Notation to other Color Space Coordinates (sRGB and CIELAB)</h2>

<h3>Description</h3>

<p>Color conversion based on a look-up table of common soil colors.
</p>


<h3>Usage</h3>

<pre><code class="language-R">munsell2rgb(
  the_hue,
  the_value,
  the_chroma,
  alpha = 1,
  maxColorValue = 1,
  return_triplets = FALSE,
  returnLAB = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>the_hue</code></td>
<td>
<p>a vector of one or more more hues, upper-case (e.g. '10YR')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>the_value</code></td>
<td>
<p>a vector of one or more values (e.g. '4')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>the_chroma</code></td>
<td>
<p>a vector of one or more chromas (e.g. '6'), may be NA for neutral hues</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>numeric, transparency setting used when <code>return_triplets = FALSE</code> and <code>returnLAB = FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxColorValue</code></td>
<td>
<p>maximum sRGB color value, typically <code>1</code> (see <code>rgb)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_triplets</code></td>
<td>
<p>logical, return sRGB coordinates (range 0-1) instead of standard hex notation of sRGB (e.g. '#8080B')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnLAB</code></td>
<td>
<p>logical, return CIELAB coordinates (D65 illuminant)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is vectorized without recycling: i.e. the length of each argument must be the same. Both functions will pad output with NA if there are any NA present in the inputs.
</p>
<p>Neutral hues are approximated by greyscale shades ranging from 20\
</p>
<p>Gley soil colors that are missing a chroma will not be correctly interpreted. Consider using a chroma of 1.
Non-standard Munsell notation (e.g. '7.9YR 2.7/2.0') can be matched (nearest-neighbor, no interpolation) to the closest color within the <code>munsell</code> sRGB/CIELAB look-up table via <code>getClosestMunsellChip()</code>. A more accurate estimate of sRGB values from non-standard notation can be achieved with the <a href="https://CRAN.R-project.org/package=munsellinterpol">munsellinterpol</a> package.
</p>
<p>See examples below.
</p>


<h3>Value</h3>

<p>A vector of R colors is returned that is the same length as the input data. When <code>return_triplets = TRUE</code> and/or <code>returnLAB = TRUE</code>, then a <code>data.frame</code> (of sample length as input) is returned.
</p>


<h3>Note</h3>

<p>Care should be taken when using the resulting sRGB values; they are close to their Munsell counterparts, but will vary based on your monitor and ambient lighting conditions. Also, the value used for <code>maxColorValue</code> will affect the brightness of the colors. Th default value (1) will usually give acceptable results, but can be adjusted to force the colors closer to what the user thinks they should look like.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>References</h3>


<ul>
<li> <p><a href="http://www.brucelindbloom.com/index.html?ColorCalcHelp.html">http://www.brucelindbloom.com/index.html?ColorCalcHelp.html</a>
</p>
</li>
<li> <p><a href="https://www.munsellcolourscienceforpainters.com/MunsellAndKubelkaMunkToolbox/MunsellAndKubelkaMunkToolbox.html">https://www.munsellcolourscienceforpainters.com/MunsellAndKubelkaMunkToolbox/MunsellAndKubelkaMunkToolbox.html</a>
</p>
</li>
<li> <p><a href="https://www.rit.edu/science/munsell-color-lab">https://www.rit.edu/science/munsell-color-lab</a>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
# neutral hues (N) can be defined with chroma of 0 or NA 
g &lt;- expand.grid(hue='N', value=2:8, chroma=0, stringsAsFactors=FALSE)
(m &lt;- munsell2rgb(g$hue, g$value, g$chroma))
soilPalette(m)

# back-transform
rgb2munsell(t(col2rgb(m)) / 255)


# basic example
d &lt;- expand.grid(hue='10YR', value=2:8, chroma=1:8, stringsAsFactors=FALSE)
d$color &lt;- with(d, munsell2rgb(hue, value, chroma))

# similar to the 10YR color book page
plot(value ~ chroma, data=d, col=d$color, pch=15, cex=3)

# multiple pages of hue:
hues &lt;- c('2.5YR','5YR','7.5YR','10YR')
d &lt;- expand.grid(hue=hues, value=c(2, 2.5, 3:8), chroma=seq(2,8,by=2), stringsAsFactors=FALSE)
# convert Munsell -&gt; sRGB
d$color &lt;- with(d, munsell2rgb(hue, value, chroma))

# extract CIELAB coordinates
with(d, munsell2rgb(hue, value, chroma, returnLAB=TRUE))

# plot: note that we are setting panel order from red --&gt; yellow
library(lattice)
xyplot(value ~ factor(chroma) | factor(hue, levels=hues),
       main="Common Soil Colors", layout=c(4,1), scales=list(alternating=1),
       strip=strip.custom(bg=grey(0.85)),
       data=d, as.table=TRUE, subscripts=TRUE, xlab='Chroma', ylab='Value',
       panel=function(x, y, subscripts, ...)
       {
         panel.xyplot(x, y, pch=15, cex=4, col=d$color[subscripts])
       }
)


# soils example
data(sp1)

# convert colors
sp1$soil_color &lt;- with(sp1, munsell2rgb(hue, value, chroma))

# simple plot, may need to tweak gamma-correction...
image(matrix(1:nrow(sp1)), axes=FALSE, col=sp1$soil_color, main='Soil Colors')

# convert into a more useful color space
# you will need the colorspace package for this to work
if(require(colorspace)) {
  # keep RGB triplets from conversion
  sp1.rgb &lt;- with(sp1, munsell2rgb(hue, value, chroma, return_triplets=TRUE))
  
  # convert into LAB color space
  sp1.lab &lt;- as(with(sp1.rgb, sRGB(r,g,b)), 'LAB')
  plot(sp1.lab)
}

# convert a non-standard color to closest "chip" in `munsell` look-up table
getClosestMunsellChip('7.9YR 2.7/2.0', convertColors = FALSE)
# convert directly to R color
getClosestMunsellChip('7.9YR 2.7/2.0')
</code></pre>


</div>