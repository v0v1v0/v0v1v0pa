<div class="container">

<table style="width: 100%;"><tr>
<td>CMA0</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>CMA0 constructor.</h2>

<h3>Description</h3>

<p>Constructs a basic CMA (continuous multiple-interval measures of medication
availability/gaps) object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CMA0(
  data = NULL,
  ID.colname = NA,
  event.date.colname = NA,
  event.duration.colname = NA,
  event.daily.dose.colname = NA,
  medication.class.colname = NA,
  medication.groups = NULL,
  flatten.medication.groups = FALSE,
  medication.groups.colname = ".MED_GROUP_ID",
  carryover.within.obs.window = NA,
  carryover.into.obs.window = NA,
  carry.only.for.same.medication = NA,
  consider.dosage.change = NA,
  followup.window.start = 0,
  followup.window.start.unit = c("days", "weeks", "months", "years")[1],
  followup.window.start.per.medication.group = FALSE,
  followup.window.duration = 365 * 2,
  followup.window.duration.unit = c("days", "weeks", "months", "years")[1],
  observation.window.start = 0,
  observation.window.start.unit = c("days", "weeks", "months", "years")[1],
  observation.window.duration = 365 * 2,
  observation.window.duration.unit = c("days", "weeks", "months", "years")[1],
  date.format = "%m/%d/%Y",
  summary = "Base CMA object",
  suppress.warnings = FALSE,
  suppress.special.argument.checks = FALSE,
  arguments.that.should.not.be.defined = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <em><code>data.frame</code></em> containing the medication events
(prescribing or dispensing) used to compute the CMA. Must contain, at a
minimum, the patient unique ID, the event date and duration, and might also
contain the daily dosage and medication type (the actual column names are
defined in the following four parameters).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ID.colname</code></td>
<td>
<p>A <em>string</em>, the name of the column in <code>data</code>
containing the unique patient ID, or <code>NA</code> if not defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event.date.colname</code></td>
<td>
<p>A <em>string</em>, the name of the column in
<code>data</code> containing the start date of the event (in the format given in
the <code>date.format</code> parameter), or <code>NA</code> if not defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event.duration.colname</code></td>
<td>
<p>A <em>string</em>, the name of the column in
<code>data</code> containing the event duration (in days), or <code>NA</code> if not
defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event.daily.dose.colname</code></td>
<td>
<p>A <em>string</em>, the name of the column in
<code>data</code> containing the prescribed daily dose, or <code>NA</code> if not defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>medication.class.colname</code></td>
<td>
<p>A <em>string</em>, the name of the column in
<code>data</code> containing the classes/types/groups of medication, or <code>NA</code>
if not defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>medication.groups</code></td>
<td>
<p>A <em>vector</em> of characters defining medication
groups or the name of a column in <code>data</code> that defines such groups.
The names of the vector are the medication group unique names, while
the content defines them as logical expressions. While the names can be any
string of characters except "}", it is recommended to stick to the rules for
defining vector names in <code>R</code>. For example,
<code>c("A"="CATEGORY == 'medA'", "AA"="{A} &amp; PERDAY &lt; 4"</code> defines two
medication groups: <em>A</em> which selects all events of type "medA", and
<em>B</em> which selects all events already defined by "A" but with a daily
dose lower than 4. If <code>NULL</code>, no medication groups are defined. If
medication groups are defined, there is one CMA estimate for each group;
moreover, there is a special group <em>__ALL_OTHERS__</em> automatically defined
containing all observations <em>not</em> covered by any of the explicitly defined
groups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flatten.medication.groups</code></td>
<td>
<p><em>Logical</em>, if <code>FALSE</code> (the default)
then the <code>CMA</code> and <code>event.info</code> components of the object are lists
with one medication group per element; otherwise, they are <code>data.frame</code>s
with an extra column containing the medication group (its name is given by
<code>medication.groups.colname</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>medication.groups.colname</code></td>
<td>
<p>a <em>string</em> (defaults to ".MED_GROUP_ID")
giving the name of the column storing the group name when
<code>flatten.medication.groups</code> is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>carryover.within.obs.window</code></td>
<td>
<p><em>Logical</em>, if <code>TRUE</code> consider
the carry-over within the observation window, or <code>NA</code> if not defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>carryover.into.obs.window</code></td>
<td>
<p><em>Logical</em>, if <code>TRUE</code> consider the
carry-over from before the starting date of the observation window, or
<code>NA</code> if not defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>carry.only.for.same.medication</code></td>
<td>
<p><em>Logical</em>, if <code>TRUE</code> the
carry-over applies only across medications of the same type, or <code>NA</code>
if not defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>consider.dosage.change</code></td>
<td>
<p><em>Logical</em>, if <code>TRUE</code> the carry-over
is adjusted to reflect changes in dosage, or <code>NA</code> if not defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>followup.window.start</code></td>
<td>
<p>If a <em><code>Date</code></em> object, it represents
the actual start date of the follow-up window; if a <em>string</em> it is the
name of the column in <code>data</code> containing the start date of the follow-up
window either as the numbers of <code>followup.window.start.unit</code> units
after the first event (the column must be of type <code>numeric</code>) or as
actual dates (in which case the column must be of type <code>Date</code> or a string
that conforms to the format specified in <code>date.format</code>); if a
<em>number</em> it is the number of time units defined in the
<code>followup.window.start.unit</code> parameter after the begin of the
participant's first event; or <code>NA</code> if not defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>followup.window.start.unit</code></td>
<td>
<p>can be either <em>"days"</em>,
<em>"weeks"</em>, <em>"months"</em> or <em>"years"</em>, and represents the time
units that <code>followup.window.start</code> refers to (when a number), or
<code>NA</code> if not defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>followup.window.start.per.medication.group</code></td>
<td>
<p>a <em>logical</em>: if there are
medication groups defined and this is <code>TRUE</code>, then the first event
considered for the follow-up window start is relative to each medication group
separately, otherwise (the default) it is relative to the patient.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>followup.window.duration</code></td>
<td>
<p>either a <em>number</em> representing the
duration of the follow-up window in the time units given in
<code>followup.window.duration.unit</code>, or a <em>string</em> giving the column
containing these numbers. Should represent a period for which relevant
medication events are recorded accurately (e.g. not extend after end of
relevant treatment, loss-to-follow-up or change to a health care provider
not covered by the database).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>followup.window.duration.unit</code></td>
<td>
<p>can be either <em>"days"</em>,
<em>"weeks"</em>, <em>"months"</em> or <em>"years"</em>, and represents the time
units that <code>followup.window.duration</code> refers to, or <code>NA</code> if not
defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observation.window.start, observation.window.start.unit, observation.window.duration, observation.window.duration.unit</code></td>
<td>
<p>the definition of the observation window
(see the follow-up window parameters above for details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date.format</code></td>
<td>
<p>A <em>string</em> giving the format of the dates used in
the <code>data</code> and the other parameters; see the <code>format</code> parameters
of the <code>as.Date</code> function for details (NB, this concerns
only the dates given as strings and not as <code>Date</code> objects).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summary</code></td>
<td>
<p>Metadata as a <em>string</em>, briefly describing this CMA.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suppress.warnings</code></td>
<td>
<p><em>Logical</em>, if <code>TRUE</code> don't show any
warnings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suppress.special.argument.checks</code></td>
<td>
<p><em>Logical</em> parameter for internal
use; if <code>FALSE</code> (default) check if the important columns in the <code>data</code>
have some of the reserved names, if <code>TRUE</code> this check is not performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arguments.that.should.not.be.defined</code></td>
<td>
<p>a <em>list</em> of argument names
and pre-defined valuesfor which a warning should be thrown if passed to the
function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other possible parameters</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In most cases this should not be done directly by the user,
but it is used internally by the other CMAs.
</p>


<h3>Value</h3>

<p>An <code>S3</code> object of class <code>CMA0</code> with the following fields:
</p>

<ul>
<li> <p><code>data</code> The actual event (prescribing or dispensing) data, as
given by the <code>data</code> parameter.
</p>
</li>
<li> <p><code>ID.colname</code> the name of the column in <code>data</code> containing
the unique patient ID, as given by the <code>ID.colname</code> parameter.
</p>
</li>
<li> <p><code>event.date.colname</code> the name of the column in <code>data</code>
containing the start date of the event (in the format given in the
<code>date.format</code> parameter), as given by the <code>event.date.colname</code>
parameter.
</p>
</li>
<li> <p><code>event.duration.colname</code> the name of the column in <code>data</code>
containing the event duration (in days), as given by the
<code>event.duration.colname</code> parameter.
</p>
</li>
<li> <p><code>event.daily.dose.colname</code> the name of the column in <code>data</code>
containing the prescribed daily dose, as given by the
<code>event.daily.dose.colname</code> parameter.
</p>
</li>
<li> <p><code>medication.class.colname</code> the name of the column in <code>data</code>
containing the classes/types/groups of medication, as given by the
<code>medication.class.colname</code> parameter.
</p>
</li>
<li> <p><code>carryover.within.obs.window</code> whether to consider the carry-over
within the observation window, as given by the
<code>carryover.within.obs.window</code> parameter.
</p>
</li>
<li> <p><code>carryover.into.obs.window</code> whether to consider the carry-over
from before the starting date of the observation window, as given by the
<code>carryover.into.obs.window</code> parameter.
</p>
</li>
<li> <p><code>carry.only.for.same.medication</code> whether the carry-over applies
only across medication of the same type, as given by the
<code>carry.only.for.same.medication</code> parameter.
</p>
</li>
<li> <p><code>consider.dosage.change</code> whether the carry-over is adjusted to
reflect changes in dosage, as given by the <code>consider.dosage.change</code>
parameter.
</p>
</li>
<li> <p><code>followup.window.start</code> the beginning of the follow-up window,
as given by the <code>followup.window.start</code> parameter.
</p>
</li>
<li> <p><code>followup.window.start.unit</code> the time unit of the
<code>followup.window.start</code>, as given by the
<code>followup.window.start.unit</code> parameter.
</p>
</li>
<li> <p><code>followup.window.duration</code> the duration of the follow-up window,
as given by the <code>followup.window.duration</code> parameter.
</p>
</li>
<li> <p><code>followup.window.duration.unit</code> the time unit of the
<code>followup.window.duration</code>, as given by the
<code>followup.window.duration.unit</code> parameter.
</p>
</li>
<li> <p><code>observation.window.start</code> the beginning of the observation
window, as given by the <code>observation.window.start</code> parameter.
</p>
</li>
<li> <p><code>observation.window.start.unit</code> the time unit of the
<code>observation.window.start</code>, as given by the
<code>observation.window.start.unit</code> parameter.
</p>
</li>
<li> <p><code>observation.window.duration</code> the duration of the observation
window, as given by the <code>observation.window.duration</code> parameter.
</p>
</li>
<li> <p><code>observation.window.duration.unit</code> the time unit of the
<code>observation.window.duration</code>, as given by the <code>observation.window.duration.unit</code> parameter.
</p>
</li>
<li> <p><code>date.format</code> the format of the dates, as given by the
<code>date.format</code> parameter.
</p>
</li>
<li> <p><code>summary</code> the metadata, as given by the <code>summary</code>
parameter.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">cma0 &lt;- CMA0(data=med.events,
             ID.colname="PATIENT_ID",
             event.date.colname="DATE",
             event.duration.colname="DURATION",
             event.daily.dose.colname="PERDAY",
             medication.class.colname="CATEGORY",
             followup.window.start=0,
             followup.window.start.unit="days",
             followup.window.duration=2*365,
             followup.window.duration.unit="days",
             observation.window.start=30,
             observation.window.start.unit="days",
             observation.window.duration=365,
             observation.window.duration.unit="days",
             date.format="%m/%d/%Y",
             summary="Base CMA");
</code></pre>


</div>