<div class="container">

<table style="width: 100%;"><tr>
<td>sa_pairing_generalized</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Automatic Item Pairing Method in Forced-Choice Test Construction</h2>

<h3>Description</h3>

<p>Automatic construction of forced-choice tests based on
Simulated Annealing algorithm. Allows items to be:
</p>
<p>1. Matched in either pairs, triplets, quadruplets or blocks of any size;
</p>
<p>2. Matched based on any number of item-level characteristics
(e.g. Social desirability, factor) based on any customized criteria;
</p>
<p>3. Matched based on person-level inter-item agreement (IIA) metrics.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sa_pairing_generalized(block, total_items, Temperature,
                              eta_Temperature = 0.01, r = 0.999,
                              end_criteria = 10^(-6),
                              item_chars, weights, FUN,
                              n_exchange = 2, prob_newitem = 0.25,
                              use_IIA = FALSE, rater_chars,
                              iia_weights = c(BPlin = 1, BPquad = 1,
                              AClin = 1, ACquad = 1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>block</code></td>
<td>
<p>An <em>n</em> by <em>k</em> integer matrix,
where <em>n</em> is the number of item blocks
and <em>k</em> is the number of items per block.
</p>
<p>Serves as the initial starting blocks for the automatic pairing method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_items</code></td>
<td>
<p>Integer value. How many items do we sample from
in order to build this <code>block</code>? Should be more than number of unique values
in <code>block</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Temperature</code></td>
<td>
<p>Initial temperature value. Can be left blank and be computed based on
the absolute value of initial energy of <code>block</code> (Recommended), and scaled
by <code>eta_Temperature</code>.
</p>
<p>In general, higher temperature represents a higher probability of
accepting an inferior solution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eta_Temperature</code></td>
<td>
<p>A positive numeric value. The ratio of initial temperature to
initial energy of <code>block</code>, if <code>Temperature</code> is not designated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>A positive numeric value less than 1.
Determines the reduction rate of <code>Temperature</code> after each iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_criteria</code></td>
<td>
<p>A positive numeric value less than 1.
Iteration stops when temperature drops to below <code>end_criteria * Temperature</code>.
Default to be <code class="reqn">10^-6</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>item_chars</code></td>
<td>
<p>An <em>m</em> by <em>r</em> data frame,
where <em>m</em> is the total number of items to sample from,
whether it is included in the block or not,
whereas <em>r</em> is the number of item characteristics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A vector of length <em>r</em> with weights for each
item characteristics in <code>item_chars</code>.
Should provide a weight of 0 for specific characteristics
not of interest, such as item ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>A vector of customized function names for optimizing each
item characteristic within each block, with length <em>r</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_exchange</code></td>
<td>
<p>Integer value. Determines how many blocks are exchanged
in order to produce a new solution for each iteration.
Should be a value larger than 1 and less than <code>nrow(block)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_newitem</code></td>
<td>
<p>A value between <em>0</em> and <em>1</em>.
Probability of choosing the strategy of picking a new item,
when not all candidate items are used to build the FC scale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_IIA</code></td>
<td>
<p>Logical. Are IIA metrics used when performing automatic pairing?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rater_chars</code></td>
<td>
<p>A <em>p</em> by <em>m</em> numeric matrix with scores of each of the
<em>p</em> participants for the <em>m</em> items. Ignored when <code>use_IIA == FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iia_weights</code></td>
<td>
<p>A vector of length 4 indicating weights given to each IIA metric:
</p>
<p>Linearly weighted AC (Gwet, 2008; 2014);
</p>
<p>Quadratic weighted AC;
</p>
<p>Linearly weighted Brennan-Prediger (BP) Index(Brennan &amp; Prediger, 1981; Gwet, 2014);
</p>
<p>Quadratic weighted BP.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing:
</p>

<p><code>block_initial</code> Initial starting block
</p>
<p><code>energy_initial</code> Initial energy for <code>block_initial</code>
</p>
<p><code>block_final</code> Final paired block after optimization by SA
</p>
<p><code>energy_final</code> Final energy for <code>block_final</code>

</p>


<h3>Note</h3>

<p>The essence of SA is the probablistic acceptance of solutions inferior to
the current state, which avoids getting stuck in local maxima/minima.
It is also recommended to try out different values of
<code>weights, iia_weights, eta_Temperature</code> to find out the best
combination of initial temperature and energy value
in order to provide optimally paired blocks.
</p>
<p>Use <code>cal_block_energy_with_iia</code> if inter-item agreement
(IIA) metrics are needed.
</p>


<h3>Author(s)</h3>

<p>Mengtong Li
</p>


<h3>References</h3>

<p>Brennan, R. L., &amp; Prediger, D. J. (1981). Coefficient kappa: Some uses, misuses,
and alternatives. <em>Educational and Psychological Measurement, 41</em>(3),
687-699. https://doi.org/10.1177/001316448104100307
</p>
<p>Gwet, K. L. (2008). Computing inter rater reliability and its
variance in the presence of high agreement.
<em>British Journal of Mathematical and Statistical Psychology, 61</em>(1),
29-48. https://doi.org/10.1348/000711006X126600
</p>
<p>Gwet, K. L. (2014). <em>Handbook of inter-rater reliability (4th ed.):
The definitive guide to measuring the extent of agreement among raters</em>.
Gaithersburg, MD: Advanced Analytics Press.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Simulate 60 items loading on different Big Five dimensions,
## with different mean and item difficulty

item_dims &lt;- sample(c("Openness","Conscientiousness","Neuroticism",
                     "Extraversion","Agreeableness"), 60, replace = TRUE)
item_mean &lt;- rnorm(60, 5, 2)
item_difficulty &lt;- runif(60, -1, 1)


item_df &lt;- data.frame(Dimensions = item_dims,
                     Mean = item_mean, Difficulty = item_difficulty)
solution &lt;- make_random_block(60, 60, 3)


item_responses &lt;- matrix(sample(seq(1:5), 600*60, replace = TRUE), nrow = 60, byrow = TRUE)

## Automatic pairing, without use of IIAs
## See ?facfun for information about what it does

sa_pairing_generalized(solution, 60, eta_Temperature = 0.01,
                                   r = 0.999, end_criteria = 0.001,
                                   weights = c(1,1,1),
                                   item_chars = item_df,
                                   FUN = c("facfun", "var", "var"))


## Automatic pairing, with IIAs

sa_pairing_generalized(solution, 60, eta_Temperature = 0.01,
                                   r = 0.999, end_criteria = 0.001,
                                   weights = c(1,1,1),
                                   item_chars = item_df,
                                   FUN = c("facfun", "var", "var"),
                                   use_IIA = TRUE,
                                   rater_chars = item_responses,
                                   iia_weights = c(BPlin = 1, BPquad = 1,
                                   AClin = 1, ACquad = 1))



</code></pre>


</div>