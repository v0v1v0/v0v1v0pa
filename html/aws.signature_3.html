<div class="container">

<table style="width: 100%;"><tr>
<td>canonical_request</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Construct a Canonical Request</h2>

<h3>Description</h3>

<p>Construct a Canonical Request from request elements
</p>


<h3>Usage</h3>

<pre><code class="language-R">canonical_request(
  verb,
  canonical_uri = "",
  query_args = list(),
  canonical_headers,
  request_body = "",
  signed_body = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>verb</code></td>
<td>
<p>A character string containing the HTTP verb being used in the request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>canonical_uri</code></td>
<td>
<p>A character string containing the “canonical URI”, meaning the contents of the API request URI excluding the host and the query parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>query_args</code></td>
<td>
<p>A named list of character strings containing the query string values (if any) used in the API request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>canonical_headers</code></td>
<td>
<p>A named list of character strings containing the headers used in the request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>request_body</code></td>
<td>
<p>The body of the HTTP request, or a filename. If a filename, hashing is performed on the file without reading it into memory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>signed_body</code></td>
<td>
<p>Sign the body request and add the correct header (x-amz-content-sha256) to the list of headers</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function creates a “Canonical Request”, which is part of the Signature Version 4. Users probably only need to use the <code>signature_v4_auth</code> function to generate signatures.
</p>


<h3>Value</h3>

<p>A list containing
</p>


<h3>Author(s)</h3>

<p>Thomas J. Leeper &lt;thosjleeper@gmail.com&gt;
</p>


<h3>References</h3>

<p><a href="http://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html">Create a Canonical Request For Signature Version 4</a>
</p>


<h3>See Also</h3>

<p><code>signature_v4</code>, <code>signature_v4_auth</code>
</p>
<p><code>link{signature_v4_aut}</code>, <code>string_to_sign</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># From AWS documentation
# http://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html
fromDocs &lt;- "POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:iam.amazonaws.com
x-amz-date:20110909T233600Z

content-type;host;x-amz-date
b6359072c78d70ebee1e81adcbab4f01bf2c23245fa365ef83fe8f1f955085e2"

hdrs &lt;- list(`Content-Type` = "application/x-www-form-urlencoded; charset=utf-8",
             Host = "iam.amazonaws.com",
             `x-amz-date` = "20110909T233600Z")
r &lt;- canonical_request(verb = "POST",
                       canonical_uri = "/",
                       query_args = list(),
                       canonical_headers = hdrs,
                       request_body = "Action=ListUsers&amp;Version=2010-05-08")

identical(fromDocs, r$canonical)
</code></pre>


</div>