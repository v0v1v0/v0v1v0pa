<div class="container">

<table style="width: 100%;"><tr>
<td>hierCredibility</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Hierarchical credibility model of Jewell</h2>

<h3>Description</h3>

<p>Fit a random effects model, without contract-specific risk factors,  using the hierarchical credibility model of Jewell.
</p>


<h3>Usage</h3>

<pre><code class="language-R">hierCredibility(
  Yijkt,
  wijkt,
  sector,
  group,
  data,
  muHat = NULL,
  type = c("additive", "multiplicative"),
  returnData = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Yijkt</code></td>
<td>
<p>variable name of the response variable (the loss cost within actuarial applications).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wijkt</code></td>
<td>
<p>variable name of the exposure weight.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sector</code></td>
<td>
<p>variable name of the first hierarchical level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>variable name of the second hierarchical level that is nested within the first hierarchical level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>an object that is coercible by <code>as.data.table</code>, containing the variables in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>muHat</code></td>
<td>
<p>estimate for the intercept term. Default is <code>NULL</code> and in this case, the estimator as given in Ohlsson (2005) is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>specifies whether the additive (Dannenburg, 1996) or multiplicative (Ohlsson, 2005) formulation of the hierarchical credibility model is used. Default is additive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnData</code></td>
<td>
<p>Logical, indicates whether the data object has to be returned. Default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of type <code>hierCredibility</code> with the following slots:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>the matched call</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Whether additive or multiplicative hierarchical credibility model is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Variances</code></td>
<td>
<p>The estimated variance components. <code>s2</code> is the estimated variance of the individual contracts,
<code>tausq</code> the estimate of <code class="reqn">Var(V[j])</code> and <code>nusq</code> is the estimate of <code class="reqn">Var(V[jk])</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Means</code></td>
<td>
<p>The estimated averages at the portfolio level (intercept term <code class="reqn">\mu</code>), at the first
hierarchical level (<code class="reqn">bar(Y)[\%.\% j \%.\% \%.\%]^z</code>) and at the second hierarchical level (<code class="reqn">bar(Y)[\%.\% jk \%.\%]</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Weights</code></td>
<td>
<p>The weights at the first hierarchical level <code class="reqn">z[j\%.\%]</code> and at the second hierarchical level <code class="reqn">w[\%.\%jk\%.\%]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Credibility</code></td>
<td>
<p>The credibility weights at the first hierarchical level <code class="reqn">q[j\%.\%]</code> and at the second hierarchical level <code class="reqn">z[jk]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Premiums</code></td>
<td>
<p>The overall expectation <code class="reqn">widehat(\mu)</code>, sector expectation <code class="reqn">widehat(V)[j]</code> and group expectation <code class="reqn">widehat(V)[jk]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Relativity</code></td>
<td>
<p>The estimated random effects <code class="reqn">widehat(U)[j]</code> and <code class="reqn">widehat(U)[jk]</code> of the sector and group, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RawResults</code></td>
<td>
<p>Objects of type <code>data.table</code> with all intermediate results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fitted.values</code></td>
<td>
<p>the fitted mean values, resulting from the model fit.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Campo, B.D.C. and Antonio, Katrien (2023). Insurance pricing with hierarchically structured data an illustration with a workers' compensation insurance portfolio. <em>Scandinavian Actuarial Journal</em>, doi: 10.1080/03461238.2022.2161413
</p>
<p>Dannenburg, D. R., Kaas, R. and Goovaerts, M. J. (1996). <em>Practical actuarial credibility models</em>. Amsterdam: IAE (Institute of Actuarial Science and Econometrics of the University of Amsterdam).
</p>
<p>Jewell, W. S. (1975). <em>The use of collateral data in credibility theory: a hierarchical model</em>. Laxenburg: IIASA.
</p>
<p>Ohlsson, E. (2005). Simplified estimation of structure parameters in hierarchical credibility. <em>Presented at the Zurich ASTIN Colloquium</em>.<a href="http://www.actuaries.org/ASTIN/Colloquia/Zurich/Ohlsson.pdf">http://www.actuaries.org/ASTIN/Colloquia/Zurich/Ohlsson.pdf</a>
</p>


<h3>See Also</h3>

<p><code>hierCredibility-class</code>, <code>fitted.hierCredibility</code>, <code>predict.hierCredibility</code>, <code>ranef-actuaRE</code>,
<code>weights-actuaRE</code>, <code>hierCredTweedie</code>, <code>hierCredGLM</code>, <code>cpglm</code>, <code>plotRE</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(actuar)
library(actuaRE)
data("hachemeister", package = "actuar")
Df = as.data.frame(hachemeister)
X  = as.data.frame(cbind(cohort = c(1, 2, 1, 2, 2), hachemeister))
Df = reshape(X, idvar = "state", varying = list(paste0("ratio.", 1:12),
 paste0("weight.", 1:12)), direction = "long")
fitActuar  = cm(~ cohort + cohort:state, data = X, ratios = ratio.1:ratio.12,
weights = weight.1:weight.12, method = "Ohlsson")
fitActuaRE = hierCredibility(ratio.1, weight.1, cohort, state, Df)
summary(fitActuar)
summary(fitActuaRE)
</code></pre>


</div>