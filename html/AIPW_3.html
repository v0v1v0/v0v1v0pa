<div class="container">

<table style="width: 100%;"><tr>
<td>AIPW_nuis</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Augmented Inverse Probability Weighting (AIPW) uses tmle or tmle3 as inputs</h2>

<h3>Description</h3>

<p><code>AIPW_nuis</code> class for users to manually input nuisance functions (estimates from the exposure and the outcome models)
</p>


<h3>Details</h3>

<p>Create an AIPW_nuis object that uses users' input nuisance functions from the exposure model <code class="reqn">P(A| W)</code>,
and the outcome models <code class="reqn">P(Y| do(A=0), W)</code> and <code class="reqn">P(Y| do(A=1), W.Q)</code>:
</p>
<p style="text-align: center;"><code class="reqn">
     \psi(a) = E{[ I(A=a) / P(A=a|W) ] * [Y-P(Y=1|A,W)] + P(Y=1| do(A=a),W) }
     </code>
</p>

<p>Note: If outcome is missing, replace (A=a) with (A=a, observed=1) when estimating the propensity scores.
</p>


<h3>Value</h3>

<p><code>AIPW_nuis</code> object
</p>


<h3>Constructor</h3>

<p><code>AIPW$new(Y = NULL, A = NULL, tmle_fit = NULL, verbose = TRUE)</code>
</p>


<h4>Constructor Arguments</h4>


<table>
<tr>
<td style="text-align: left;">
<strong>Argument</strong>      </td>
<td style="text-align: left;">   <strong>Type</strong>     </td>
<td style="text-align: left;">     <strong>Details</strong> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>Y</code>               </td>
<td style="text-align: left;">   Integer           </td>
<td style="text-align: left;">     A vector of outcome (binary (0, 1) or continuous) </td>
</tr>
<tr>
<td style="text-align: left;">
<code>A</code>               </td>
<td style="text-align: left;">   Integer           </td>
<td style="text-align: left;">     A vector of binary exposure (0 or 1) </td>
</tr>
<tr>
<td style="text-align: left;">
<code>mu0</code>             </td>
<td style="text-align: left;">   Numeric             </td>
<td style="text-align: left;">    User input of <code class="reqn">P(Y=1| do(A = 0),W_Q)</code> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>mu1</code>             </td>
<td style="text-align: left;">   Numeric             </td>
<td style="text-align: left;">    User input of <code class="reqn">P(Y=1| do(A = 1),W_Q)</code> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>raw_p_score</code>     </td>
<td style="text-align: left;">   Numeric             </td>
<td style="text-align: left;">    User input of <code class="reqn">P(A=a|W_g)</code> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>verbose</code>         </td>
<td style="text-align: left;">   Logical           </td>
<td style="text-align: left;">    Whether to print the result (Default = TRUE) </td>
</tr>
<tr>
<td style="text-align: left;">
<code>stratified_fitted</code>  </td>
<td style="text-align: left;">   Logical           </td>
<td style="text-align: left;">    Whether mu0 &amp; mu1 was estimated only using <code>A=0</code> &amp; <code>A=1</code> (Default = FALSE) </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>Public Methods</h3>


<table>
<tr>
<td style="text-align: left;">
<strong>Methods</strong>      </td>
<td style="text-align: left;">   <strong>Details</strong>                                      </td>
<td style="text-align: left;"> <strong>Link</strong>     </td>
</tr>
<tr>
<td style="text-align: left;">
<code>summary()</code>      </td>
<td style="text-align: left;">   Summary of the average treatment effects from AIPW    </td>
<td style="text-align: left;">   summary.AIPW_base</td>
</tr>
<tr>
<td style="text-align: left;">
<code>plot.p_score()</code> </td>
<td style="text-align: left;">   Plot the propensity scores by exposure status         </td>
<td style="text-align: left;">   plot.p_score</td>
</tr>
<tr>
<td style="text-align: left;">
<code>plot.ip_weights()</code> </td>
<td style="text-align: left;">   Plot the inverse probability weights using truncated propensity scores  </td>
<td style="text-align: left;">   plot.ip_weights</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>Public Variables</h3>


<table>
<tr>
<td style="text-align: left;">
<strong>Variable</strong>     </td>
<td style="text-align: left;">   <strong>Generated by</strong>      </td>
<td style="text-align: left;">     <strong>Return</strong> </td>
</tr>
<tr>
<td style="text-align: left;">
<code>n</code>              </td>
<td style="text-align: left;">   Constructor                </td>
<td style="text-align: left;">     Number of observations </td>
</tr>
<tr>
<td style="text-align: left;">
<code>obs_est</code>        </td>
<td style="text-align: left;">   Constructor                </td>
<td style="text-align: left;">     Components calculating average causal effects </td>
</tr>
<tr>
<td style="text-align: left;">
<code>estimates</code>      </td>
<td style="text-align: left;">   <code>summary()</code>                </td>
<td style="text-align: left;">     A list of Risk difference, risk ratio, odds ratio </td>
</tr>
<tr>
<td style="text-align: left;">
<code>result</code>         </td>
<td style="text-align: left;">   <code>summary()</code>                </td>
<td style="text-align: left;">     A matrix contains RD, ATT, ATC, RR and OR with their SE and 95%CI </td>
</tr>
<tr>
<td style="text-align: left;">
<code>g.plot</code>         </td>
<td style="text-align: left;">   <code>plot.p_score()</code>           </td>
<td style="text-align: left;">     A density plot of propensity scores by exposure status </td>
</tr>
<tr>
<td style="text-align: left;">
<code>ip_weights.plot</code>         </td>
<td style="text-align: left;">   <code>plot.ip_weights()</code>           </td>
<td style="text-align: left;">     A box plot of inverse probability weights </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h4>Public Variable Details</h4>


<dl>
<dt><code>stratified_fit</code></dt>
<dd>
<p>An indicator for whether the outcome model is fitted stratified by exposure status in the<code>fit()</code> method.
Only when using <code>stratified_fit()</code> to turn on <code>stratified_fit = TRUE</code>, <code>summary</code> outputs average treatment effects among the treated and the controls.</p>
</dd>
<dt><code>obs_est</code></dt>
<dd>
<p>This list includes propensity scores (<code>p_score</code>), counterfactual predictions (<code>mu</code>, <code>mu1</code> &amp; <code>mu0</code>) and efficient influence functions (<code>aipw_eif1</code> &amp; <code>aipw_eif0</code>)</p>
</dd>
<dt><code>g.plot</code></dt>
<dd>
<p>This plot is generated by <code>ggplot2::geom_density</code></p>
</dd>
<dt><code>ip_weights.plot</code></dt>
<dd>
<p>This plot uses truncated propensity scores stratified by exposure status (<code>ggplot2::geom_boxplot</code>)</p>
</dd>
</dl>
</div>