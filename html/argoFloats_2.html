<div class="container">

<table style="width: 100%;"><tr>
<td>applyQC</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply Quality Control Flags</h2>

<h3>Description</h3>

<p>This function examines the quality-control ("QC") flags within an <code>argoFloats</code>
object that was created by <code>readProfiles()</code>.  By default, it replaces all suspicious
data with <code>NA</code> values, so they will not appear in plots or be considered in calculations.
This is an important early step in processing, because suspicious Argo floats commonly
report data that are suspicious based on statistical and physical measures, as
is illustrated in the “Examples” section.
See section 3.3 of Kelley et al. (2021) for more information
about this function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">applyQC(x, flags = NULL, actions = NULL, debug = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an <code>argoFloats</code> object of type <code>"argos"</code>, as created by
<code>readProfiles()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flags</code></td>
<td>
<p>A list specifying flag values upon which actions will be taken. This can take two forms.
</p>
<p>In the first form, the list has named elements each containing a vector of
integers. For example, salinities flagged with values of 1 or 3:9 would be
specified by flags=list(salinity=c(1,3:9)). Several data items can be
specified, e.g. flags=list(salinity=c(1,3:9), temperature=c(1,3:9)) indicates
that the actions are to take place for both salinity and temperature.
</p>
<p>In the second form, flags is a list holding a single unnamed vector, and this
means to apply the actions to all the data entries. For example,
flags=list(c(1,3:9)) means to apply not just to salinity and temperature, but
to everything within the data slot.
</p>
<p>If flags is NULL then it is set to <code>list(c(0,3,4,6,7,9))</code>, which means to
eliminate data that are considered bad (in some degree) or for which QC was
not performed. Following Section 3.2.1 of reference 1, the flag
meanings are as follows.
</p>

<ul>
<li>
<p> 0: No QC was performed
</p>
</li>
<li>
<p> 1: Good data
</p>
</li>
<li>
<p> 2: Probably good data
</p>
</li>
<li>
<p> 3: Bad data that are potentially correctable
</p>
</li>
<li>
<p> 4: Bad data
</p>
</li>
<li>
<p> 5: Value changed
</p>
</li>
<li>
<p> 6: Not used
</p>
</li>
<li>
<p> 7: Not used
</p>
</li>
<li>
<p> 8: Estimated value
</p>
</li>
<li>
<p> 9: Missing data
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>actions</code></td>
<td>
<p>the actions to perform. The default, <code>NULL</code>, means to use the
actions set up by <code>readProfiles()</code>, which, by default. causes any data
flagged as suspicious to be set to <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>debug</code></td>
<td>
<p>an integer passed to <code>oce::handleFlags,argo-method()</code>.  If this
is set to a positive value, then some debugging information will be printed
as the processing is done.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The work is done by using <code>oce::handleFlags,argo-method()</code>
on each of the profiles stored within the object. In most cases, only
the object needs to be specified, for the default actions coincide with
common conventions for flags in Argo data.
</p>


<h3>Value</h3>

<p>A copy of <code>x</code> but with each of the objects within its <code>data</code> slot
having been passed through <code>oce::handleFlags,argo-method()</code>.
</p>


<h3>Author(s)</h3>

<p>Dan Kelley
</p>


<h3>References</h3>


<ol>
<li>
<p> Argo Data Management. “Argo User’s Manual.” Ifremer, July 5, 2022.
https://doi.org/10.13155/29825.
</p>
</li>
<li>
<p> Kelley, D. E., Harbin, J., &amp; Richards, C. (2021). argoFloats: An R package
for analyzing Argo data. Frontiers in Marine Science, (8), 636922.
<a href="https://doi.org/10.3389/fmars.2021.635922">doi:10.3389/fmars.2021.635922</a>
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R"># Demonstrate applyQC to a built-in file
library(argoFloats)
f &lt;- system.file("extdata", "SR2902204_131.nc", package="argoFloats")
raw &lt;- readProfiles(f)
clean &lt;- applyQC(raw)
oldpar &lt;- par(no.readonly=TRUE)
par(mar=c(3.3, 3.3, 1, 1), mgp=c(2, 0.7, 0))
plot(raw, col="red", which="TS")
points(clean[[1]][["SA"]], clean[[1]][["CT"]], pch=20)
legend("topleft", pch=20, cex=1,
    col=c("black", "red"), legend=c("OK", "Flagged"), bg="white")
par(oldpar)

</code></pre>


</div>