<div class="container">

<table style="width: 100%;"><tr>
<td>add_transactions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add transactions to an experience study</h2>

<h3>Description</h3>

<p>Attach summarized transactions to a data frame with
exposure-level records.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_transactions(
  .data,
  trx_data,
  col_pol_num = "pol_num",
  col_trx_date = "trx_date",
  col_trx_type = "trx_type",
  col_trx_amt = "trx_amt"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>A data frame with exposure-level records with the class
<code>exposed_df</code>. Use <code>as_exposed_df()</code> to convert a data frame to an
<code>exposed_df</code> object if necessary.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trx_data</code></td>
<td>
<p>A data frame containing transactions details. This data
frame must have columns for policy numbers, transaction dates, transaction
types, and transaction amounts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_pol_num</code></td>
<td>
<p>Name of the column in <code>trx_data</code> containing the policy
number</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_trx_date</code></td>
<td>
<p>Name of the column in <code>trx_data</code> containing the
transaction date</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_trx_type</code></td>
<td>
<p>Name of the column in <code>trx_data</code> containing the
transaction type</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_trx_amt</code></td>
<td>
<p>Name of the column in <code>trx_data</code> containing the
transaction amount</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function attaches transactions to an <code>exposed_df</code> object.
Transactions are grouped and summarized such that the number of rows in
the <code>exposed_df</code> object does not change. Two columns are added to the output
for each transaction type. These columns have names of the pattern
<code style="white-space: pre;">⁠trx_n_{*}⁠</code> (transaction counts) and <code style="white-space: pre;">⁠trx_amt_{*}⁠</code> (transaction_amounts).
</p>
<p>Transactions are associated with the <code>exposed_df</code> object by matching
transactions dates with exposure dates ranges found in <code>exposed_df</code>.
</p>
<p>All columns containing dates must be in YYYY-MM-DD format.
</p>


<h3>Value</h3>

<p>An <code>exposed_df</code> object with two new columns containing transaction
counts and amounts for each transaction type found in <code>trx_data</code>. The
<code>exposed_df</code>'s <code>trx_types</code> attributes will be updated to include the new
transaction types found in <code>trx_data.</code>
</p>


<h3>See Also</h3>

<p><code>expose()</code>, <code>as_exposed_df()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">expo &lt;- expose_py(census_dat, "2019-12-31", target_status = "Surrender")
add_transactions(expo, withdrawals)

</code></pre>


</div>