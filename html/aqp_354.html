<div class="container">

<table style="width: 100%;"><tr>
<td>thicknessOf</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate Thickness of Horizons Matching Logical Criteria</h2>

<h3>Description</h3>

<p>This function calculates the cumulative (<code>method="cumulative"</code>, default) or maximum difference between (<code>method="minmax"</code>) horizons within a profile that match a defined pattern (<code>pattern</code>) or, more generally, any set of horizon-level logical expressions encoded in a function (<code>FUN</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">thicknessOf(
  x,
  pattern = NULL,
  hzdesgn = hzdesgnname(x, required = TRUE),
  method = "cumulative",
  prefix = "",
  thickvar = "thickness",
  depthvars = horizonDepths(x),
  FUN = function(x, pattern, hzdesgn, ...) grepl(pattern, x[[hzdesgn]]),
  na.rm = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <em>SoilProfileCollection</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p><em>character</em>. A pattern to match in <code>hzdesgn</code>; used with the default <code>FUN</code> definition for regular expression pattern matching on horizons.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hzdesgn</code></td>
<td>
<p><em>character</em>. A column containing horizon designations or other horizon-level character label used to identify matches; used with the default <code>FUN</code> definition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p><em>character</em>. Either <code>"cumulative"</code> (default) or <code>"minmax"</code>. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefix</code></td>
<td>
<p><em>character</em>. Column prefix for calculated <code>thickvar</code> (and <code>depthvar</code> for <code>method="minmax"</code>) column results. Default: <code>""</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thickvar</code></td>
<td>
<p><em>character</em> Length <code>1</code>. Column name to use for calculated thickness column. Default: <code>"thickness"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depthvars</code></td>
<td>
<p><em>character</em>. Length <code>2</code>. Column names to use for calculated minimum top depth and maximum bottom depth in <code>method="minmax"</code>. Default: <code>horizonDepths(x)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p><em>function</em>. A function that returns a <em>logical</em> vector equal in length to the number of horizons in <code>x</code>. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p><em>logical</em>. Omit <code>NA</code> values in summaries of thickness and in matching? Default: <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to the matching function <code>FUN</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The two thickness methods currently available are:
</p>

<ul>
<li> <p><code>method="cumulative"</code> (default): cumulative thickness of horizons where <code>FUN</code> returns true
</p>
</li>
<li> <p><code>method="minmax"</code>: maximum bottom depth minus minimum top depth of horizons where <code>FUN</code> returns true
</p>
</li>
</ul>
<p>If a custom function (<code>FUN</code>) is used, it should accept arbitrary additional arguments via an ellipsis (<code>...</code>).
It is not necessary to do anything with arguments, but the result should match the number of horizons found in the input SoilProfileCollection <code>x</code>.
</p>


<h3>Value</h3>

<p>A <em>data.frame</em>-like object (corresponding to the <code>aqp_df_class()</code> of <code>x</code>) with one row per profile in <code>x</code>. First column is always the profile ID which is followed by <code>"thickness"</code>. In <code>method="minmax"</code> the upper and lower boundaries used to calculate <code>"thickness"</code> are also returned as <code>"tmin"</code> and <code>"tmax"</code> columns, respectively.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("jacobs2000")

# cumulative thickness of horizon designations matching "Bt"
thicknessOf(jacobs2000, "Bt")

# maximum bottom depth minus minimum top depth of horizon designations matching "Bt"
thicknessOf(jacobs2000, "Bt", prefix = "Bt_", method = "minmax")

# cumulative thickness of horizon designations matching "A|B"
thicknessOf(jacobs2000, "A|B", prefix = "AorB_")

# maximum bottom depth minus minimum top depth of horizon designations matching "A|B"
thicknessOf(jacobs2000, "A|B", method = "minmax", prefix = "AorB_")
# note that the latter includes the thickness of E horizons between the A and the B

# when using a custom function (be sure to accept ... and consider the effect of NA values)

# calculate cumulative thickness of horizons containing &gt;18% clay
thicknessOf(jacobs2000, prefix = "claygt18_", 
            FUN = function(x, ...) !is.na(x[["clay"]]) &amp; x[["clay"]] &gt; 18)

</code></pre>


</div>