<div class="container">

<table style="width: 100%;"><tr>
<td>add_custom_antimicrobials</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Custom Antimicrobials</h2>

<h3>Description</h3>

<p>With <code>add_custom_antimicrobials()</code> you can add your own custom antimicrobial drug names and codes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_custom_antimicrobials(x)

clear_custom_antimicrobials()
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a data.frame resembling the antibiotics data set, at least containing columns "ab" and "name"</p>
</td>
</tr></table>
<h3>Details</h3>

<p><strong>Important:</strong> Due to how <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> works, the <code>add_custom_antimicrobials()</code> function has to be run in every <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> session - added antimicrobials are not stored between sessions and are thus lost when <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> is exited.
</p>
<p>There are two ways to circumvent this and automate the process of adding antimicrobials:
</p>
<p><strong>Method 1:</strong> Using the package option <code>AMR_custom_ab</code>, which is the preferred method. To use this method:
</p>

<ol>
<li>
<p> Create a data set in the structure of the antibiotics data set (containing at the very least columns "ab" and "name") and save it with <code>saveRDS()</code> to a location of choice, e.g. <code>"~/my_custom_ab.rds"</code>, or any remote location.
</p>
</li>
<li>
<p> Set the file location to the package option <code>AMR_custom_ab</code>: <code>options(AMR_custom_ab = "~/my_custom_ab.rds")</code>. This can even be a remote file location, such as an https URL. Since options are not saved between <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> sessions, it is best to save this option to the <code>.Rprofile</code> file so that it will be loaded on start-up of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>. To do this, open the <code>.Rprofile</code> file using e.g. <code>utils::file.edit("~/.Rprofile")</code>, add this text and save the file:
</p>
<div class="sourceCode r"><pre># Add custom antimicrobial codes:
options(AMR_custom_ab = "~/my_custom_ab.rds")
</pre></div>
<p>Upon package load, this file will be loaded and run through the <code>add_custom_antimicrobials()</code> function.
</p>
</li>
</ol>
<p><strong>Method 2:</strong> Loading the antimicrobial additions directly from your <code>.Rprofile</code> file. Note that the definitions will be stored in a user-specific <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> file, which is a suboptimal workflow. To use this method:
</p>

<ol>
<li>
<p> Edit the <code>.Rprofile</code> file using e.g. <code>utils::file.edit("~/.Rprofile")</code>.
</p>
</li>
<li>
<p> Add a text like below and save the file:
</p>
<div class="sourceCode r"><pre> # Add custom antibiotic drug codes:
 AMR::add_custom_antimicrobials(
   data.frame(ab = "TESTAB",
              name = "Test Antibiotic",
              group = "Test Group")
 )
</pre></div>
</li>
</ol>
<p>Use <code>clear_custom_antimicrobials()</code> to clear the previously added antimicrobials.
</p>


<h3>See Also</h3>

<p><code>add_custom_microorganisms()</code> to add custom microorganisms.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# returns NA and throws a warning (which is suppressed here):
suppressWarnings(
  as.ab("testab")
)

# now add a custom entry - it will be considered by as.ab() and
# all ab_*() functions
add_custom_antimicrobials(
  data.frame(
    ab = "TESTAB",
    name = "Test Antibiotic",
    # you can add any property present in the
    # 'antibiotics' data set, such as 'group':
    group = "Test Group"
  )
)

# "testab" is now a new antibiotic:
as.ab("testab")
ab_name("testab")
ab_group("testab")

ab_info("testab")


# Add Co-fluampicil, which is one of the many J01CR50 codes, see
# https://www.whocc.no/ddd/list_of_ddds_combined_products/
add_custom_antimicrobials(
  data.frame(
    ab = "COFLU",
    name = "Co-fluampicil",
    atc = "J01CR50",
    group = "Beta-lactams/penicillins"
  )
)
ab_atc("Co-fluampicil")
ab_name("J01CR50")

# even antibiotic selectors work
x &lt;- data.frame(
  random_column = "some value",
  coflu = as.sir("S"),
  ampicillin = as.sir("R")
)
x
x[, betalactams()]

</code></pre>


</div>