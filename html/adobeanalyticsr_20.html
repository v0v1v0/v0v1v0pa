<div class="container">

<table style="width: 100%;"><tr>
<td>cm_build</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build a Calculated Metric</h2>

<h3>Description</h3>

<p>This function combines formulas to create calculated metrics in Adobe Analytics
</p>


<h3>Usage</h3>

<pre><code class="language-R">cm_build(
  name = NULL,
  description = NULL,
  formula = NULL,
  seg_filter = NULL,
  polarity = "positive",
  precision = 0,
  type = "decimal",
  create_cm = FALSE,
  tagNames = NULL,
  internal = FALSE,
  debug = FALSE,
  rsid = Sys.getenv("AW_REPORTSUITE_ID"),
  company_id = Sys.getenv("AW_COMPANY_ID")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>This is the name of the new calculated metric (required)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>description</code></td>
<td>
<p>This is the description of the segment (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Formulas are list objects created using the <code>cm_formula()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seg_filter</code></td>
<td>
<p>A segment filter to be added to a metric in the formula</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>polarity</code></td>
<td>
<p>Also known as 'Show Upward Trend As' in the UI. Options include 'positive' (default) or 'negative'.
This metric polarity setting shows whether Analytics should consider an upward trend in the metric as good (green) or bad (red).
As a result, the report’s graph will show as green or red when it’s going up.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>precision</code></td>
<td>
<p>Shows how many decimal places will be shown in the report.
The maximum number of decimal places you can specify is 10. Also known as 'Decimal Places' in the UI.
Default is <code>0</code>. Must be a numeric.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Choices include Decimal (default), Time, Percent, and Currency. Also known as 'Format' in the UI.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>create_cm</code></td>
<td>
<p>Used to determine if the segment should be created in the
report suite or if the definition should be returned to be validated using cm_validate.
Default is FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tagNames</code></td>
<td>
<p>Apply tag names to the newly created calculated metric. Single string or a vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>internal</code></td>
<td>
<p>Determines if this segment is to be available in the UI.
Default is FALSE, meaning the segment will not be available in the UI, nor will
the ID be available in the <code>aw_get_segments</code> function call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>debug</code></td>
<td>
<p>This enables the api call information to show in the console for
help with debugging issues. default is FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rsid</code></td>
<td>
<p>Adobe report suite ID (RSID).  If an environment variable called
<code>AW_REPORTSUITE_ID</code> exists in <code>.Renviron</code> or elsewhere and no <code>rsid</code> argument
is provided, then the <code>AW_REPORTSUITE_ID</code> value will be used. Use <code>aw_get_reportsuites()</code>
to get a list of available <code>rsid</code> values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>company_id</code></td>
<td>
<p>Company ID. If an environment variable called <code>AW_COMPANY_ID</code>
exists in <code>.Renviron</code> or elsewhere and no <code>company_id</code> argument is provided,
then the <code>AW_COMPANY_ID</code> value will be used. Use <code>get_me()</code> to get a list of
available <code>company_id</code> values.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See more information <a href="https://experienceleague.adobe.com/docs/analytics/components/calculated-metrics/calcmetric-workflow/cm-build-metrics.html?lang=en">here</a>
</p>


<h3>Value</h3>

<p>If the "create_cm" argument is set to FALSE a list object definition
will be returned. If the "create_cm" argument is set to TRUE and the calculated metric
is valid it will return a data frame of the newly created calculated metric id along
with some other basic meta data. If it returns an error then the error
response will be returned to help understand what needs to be corrected.
</p>


</div>