<div class="container">

<table style="width: 100%;"><tr>
<td>lum_local_match</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Match Filenames from LumiNUS.</h2>

<h3>Description</h3>

<p>A utility function for resolving duplicate filenames on
LumiNUS. (Only useful for NUS instructors!)
</p>


<h3>Usage</h3>

<pre><code class="language-R">lum_local_match(audit_file_path, local_files_dir, skip_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>audit_file_path</code></td>
<td>
<p>The audit file downloaded from LumiNUS. This must
be an Excel file. It comes from the "Download Activity" button for the
corresponding folder. It should contain columns such as "Action Time",
"Action", etc. In the folder settings, students should be identified by
their NAME.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>local_files_dir</code></td>
<td>
<p>The directory containing the files downloaded from
LumiNUS. It is usually downloaded as a zip-file and then extracted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip_name</code></td>
<td>
<p>The username to skip. Usually this is the instructor's name. This 
must be present.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Here is how LumiNUS works to resolve duplicate filenames: It
will append the students' filenames to the end of the file (in parenthesis),
but it will only use the first 15 characters of the students' name. In
LumiNUS, filenames are not case-sensitive - test.Rmd and test.rmd are
considered duplicate filenames.
</p>
<p>Here is how the function works: From the audit trail, it retrieves the name
of the most recent upload for each student. After converting these to
lowercase, duplicate file names have their student names appended. These
new names are matched to the filenames that were downloaded.
</p>
<p>Remember to clean up the filenames after this, because knitr does not
like parentheses in file names!
</p>


<h3>Value</h3>

<p>It returns a tibble, containing the remote and local filenames, matched
to the userid of students. The columns in this tibble are
</p>

<ol>
<li>
<p> mod_time: file modification time, from the downloaded file.
</p>
</li>
<li>
<p> luminus_time: time that the file was uploaded to LumiNUS; retrieved
from audit trail.
</p>
</li>
<li>
<p> local_fname: The downloaded local file name.
</p>
</li>
<li>
<p> luminus_fname: The filename that we see on LumiNUS.
</p>
</li>
</ol>
<h3>See Also</h3>

<p><code>replace_sp_chars_filename</code>
</p>


</div>