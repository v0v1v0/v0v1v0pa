<div class="container">

<table style="width: 100%;"><tr>
<td>DEFUSE3Design</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>The DEFUSE3 design</h2>

<h3>Description</h3>

<p><code>DEFUSE3Design</code> is a slight variant of the the adaptive
clinical trial design of Lai, Lavori and Liao. Simulation is used to compute
the expected maximum sample size and the boundary for early futility is adjusted to
account as well.
</p>


<h3>Super class</h3>

<p><code>ASSISTant::ASSISTDesign</code> -&gt; <code>DEFUSE3Design</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DEFUSE3Design-getOriginalBoundaries"><code>DEFUSE3Design$getOriginalBoundaries()</code></a>
</p>
</li>
<li> <p><a href="#method-DEFUSE3Design-new"><code>DEFUSE3Design$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DEFUSE3Design-adjustCriticalValues"><code>DEFUSE3Design$adjustCriticalValues()</code></a>
</p>
</li>
<li> <p><a href="#method-DEFUSE3Design-explore"><code>DEFUSE3Design$explore()</code></a>
</p>
</li>
<li> <p><a href="#method-DEFUSE3Design-performInterimLook"><code>DEFUSE3Design$performInterimLook()</code></a>
</p>
</li>
<li> <p><a href="#method-DEFUSE3Design-clone"><code>DEFUSE3Design$clone()</code></a>
</p>
</li>
</ul>
<details><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="analyze"><a href="../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-analyze"><code>ASSISTant::ASSISTDesign$analyze()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="computeCriticalValues"><a href="../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-computeCriticalValues"><code>ASSISTant::ASSISTDesign$computeCriticalValues()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getBoundaries"><a href="../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getBoundaries"><code>ASSISTant::ASSISTDesign$getBoundaries()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getDesignParameters"><a href="../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getDesignParameters"><code>ASSISTant::ASSISTDesign$getDesignParameters()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="getTrialParameters"><a href="../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-getTrialParameters"><code>ASSISTant::ASSISTDesign$getTrialParameters()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="print"><a href="../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-print"><code>ASSISTant::ASSISTDesign$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="setBoundaries"><a href="../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-setBoundaries"><code>ASSISTant::ASSISTDesign$setBoundaries()</code></a></span></li>
<li><span class="pkg-link" data-pkg="ASSISTant" data-topic="ASSISTDesign" data-id="summary"><a href="../../ASSISTant/html/ASSISTDesign.html#method-ASSISTDesign-summary"><code>ASSISTant::ASSISTDesign$summary()</code></a></span></li>
</ul></details><hr>
<a id="method-DEFUSE3Design-getOriginalBoundaries"></a>



<h4>Method <code>getOriginalBoundaries()</code>
</h4>

<p>Return the original boundaries for the design
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$getOriginalBoundaries()</pre></div>



<h5>Returns</h5>

<p>a named vector of values for <code>b</code>, <code>btilde</code> and <code>c</code>
</p>


<hr>
<a id="method-DEFUSE3Design-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Create a <code>DEFUSE3Design</code> object
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$new(
  designParameters,
  trialParameters,
  discreteData = FALSE,
  numberOfSimulations = 5000,
  rngSeed = 54321,
  showProgress = TRUE,
  trueParameters = NULL,
  boundaries
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>designParameters</code></dt>
<dd>
<p>parameters of the experimental design. Must contain apropriate distributions to sample from, if <code>discreteData = TRUE</code></p>
</dd>
<dt><code>trialParameters</code></dt>
<dd>
<p>the trial parameters, such as sample size etc.</p>
</dd>
<dt><code>discreteData</code></dt>
<dd>
<p>a flag indicating that a discrete distribution is to be used for the Rankin scores</p>
</dd>
<dt><code>numberOfSimulations</code></dt>
<dd>
<p>the number of simulations to use, default 5000</p>
</dd>
<dt><code>rngSeed</code></dt>
<dd>
<p>the random number generator seed</p>
</dd>
<dt><code>showProgress</code></dt>
<dd>
<p>a boolean flag to show progress (default <code>TRUE</code>)</p>
</dd>
<dt><code>trueParameters</code></dt>
<dd>
<p>a list of true parameter values reflecting the state of nature</p>
</dd>
<dt><code>boundaries</code></dt>
<dd>
<p>decision boundaries to use for interim looks, a named vector of <code>btilde</code>, <code>b</code> and <code>c</code> values</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>a new <code>AssistDesign</code> object
</p>


<hr>
<a id="method-DEFUSE3Design-adjustCriticalValues"></a>



<h4>Method <code>adjustCriticalValues()</code>
</h4>

<p>Adjust critical values to account for sample size loss due to futility
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$adjustCriticalValues(numberOfSimulations, rngSeed, showProgress)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>numberOfSimulations</code></dt>
<dd>
<p>the number of simulations to use</p>
</dd>
<dt><code>rngSeed</code></dt>
<dd>
<p>the random number generator seed</p>
</dd>
<dt><code>showProgress</code></dt>
<dd>
<p>a boolean flag for showing progress</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>the adjusted boundaries
</p>


<hr>
<a id="method-DEFUSE3Design-explore"></a>



<h4>Method <code>explore()</code>
</h4>

<p>Explore the design using the specified number of simulations and random number seed and other parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$explore(
  numberOfSimulations = 5000,
  rngSeed = 12345,
  trueParameters = self$getDesignParameters(),
  recordStats = TRUE,
  showProgress = TRUE,
  saveRawData = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>numberOfSimulations</code></dt>
<dd>
<p>default number of simulations is 5000</p>
</dd>
<dt><code>rngSeed</code></dt>
<dd>
<p>default seed is 12345</p>
</dd>
<dt><code>trueParameters</code></dt>
<dd>
<p>the state of nature, by default the value of <code>self$getDesignParameters()</code> as would be the case for a Type I error calculation. If changed, would yield power.</p>
</dd>
<dt><code>recordStats</code></dt>
<dd>
<p>a boolean flag (default <code>TRUE</code>) to record statistics</p>
</dd>
<dt><code>showProgress</code></dt>
<dd>
<p>a boolean flag to show progress, default <code>TRUE</code></p>
</dd>
<dt><code>saveRawData</code></dt>
<dd>
<p>a flag (default <code>FALSE</code>) to indicate if raw data has to be saved</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>a list of results
</p>


<hr>
<a id="method-DEFUSE3Design-performInterimLook"></a>



<h4>Method <code>performInterimLook()</code>
</h4>

<p>Perform an interim look for futility
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$performInterimLook(trialData, stage, recordStats = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>trialData</code></dt>
<dd>
<p>trial data frame</p>
</dd>
<dt><code>stage</code></dt>
<dd>
<p>the trial stage</p>
</dd>
<dt><code>recordStats</code></dt>
<dd>
<p>a boolean flag to record all statistics</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>the trial history
</p>


<hr>
<a id="method-DEFUSE3Design-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DEFUSE3Design$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>See Also</h3>

<p><code>ASSISTDesign</code> which is a superclass of this object
</p>


<h3>Examples</h3>

<pre><code class="language-R">trialParameters &lt;- list(N = c(200, 340, 476), type1Error = 0.025,
                        eps = 1/2, type2Error = 0.1)
designParameters &lt;- list(
   nul0 = list(prevalence = rep(1/6, 6), mean = matrix(0, 2, 6),
               sd = matrix(1, 2, 6)),
   alt1 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6),
               c(0.5, 0.4, 0.3, 0, 0, 0)),
               sd = matrix(1, 2, 6)),
   alt2 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6),
               c(0.5, 0.5, 0, 0, 0, 0)),
               sd = matrix(1,2, 6)),
   alt3 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6), rep(0.36, 6)),
               sd = matrix(1,2, 6)),
   alt4 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6), rep(0.30, 6)),
               sd = matrix(1,2, 6)),
   alt5 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6),
               c(0.4, 0.3, 0.2, 0, 0, 0)),
               sd = matrix(1,2, 6)),
   alt6 = list(prevalence = rep(1/6, 6), mean = rbind(rep(0, 6),
               c(0.5, 0.5, 0.3, 0.3, 0.1, 0.1)),
               sd = matrix(1,2, 6)))

## Not run: 
## A realistic design uses 5000 simulations or more!
defuse3 &lt;- DEFUSE3Design$new(trialParameters = trialParameters,
                             numberOfSimulations = 25,
                             designParameters = designParameters$nul0,
                             showProgress = FALSE)
print(defuse3)
result &lt;- defuse3$explore(showProgress = interactive())
analysis &lt;- defuse3$analyze(result)
print(defuse3$summary(analysis))

## End(Not run)
## For full examples, try:
## browseURL(system.file("full_doc/defuse3.html", package="ASSISTant"))

</code></pre>


</div>