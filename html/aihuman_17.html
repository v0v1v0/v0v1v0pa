<div class="container">

<table style="width: 100%;"><tr>
<td>CalOptimalDecision</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate optimal decision &amp; utility</h2>

<h3>Description</h3>

<p>(1) Calculate optimal decision for each observation given each of c0 (cost of an outcome) and c1 (cost of an unnecessarily harsh decision) from the lists. 
(2) Calculate difference in the expected utility between binary version of judge's decisions and DMF recommendations given each of c0 (cost of an outcome) and c1 (cost of an unnecessarily harsh decision) from the lists.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CalOptimalDecision(
  data,
  mcmc.re,
  c0.ls,
  c1.ls,
  dmf = NULL,
  rho = 0,
  burnin = 0,
  out.length = 500,
  ZX = NULL,
  size = 5,
  include.utility.diff.mcmc = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as "Z", "D", and "Y" respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mcmc.re</code></td>
<td>
<p>A <code>mcmc</code> object generated by <code>AiEvalmcmc()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c0.ls</code></td>
<td>
<p>The list of cost of an outcome. See Section 3.7 for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c1.ls</code></td>
<td>
<p>The list of cost of an unnecessarily harsh decision. See Section 3.7 for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dmf</code></td>
<td>
<p>A numeric vector of binary DMF recommendations. If <code>null</code>, use judge's decisions (0 if the decision is 0 and 1 o.w; e.g., signature or cash bond).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>A sensitivity parameter. The default is  <code>0</code> which implies the unconfoundedness assumption (Assumption 4).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>burnin</code></td>
<td>
<p>A proportion of burnin for the Markov chain. The default is <code>0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.length</code></td>
<td>
<p>An integer to specify the progress on the screen. Every <code>out.length</code>-th iteration is printed on the screen. The default is <code>500</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ZX</code></td>
<td>
<p>The data matrix for interaction terms. The default is the interaction between Z and all of the pre-treatment covariates (X).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>The number of parallel computing. The default is <code>5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include.utility.diff.mcmc</code></td>
<td>
<p>A logical argument specifying whether to save <code>Utility.diff.control.mcmc</code> and <code>Utility.diff.treated.mcmc</code> for Figure S17. The default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>data.frame</code> of (1) the probability that the optimal decision for each observation being d in 0,1,...,k, (2) expected utility of binary version of judge's decision (g_d), (3) expected utility of binary DMF recommendation, and (4) the difference between (2) and (3). If <code>include.utility.diff.mcmc = TRUE</code>, returns a list of such <code>data.frame</code> and a <code>data.frame</code> that includes the result for mean and quantile of <code>Utility.diff.control.mcmc</code> and <code>Utility.diff.treated.mcmc</code> across mcmc samples.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(synth)
sample_mcmc = AiEvalmcmc(data = synth, n.mcmc = 10)
sample_optd = CalOptimalDecision(data = synth, mcmc.re = sample_mcmc, 
                                 c0.ls = seq(0,5,1), c1.ls = seq(0,5,1), 
                                 size = 1) # adjust the size


</code></pre>


</div>