<div class="container">

<table style="width: 100%;"><tr>
<td>populate_soln_env</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Returns solution environment and test code from template.</h2>

<h3>Description</h3>

<p>Generates objects for checking solution correctness.
</p>


<h3>Usage</h3>

<pre><code class="language-R">populate_soln_env(
  soln_fname,
  pattern,
  knit_root_dir,
  render_only = FALSE,
  output = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>soln_fname</code></td>
<td>
<p>An rmd file containing the checks to be
run on the student solution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>The pattern that identifies which chunks in the solution are 
are testing chunks. If this argument is missing, 
the default pattern used is "test".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>knit_root_dir</code></td>
<td>
<p>The root directory to use for knitting the rmd file. This
argument is optional. If it is missing, it uses the root directory in
knitr::opts_knit$get('root.dir').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>render_only</code></td>
<td>
<p>A logical value. If this is TRUE, then the solution is
run and rendered. In this case, a list of length two is returned. If this is 
FALSE (default), then then a list of length three is returned. See the
Return section for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>The path to the knitted solution md file. This is usually 
deleted immediately, but sometimes we may want to keep it. This 
argument is passed on to <code>knit</code>, so please refer to 
that page for the warnings about setting this argument when figures are 
involved.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Test code should be written in a chunk that generates scalars 
from student objects.
</p>
<p>The solution file has to be an Rmd file (not an R script), because it 
relies on the autoharp.obj and autoharp.scalars knitr hooks being present.
</p>
<p>In addition, if it is required that a solution object is to be tested against
the analogous object within the student environment, these objects should be 
listed within the autoharp option of a code chunk. These objects will be 
copied with the "." preffix.
</p>
<p>Here is an overview of how the function works:
</p>

<ol>
<li>
<p> Knit the solution file to generate the solution (or "correct") 
objects. 
</p>
</li>
<li>
<p> Rename these with the "." prefix in the solution environment
object.
</p>
</li>
<li>
<p> Extract the lines of test code into a temporary R script.
</p>
</li>
<li>
<p> Wrap those chunks that contain autoharp.scalars hook with tryCatch.
</p>
</li>
<li>
<p> Add a few lines at the bottom of the script to indicate which
scalars should be kept.
</p>
</li>
<li>
<p> Return the solution environment and path to the R test script.
</p>
</li>
</ol>
<p>Typically, the next step is to call <code>check_correctness</code>.
</p>


<h3>Value</h3>

<p>If render_only is FALSE, a list containing 2 components: the
environment populated by the solution rmd and the path to an R script
containing the test code.
</p>
<p>If render_only is TRUE, then the output list contains the 
aforementioned environment, and the path to the rendered solution file
(html). This option is useful for debugging the solution file.
</p>


<h3>See Also</h3>

<p><code>check_correctness</code>, <code>render_one</code>
</p>


</div>