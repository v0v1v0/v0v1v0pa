<div class="container">

<table style="width: 100%;"><tr>
<td>dissimilarity</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Dissimilarity Matrix Computation for Associations and Transactions</h2>

<h3>Description</h3>

<p>Provides the generic function <code>dissimilarity()</code> and the methods to
compute and returns distances for binary data in a <code>matrix</code>,
transactions or associations which
can be used for grouping and clustering. See Hahsler (2016) for an
introduction to distance-based clustering of association rules.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dissimilarity(x, y = NULL, method = NULL, args = NULL, ...)

## S4 method for signature 'matrix'
dissimilarity(x, y = NULL, method = NULL, args = NULL)

## S4 method for signature 'itemMatrix'
dissimilarity(x, y = NULL, method = NULL, args = NULL, which = "transactions")

## S4 method for signature 'associations'
dissimilarity(x, y = NULL, method = NULL, args = NULL, which = "associations")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>the set of elements (e.g., <code>matrix</code>, itemMatrix, transactions,
itemsets, rules).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p><code>NULL</code> or a second set to calculate cross dissimilarities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>the distance measure to be used. Implemented measures are
(defaults to <code>"jaccard"</code>):
</p>

<ul>
<li> <p><code>"affinity"</code>:
measure based on the <code>affinity()</code>, a similarity measure between
items. It is defined as the average affinity between the items in two
transactions (see Aggarwal et al. (2002)). If <code>x</code> is not the full
transaction set <code>args</code> needs to contain either precalculated affinities
as element <code>"affinities"</code> or the transaction set as element
<code>"transactions"</code>.
</p>
</li>
<li> <p><code>"cosine"</code>: the Cosine distance.
</p>
</li>
<li> <p><code>"dice"</code>: Dice's coefficient defined by Dice (1945).
Similar to Jaccard but gives double the weight to agreeing items.
</p>
</li>
<li> <p><code>"euclidean"</code>: the Euclidean distance.
</p>
</li>
<li> <p><code>"jaccard"</code>: the number of items which occur in both elements
divided by the total number of items in the elements (Sneath, 1957).  This
measure is often also called: binary, asymmetric binary, etc.
</p>
</li>
<li> <p><code>"matching"</code>: the matching coefficient defined by
Sokal and Michener (1958). This coefficient gives the same weight to
presents and absence of items.
</p>
</li>
<li> <p><code>"pearson"</code> A distance calculated by <code class="reqn">1 - r</code>
if <code class="reqn">r&gt;1</code> and <code class="reqn">1</code> otherwise, where <code class="reqn">r</code> is the Pearson's correlation
coefficient.
</p>
</li>
<li> <p><code>"phi"</code>: same as <code>"pearson"</code>. Pearson's correlation coefficient
reduces to the phi coefficient for the 2x2 contingency tables used
here.
</p>
</li>
<li> <p><code>"toivonen"</code>: Method described in Toivonen et al. (1995).  For
rules this measure is only defined between rules with the same consequent.
The distance between two rules is defined as the number of transactions
which is covered by only one of the two rules.  The transactions used to
mine the associations has to be passed on via <code>args</code> as element
<code>"transactions"</code>.
</p>
</li>
<li> <p><code>"gupta"</code>: Method described in Gupta et al. (1999).  The
distance between two rules is defined as 1 minus the proportion of
transactions which are covered by both rules in the transactions covered by
each rule individually.  The transactions used to mine the associations has
to be passed on via <code>args</code> as element <code>"transactions"</code>.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>args</code></td>
<td>
<p>a list of additional arguments for the methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p>a character string indicating if the dissimilarity should be
calculated between transactions/associations (default) or items (use <code>"items"</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>returns an object of class <code>dist</code>.
</p>


<h3>Author(s)</h3>

<p>Michael Hahsler
</p>


<h3>References</h3>

<p>Aggarwal, C.C., Cecilia Procopiuc, and Philip S. Yu. (2002)
Finding localized associations in market basket data.  <em>IEEE Trans. on
Knowledge and Data Engineering</em> 14(1):51–62.
</p>
<p>Dice, L. R. (1945) Measures of the amount of ecologic association between
species. <em>Ecology</em> 26, pages 297–302.
</p>
<p>Gupta, G., Strehl, A., and Ghosh, J. (1999) Distance based clustering of
association rules. <em>In Intelligent Engineering Systems Through
Artificial Neural Networks (Proceedings of ANNIE 1999)</em>, pages 759-764. ASME
Press.
</p>
<p>Hahsler, M. (2016) Grouping association rules using lift. In C.  Iyigun, R.
Moghaddess, and A. Oztekin, editors, <em>11th INFORMS Workshop on Data Mining
and Decision Analytics</em> (DM-DA 2016).
</p>
<p>Sneath, P. H. A. (1957) Some thoughts on bacterial classification.
<em>Journal of General Microbiology</em> 17, pages 184–200.
</p>
<p>Sokal, R. R. and Michener, C. D. (1958) A statistical method for evaluating
systematic relationships. <em>University of Kansas Science Bulletin</em> 38,
pages 1409–1438.
</p>
<p>Toivonen, H., Klemettinen, M., Ronkainen, P., Hatonen, K. and Mannila H.
(1995) Pruning and grouping discovered association rules. <em>In
Proceedings of KDD'95</em>.
</p>


<h3>See Also</h3>

<p>Other proximity classes and functions: 
<code>affinity()</code>,
<code>predict()</code>,
<code>proximity-classes</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## cluster items in Groceries with support &gt; 5%
data("Groceries")

s &lt;- Groceries[, itemFrequency(Groceries) &gt; 0.05]
d_jaccard &lt;- dissimilarity(s, which = "items")
plot(hclust(d_jaccard, method = "ward.D2"), main = "Dendrogram for items")

## cluster transactions for a sample of Adult
data("Adult")
s &lt;- sample(Adult, 500)

##  calculate Jaccard distances and do hclust
d_jaccard &lt;- dissimilarity(s)
hc &lt;- hclust(d_jaccard, method = "ward.D2")
plot(hc, labels = FALSE, main = "Dendrogram for Transactions (Jaccard)")

## get 20 clusters and look at the difference of the item frequencies (bars)
## for the top 20 items) in cluster 1 compared to the data (line)
assign &lt;- cutree(hc, 20)
itemFrequencyPlot(s[assign == 1], population = s, topN = 20)

## calculate affinity-based distances between transactions and do hclust
d_affinity &lt;- dissimilarity(s, method = "affinity")
hc &lt;- hclust(d_affinity, method = "ward.D2")
plot(hc, labels = FALSE, main = "Dendrogram for Transactions (Affinity)")

## cluster association rules
rules &lt;- apriori(Adult, parameter = list(support = 0.3))
rules &lt;- subset(rules, subset = lift &gt; 2)

## use affinity to cluster rules
## Note: we need to supply the transactions (or affinities) from the
## dataset (sample).
d_affinity &lt;- dissimilarity(rules, method = "affinity",
  args = list(transactions = s))
hc &lt;- hclust(d_affinity, method = "ward.D2")
plot(hc, main = "Dendrogram for Rules (Affinity)")

## create 4 groups and inspect the rules in the first group.
assign &lt;- cutree(hc, k = 3)
inspect(rules[assign == 1])

</code></pre>


</div>