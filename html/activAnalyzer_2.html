<div class="container">

<table style="width: 100%;"><tr>
<td>compute_accumulation_metrics</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute activity accumulation metrics</h2>

<h3>Description</h3>

<p>This function computes metrics that summarise the pattern of accumulation
of either sedentary behaviour or physical activity (depending on the
configuration of the function) over time:
</p>

<ul>
<li> <p><strong>mean_breaks</strong>: mean daily number of transitions from a sedentary bout to a
physical activity bout (or from a physical activity bout to a sedentary bout);
this actually corresponds to the mean daily total number of sedentary (or physical activity) bouts detected.
</p>
</li>
<li> <p><strong>alpha</strong>: provides information on the relative proportion of
short and long bouts.  The higher the alpha coefficient, the more the individual tends to
accumulate sedentary (or physical activity) time using relatively short bouts. Alpha is
computed using all the bouts of the days and periods of the day considered for analysis. Alpha
is computed using the following equation provided by Chastin et al. (2010; doi: 10.1016/j.gaitpost.2009.09.002):
<code class="reqn">\alpha = 1 + n \left[\sum_{i = 1}^{n}{ln}\frac{x_{i}}{x_{min}}\right]^{-1}</code>, with <code class="reqn">n</code> the total number of bouts,
<code class="reqn">x_{i}</code> the duration of the bout <code class="reqn">i</code>, and <code class="reqn">x_{min}</code> the shortest recorded bout duration.
</p>
</li>
<li> <p><strong>median bout duration (MBD)</strong>: refers to the median sedentary (or physical activity) bout duration.
MBD is computed using all the bouts of the days and periods of the day considered for analysis.
</p>
</li>
<li> <p><strong>usual bout duration (UBD)</strong>: refers to the bout duration under/above which 50% of sedentary
(or physical activity) time is accumulated. UBD is computed using all the bouts of the days and periods
of the day considered for analysis. UBD is determined as described in Belletiere al. (2017; doi:10.1371/journal.pone.0180119)
supplementary file 1. More precisely, UBD is found using non-linear regression with the following model: <code class="reqn">y = \frac{t^n}{t^n + UBD^n}</code>,
with <code class="reqn">t</code> the bout duration, <code class="reqn">n</code> a free parameter, and <code class="reqn">y</code> the fraction of total time accumulated in bouts <code class="reqn">\le</code> <code class="reqn">t</code>.
</p>
</li>
<li> <p><strong>Gini index</strong>: provides information on the equality with which bout durations
contribute to total sedentary (or physical activity) time. A value of 1 reveals perfect
inequality, and a value of 0 reveals perfect equality. Gini index is computed using all
the bouts of the days and periods of the day considered for analysis. Gini index is computed following
the procedure described at the following link: https://www.statology.org/gini-coefficient-excel/. This method
provides similar results as the frequency method implemented in the <code>Gini</code> function from the <code>DescTools</code> R package.
</p>
</li>
</ul>
<p>The appearance of the graphics generated by the function has been inspired by the supplementary file provided by Belletiere al. (2017; doi:10.1371/journal.pone.0180119).
</p>


<h3>Usage</h3>

<pre><code class="language-R">compute_accumulation_metrics(
  data,
  col_time = "time",
  col_cat_int = "intensity_category",
  behaviour = c("sed", "pa"),
  dates = NULL,
  valid_wear_time_start = "00:00:00",
  valid_wear_time_end = "23:59:59",
  zoom_from = "00:00:00",
  zoom_to = "23:59:59"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A dataframe obtained using the <code>prepare_dataset</code>, <code>mark_wear_time</code>, and then the <code>mark_intensity</code> functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_time</code></td>
<td>
<p>A character value to indicate the name of the variable containing time data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_cat_int</code></td>
<td>
<p>A character value indicating the name of the variable where intensity category (SED, LPA, MVPA) is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>behaviour</code></td>
<td>
<p>A character value indicating whether metrics should be computed for sedentary behaviour or physical activity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dates</code></td>
<td>
<p>A character vector containing the dates to be retained for analysis. The dates must be with the "YYYY-MM-DD" format. Default is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>valid_wear_time_start</code></td>
<td>
<p>A character value with the HH:MM:SS format to set the start of the daily period that will be considered for computing metrics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>valid_wear_time_end</code></td>
<td>
<p>A character value with the HH:MM:SS format to set the end of the daily period that will be considered for computing metrics.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zoom_from</code></td>
<td>
<p>A character value with the HH:MM:SS format to set the start of the daily period to visualize regarding the daily breaks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zoom_to</code></td>
<td>
<p>A character value with the HH:MM:SS format to set the end of the daily period to visualize regarding the daily breaks.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of numeric and graphic objects related to mean daily total breaks, alpha, MBD, UBD and Gini index. The list also contains
the processed datasets that were used to provide these metrics: <code>recap_bouts_by_day</code> used to compute <code>mean_break</code>, <code>recap_bouts</code> used
to compute <code>alpha</code> and <code>MBD</code>, <code>summarised_bouts</code> used to compute <code>UBD</code>, and <code>summarised_bouts2</code> used to compute <code style="white-space: pre;">⁠Gini index⁠</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
file &lt;- system.file("extdata", "acc.agd", package = "activAnalyzer")
mydata &lt;- prepare_dataset(data = file)
mydata_with_wear_marks &lt;- mark_wear_time(
    dataset = mydata, 
    TS = "TimeStamp", 
    to_epoch = 60,
    cts  = "vm",
    frame = 90, 
    allowanceFrame = 2, 
    streamFrame = 30
    )
mydata_with_intensity_marks &lt;- mark_intensity(
    data = mydata_with_wear_marks, 
    col_axis = "vm", 
    equation = "Sasaki et al. (2011) [Adults]",
    sed_cutpoint = 200, 
    mpa_cutpoint = 2690, 
    vpa_cutpoint = 6167, 
    age = 32,
    weight = 67,
    sex = "male",
    )
compute_accumulation_metrics(
   data = mydata_with_intensity_marks,
   behaviour = "sed",
   dates = c("2021-04-07", "2021-04-08", "2021-04-09", "2021-04-10", "2021-04-11"),
   valid_wear_time_start = "00:00:00",
   valid_wear_time_end = "23:59:59",
   zoom_from = "00:00:00",
   zoom_to = "23:59:59"
    )


</code></pre>


</div>