<div class="container">

<table style="width: 100%;"><tr>
<td>process_flatten_sds</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Process MODIS layers</h2>

<h3>Description</h3>

<p>Aggregate layers in a sub-dataset in sinusoidal MODIS products.
</p>
<p>Some MODIS products consist of multi-layer subdatasets.
This function aggregates multiple layers into single layer <code>SpatRaster.</code>
<code>fun_agg</code> is applied at overlapping cells.
</p>


<h3>Usage</h3>

<pre><code class="language-R">process_flatten_sds(path = NULL, subdataset = NULL, fun_agg = "mean", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>character(1). Full path to MODIS HDF4/HDF5 file.
Direct sub-dataset access is supported, for example,
HDF4_EOS:EOS_GRID:{filename}:{base_grid_information}:{sub-dataset}</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subdataset</code></td>
<td>
<p>character(1). Exact or regular expression filter of
sub-dataset. See process_modis_sds for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun_agg</code></td>
<td>
<p>character(1). Function name to aggregate layers.
Should be acceptable to terra::tapp.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Placeholders.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a <code>SpatRaster</code> object
</p>


<h3>Note</h3>

<p>HDF values are read as original without scaling.
Users should consult MODIS product documentation to apply proper
scaling factor for post-hoc adjustment. If users have no preliminary
information about MODIS sub-datasets, consider running
<code style="white-space: pre;">⁠terra::describe(__filename__, sds = TRUE)⁠</code> to navigate the full
list of sub-datasets in the input file then consult the documentation
of MODIS product.
</p>


<h3>Author(s)</h3>

<p>Insang Song
</p>


<h3>See Also</h3>

<p>terra::tapp, terra::rast, terra::describe
</p>


<h3>Examples</h3>

<pre><code class="language-R">## NOTE: Example is wrapped in `\dontrun{}` as function requires a large
##       amount of data which is not included in the package.
## Not run: 
mod09ga_flatten &lt;- process_flatten_sds(
  path =
    list.files("./data", pattern = "MOD09GA.", full.names = TRUE)[1],
  subdataset = process_modis_sds("MOD09GA"),
  fun_agg = "mean"
)

## End(Not run)
</code></pre>


</div>