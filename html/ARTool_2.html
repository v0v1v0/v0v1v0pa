<div class="container">

<table style="width: 100%;"><tr>
<td>art</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Aligned Rank Transform</h2>

<h3>Description</h3>

<p>Apply the aligned rank transform to a factorial model (with optional
grouping terms). Usually done in preparation for a nonparametric analyses of
variance on models with numeric or ordinal responses, which can be done by
following up with <code>anova.art</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">art(
  formula,
  data,
  rank.comparison.digits = -floor(log10(.Machine$double.eps^0.5)),
  check.errors.are.factors = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A factorial formula with optional grouping terms or error
terms (but not both). Should be a formula with a single response variable
(left-hand side) and one or more terms with all interactions on the
right-hand side, e.g. <code>y ~ x</code> or <code>y ~ a*b*c</code> or <code>y ~ a + b +
b:c</code>. If you want to run a mixed effects ANOVA on the transformed data using
<code>lmer</code>, you can include grouping terms, as in <code>y ~ a*b*c +
(1|d)</code>.  If you want to run a repeated measures ANOVA using
<code>aov</code>, you can include error terms, as in <code>y ~ a*b*c +
Error(d)</code>. See 'Details'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>An optional data frame containing the variables in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rank.comparison.digits</code></td>
<td>
<p>The number of digits to round aligned
responses to before ranking (to ensure ties are computed consistently).  See
the <code>digits</code> argument of <code>round</code>. The default value is
based on the default <code>tolerance</code> used for fuzzy comparison in
<code>all.equal</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check.errors.are.factors</code></td>
<td>
<p>Should we check to ensure <code>Error()</code>
terms are all factors? A common mistake involves coding a categorical variable
as numeric and passing it to <code>Error()</code>, yielding incorrect results
from <code>aov</code>. Disabling this check is not recommended unless you
know what you are doing; the most common uses of <code>Error()</code> (e.g.
in repeated measures designs) involve categorical variables (factors).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The aligned rank transform allows a nonparametric analysis of variance to be
conducted on factorial models with fixed and random effects (or repeated
measures) and numeric or ordinal responses. This is done by first aligning
and ranking the fixed effects using this function, then conducting an
analysis of variance on linear models built from the transformed data using
<code>anova.art</code> (see 'Examples'). The model specified using this
function <em>must</em> include all interactions of fixed effects.
</p>
<p>The <code>formula</code> should contain a single response variable (left-hand
side) that can be numeric, an ordered factor, or logical. The right-hand
side of the formula should contain one or more fixed effect factors, zero or
more grouping terms, and zero or more error terms. Error terms and grouping
terms cannot be used simultaneously. All possible interactions of the fixed
effect terms must be included. For example, <code>y ~ x</code> and <code>y ~
a*b*c</code> and <code>y ~ a + b + b:c</code> are legal, but <code>y ~ a + b</code> is not, as
it omits the interaction <code>a:b</code>. Grouping terms are specified as in
<code>lmer</code>, e.g. <code>y ~ a*b*c + (1|d)</code> includes the random
intercept term <code>(1|d)</code>. Error terms are specified as in
<code>aov</code>, e.g. <code>y ~ a*b*c + Error(d)</code>. Grouping terms and
error terms are not involved in the transformation, but are included in the
model when ANOVAs are conducted, see <code>anova.art</code>.
</p>
<p>For details on the transformation itself, see Wobbrock <em>et al.</em> (2011)
or the ARTool website: <a href="https://depts.washington.edu/acelab/proj/art/">https://depts.washington.edu/acelab/proj/art/</a>.
</p>


<h3>Value</h3>

<p>An object of class <code>"art"</code>:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p> The call used to generate the transformed data. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p> The formula used to generate the transformed data. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cell.means</code></td>
<td>
<p> A data frame of cell means for each fixed term and
interaction on the right-hand side of formula. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimated.effects</code></td>
<td>
<p> A
data frame of estimated effects for each fixed term and interaction on the
right-hand side of formula. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residuals</code></td>
<td>
<p> A vector of residuals
(response - cell mean of highest-order interaction). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aligned</code></td>
<td>
<p> A
data frame of aligned responses for each fixed term and interaction on the
right-hand side of formula. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aligned.ranks</code></td>
<td>
<p> A data frame of aligned
and ranked responses for each fixed term and interaction on the right-hand
side of formula. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p> The input data frame </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.grouping.terms</code></td>
<td>
<p> The number of grouping variables in the input
formula. </p>
</td>
</tr>
</table>
<p>For a complete description of cell means, estimated effects, aligned ranks,
etc., in the above output, see Wobbrock <em>et al.</em> (2011).
</p>


<h3>Author(s)</h3>

<p>Matthew Kay
</p>


<h3>References</h3>

<p>Wobbrock, J. O., Findlater, L., Gergle, D., and Higgins, J. J.
<em>ARTool</em>. <a href="https://depts.washington.edu/acelab/proj/art/">https://depts.washington.edu/acelab/proj/art/</a>.
</p>
<p>Wobbrock, J. O., Findlater, L., Gergle, D., and Higgins, J. J.
(2011). The aligned rank transform for nonparametric factorial analyses
using only ANOVA procedures. <em>Proceedings of the ACM Conference on
Human Factors in Computing Systems (CHI '11)</em>.  Vancouver, British Columbia
(May 7–12, 2011). New York: ACM Press, pp. 143–146. doi: <a href="https://doi.org/10.1145/1978942.1978963">10.1145/1978942.1978963</a>
</p>


<h3>See Also</h3>

<p><code>summary.art</code>, <code>anova.art</code>,
<code>artlm</code>, <code>artlm.con</code>, <code>art.con</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(Higgins1990Table5, package = "ARTool")

## perform aligned rank transform
m &lt;- art(DryMatter ~ Moisture*Fertilizer + (1|Tray), data=Higgins1990Table5)

## see summary data to ensure aligned rank transform is appropriate for this data
summary(m)
## looks good (aligned effects sum to 0 and F values on aligned responses
## not of interest are all ~0)

## we can always look at the anova of aligned data if we want more detail
## to assess the appropriateness of ART.  F values in this anova should all
## be approx 0.
anova(m, response="aligned")

## then we can run an anova on the ART responses (equivalent to anova(m, response="art"))
anova(m)


## if we want contrast tests, we can use art.con():
## Ex 1: pairwise contrasts on Moisture:
art.con(m, "Moisture")
## Ex 2: pairwise contrasts on Moisture:Fertilizer:
art.con(m, "Moisture:Fertilizer")
## Ex 3: difference-of-difference tests on the Moisture:Fertilizer interaction:
art.con(m, "Moisture:Fertilizer", interaction = TRUE)


## The above three examples with art.con() can be constructed manually as well.
## art.con() extracts the appropriate linear model and conducts contrasts
## using emmeans(). If we want to use a specific method for post-hoc tests
## other than emmeans(), artlm.con(m, term) returns the linear model for the
## specified term which we can then examine using our preferred method
## (emmeans, glht, etc). The equivalent calls for the above examples are:
library(emmeans)

## Ex 1: pairwise contrasts on Moisture:
contrast(emmeans(artlm.con(m, "Moisture"), pairwise ~ Moisture))

## Ex 2: pairwise contrasts on Moisture:Fertilizer:
## See artlm.con() documentation for more details on the syntax, specifically
## the formula passed to emmeans.
contrast(emmeans(artlm.con(m, "Moisture:Fertilizer"), pairwise ~ MoistureFertilizer))

## Ex 3: difference-of-difference tests on the Moisture:Fertilizer interaction:
## Note the use of artlm() instead of artlm.con()
contrast(
  emmeans(artlm(m, "Moisture:Fertilizer"), ~ Moisture:Fertilizer),
  method = "pairwise", interaction = TRUE
)


## For a more in-depth explanation and example of contrasts with art and
## differences between interaction types, see vignette("art-contrasts")



</code></pre>


</div>