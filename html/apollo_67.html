<div class="container">

<table style="width: 100%;"><tr>
<td>apollo_normalDensity</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates density for a Normal distribution</h2>

<h3>Description</h3>

<p>Calculates density for a Normal distribution at a specific value with a specified mean and standard deviation and can also perform other operations based on the value of the <code>functionality</code> argument.
</p>


<h3>Usage</h3>

<pre><code class="language-R">apollo_normalDensity(normalDensity_settings, functionality)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>normalDensity_settings</code></td>
<td>
<p>List of arguments to the functions. It must contain the following.
</p>

<ul>
<li> <p><strong><code>componentName</code></strong>: Character. Name given to model component. If not provided by the user, Apollo will set the name automatically according to the element in <code>P</code> to which the function output is directed.
</p>
</li>
<li> <p><strong><code>mu</code></strong>: Numeric scalar. Intercept of the linear model.
</p>
</li>
<li> <p><strong><code>outcomeNormal</code></strong>: Numeric vector. Dependent variable.
</p>
</li>
<li> <p><strong><code>rows</code></strong>: Boolean vector. Consideration of which rows to include. Length equal to the number of observations (nObs), with entries equal to TRUE for rows to include, and FALSE for rows to exclude. Default is <code>"all"</code>, equivalent to <code>rep(TRUE, nObs)</code>.
</p>
</li>
<li> <p><strong><code>sigma</code></strong>: Numeric scalar. Variance of error component of linear model to be estimated.
</p>
</li>
<li> <p><strong><code>xNormal</code></strong>: Numeric vector. Single explanatory variable.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>functionality</code></td>
<td>
<p>Character. Setting instructing Apollo what processing to apply to the likelihood function. This is in general controlled by the functions that call <code>apollo_probabilities</code>, though the user can also call <code>apollo_probabilities</code> manually with a given functionality for testing/debugging. Possible values are:
</p>

<ul>
<li> <p><strong><code>"components"</code></strong>: For further processing/debugging, produces likelihood for each model component (if multiple components are present), at the level of individual draws and observations.
</p>
</li>
<li> <p><strong><code>"conditionals"</code></strong>: For conditionals, produces likelihood of the full model, at the level of individual inter-individual draws.
</p>
</li>
<li> <p><strong><code>"estimate"</code></strong>: For model estimation, produces likelihood of the full model, at the level of individual decision-makers, after averaging across draws.
</p>
</li>
<li> <p><strong><code>"gradient"</code></strong>: For model estimation, produces analytical gradients of the likelihood, where possible.
</p>
</li>
<li> <p><strong><code>"output"</code></strong>: Prepares output for post-estimation reporting.
</p>
</li>
<li> <p><strong><code>"prediction"</code></strong>: For model prediction, produces probabilities for individual alternatives and individual model components (if multiple components are present) at the level of an observation, after averaging across draws.
</p>
</li>
<li> <p><strong><code>"preprocess"</code></strong>: Prepares likelihood functions for use in estimation.
</p>
</li>
<li> <p><strong><code>"raw"</code></strong>: For debugging, produces probabilities of all alternatives and individual model components at the level of an observation, at the level of individual draws.
</p>
</li>
<li> <p><strong><code>"report"</code></strong>: Prepares output summarising model and choiceset structure.
</p>
</li>
<li> <p><strong><code>"shares_LL"</code></strong>: Produces overall model likelihood with constants only.
</p>
</li>
<li> <p><strong><code>"validate"</code></strong>: Validates model specification, produces likelihood of the full model, at the level of individual decision-makers, after averaging across draws.
</p>
</li>
<li> <p><strong><code>"zero_LL"</code></strong>: Produces overall model likelihood with all parameters at zero.
</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function calculates the probability of the linear model outcomeNormal = mu + xNormal + epsilon, where epsilon is a random error distributed Normal(0,sigma).
If using this function in the context of an Integrated Choice and Latent Variable (ICLV) model with continuous
indicators, then <code>outcomeNormal</code> would be the value of the indicator, <code>xNormal</code> would be the value of the latent variable (possibly
multiplied by a parameter to measure its correlation with the indicator, e.g. xNormal=lambda*LV), and <code>mu</code> would be
an additional parameter to be estimated (the mean of the indicator, which should be fixed to zero if the indicator is
centered around its mean beforehand).
</p>


<h3>Value</h3>

<p>The returned object depends on the value of argument <code>functionality</code> as follows.
</p>

<ul>
<li> <p><strong><code>"components"</code></strong>: Same as <code>"estimate"</code>
</p>
</li>
<li> <p><strong><code>"conditionals"</code></strong>: Same as <code>"estimate"</code>
</p>
</li>
<li> <p><strong><code>"estimate"</code></strong>: vector/matrix/array. Returns the likelihood for each observation.
</p>
</li>
<li> <p><strong><code>"gradient"</code></strong>: List containing the likelihood and gradient of the model component.
</p>
</li>
<li> <p><strong><code>"output"</code></strong>: Same as <code>"estimate"</code> but also writes summary of input data to internal Apollo log.
</p>
</li>
<li> <p><strong><code>"prediction"</code></strong>: Predicted value at the observation level.
</p>
</li>
<li> <p><strong><code>"preprocess"</code></strong>: Returns a list with pre-processed inputs, based on <code>normalDensity_settings</code>.
</p>
</li>
<li> <p><strong><code>"raw"</code></strong>: Same as <code>"estimate"</code>
</p>
</li>
<li> <p><strong><code>"report"</code></strong>: Dependent variable overview.
</p>
</li>
<li> <p><strong><code>"shares_LL"</code></strong>: Not implemented. Returns a vector of NA with as many elements as observations.
</p>
</li>
<li> <p><strong><code>"validate"</code></strong>: Same as <code>"estimate"</code>, but it also runs a set of tests to validate the function inputs.
</p>
</li>
<li> <p><strong><code>"zero_LL"</code></strong>: Not implemented. Returns a vector of NA with as many elements as observations.
</p>
</li>
</ul>
</div>