<div class="container">

<table style="width: 100%;"><tr>
<td>hzDistinctnessCodeToOffset</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert Horizon Boundary Distinctness to Vertical Offset</h2>

<h3>Description</h3>

<p>This function will convert USDA-NCSS horizon boundary distinctness codes into vertical (+/-) offsets in cm, based on the <a href="https://nrcspad.sc.egov.usda.gov/DistributionCenter/product.aspx?ProductID=991">Field Book for Describing and Sampling Soils, version 3.0</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">hzDistinctnessCodeToOffset(
  x,
  codes = c("very abrupt", "abrupt", "clear", "gradual", "diffuse"),
  offset = c(0.5, 2, 5, 15, 20)/2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>vector of boundary distinctness codes to be converted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>codes</code></td>
<td>
<p>character vector of distinctness terms ('clear') or codes ('C'), case insensitive, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset</code></td>
<td>
<p>vertical offset factors (cm), approximating 1/2 of the transitional zone thickness, see details</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The default offsets are based on the high-end of ranges presented in "transitional zone thickness criteria" from the Field Book version 3.0 (page 2-6). Offsets are returned as 1/2 of the transitional zone thickness so that horizon boundaries can be adjusted up/down from horizon depths. See <code>plotSPC</code>, specifically the <code>hz.distinctness.offset</code> argument for visualization ideas. Missing data in <code>x</code> (NA) or codes that are not defined in <code>codes</code> are returned as 0 offsets.
</p>
<p>Either format (or mixture) are accepted, case insensitive:
</p>

<ul>
<li>
<p> terms: <code>c('very abrupt', 'abrupt', 'clear', 'gradual', 'diffuse')</code>
</p>
</li>
<li>
<p> coded values: <code style="white-space: pre;">⁠c('v', 'a', 'c', 'g', d')⁠</code>
</p>
</li>
</ul>
<p>Additional examples are available in the <a href="https://ncss-tech.github.io/AQP/aqp/hz-boundaries.html">Visualization of Horizon Boundaries tutorial</a>.
</p>


<h3>Value</h3>

<p>vector of offsets with same length as <code>x</code>
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>References</h3>

<p><a href="https://nrcspad.sc.egov.usda.gov/DistributionCenter/product.aspx?ProductID=991">Field Book for Describing and Sampling Soils, version 3.0</a>
</p>


<h3>See Also</h3>

<p><code>plotSPC</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># example data
data(sp1)

# compute 1/2 transitional zone thickness from distinctness codes
sp1$hzdo &lt;- hzDistinctnessCodeToOffset(sp1$bound_distinct)

# convert colors from Munsell to hex-encoded RGB
sp1$soil_color &lt;- with(sp1, munsell2rgb(hue, value, chroma))

# promote to SoilProfileCollection
depths(sp1) &lt;- id ~ top + bottom
hzdesgnname(sp1) &lt;- 'name'

# adjust margins
op &lt;- par(mar=c(0,0,0,1.5))

# sketches, adjust width, adjust text size, include coded hz distinctness offsets
plotSPC(sp1, width=0.3, cex.names=0.75, hz.distinctness.offset = 'hzdo')

# clean-up
par(op)
</code></pre>


</div>