<div class="container">

<table style="width: 100%;"><tr>
<td>createCluster</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a cluster</h2>

<h3>Description</h3>

<p><img src="../help/figures/badge_api_ok.svg" alt="Antares API OK"> (thermal clusters only)
</p>
<p>Create a new thermal or RES (renewable energy source) cluster.
</p>


<h3>Usage</h3>

<pre><code class="language-R">createCluster(
  area,
  cluster_name,
  group = "Other",
  ...,
  list_pollutants = NULL,
  time_series = NULL,
  prepro_data = NULL,
  prepro_modulation = NULL,
  add_prefix = TRUE,
  overwrite = FALSE,
  opts = antaresRead::simOptions()
)

createClusterRES(
  area,
  cluster_name,
  group = "Other RES 1",
  ...,
  time_series = NULL,
  add_prefix = TRUE,
  overwrite = FALSE,
  opts = antaresRead::simOptions()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>area</code></td>
<td>
<p>The area where to create the cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster_name</code></td>
<td>
<p>Name for the cluster, it will prefixed by area name, unless you set <code>add_prefix = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>Group of the cluster, depends on cluster type:
</p>

<ul>
<li>
<p> thermal cluster, one of: Gas, Hard coal, Lignite, Mixed fuel, Nuclear, Oil, Other, Other 2, Other 3, Other 4.
</p>
</li>
<li>
<p> renewable cluster, one of: Wind Onshore, Wind Offshore, Solar Thermal, Solar PV, Solar Rooftop, Other RES 1, Other RES 2, Other RES 3, Other RES 4.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Parameters to write in the Ini file. Careful!
Some parameters must be set as <code>integers</code> to avoid warnings in Antares, for example,
to set <code>unitcount</code>, you'll have to use <code>unitcount = 1L</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>list_pollutants</code></td>
<td>
<p><code>list</code> named with specific pollutants (only for Antares version &gt;= 860)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_series</code></td>
<td>
<p>the "ready-made" 8760-hour time-series available for simulation purposes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prepro_data</code></td>
<td>
<p>Pre-process data, a <code>data.frame</code> or <code>matrix</code>,
default is a matrix with 365 rows and 6 columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prepro_modulation</code></td>
<td>
<p>Pre-process modulation, a <code>data.frame</code> or <code>matrix</code>,
if specified, must have 8760 rows and 1 or 4 columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_prefix</code></td>
<td>
<p>If <code>TRUE</code> (the default), <code>cluster_name</code> will be prefixed by area name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>Logical, overwrite the cluster or not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opts</code></td>
<td>
<p>List of simulation parameters returned by the function
<code>antaresRead::setSimulationPath()</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An updated list containing various information about the simulation.
</p>


<h3>Note</h3>

<p>Parameter <code>list_pollutants</code> is only available for Antares studies &gt;= v8.6.0.
</p>
<p>You must provide named <code>list</code> (numerical values or NULL ) :
</p>
<p><code>list( "nh3"= 0.25, "nox"= 0.45, "pm2_5"= 0.25,   "pm5"= 0.25, "pm10"= 0.25, "nmvoc"= 0.25, "so2"= 0.25,  "op1"= 0.25, "op2"= 0.25, "op3"= 0.25,   "op4"= 0.25, "op5"= NULL, "co2"= NULL)</code>
</p>


<h3>See Also</h3>

<p><code>editCluster()</code> or <code>editClusterRES()</code> to edit existing clusters, <code>removeCluster()</code> or <code>removeClusterRES()</code> to remove clusters.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

library(antaresRead)
library(antaresEditObject)

# Create a cluster :
createCluster(
  area = "fr", 
  cluster_name = "my_cluster",
  group = "other", 
  unitcount = 1L, # or as.integer(1)
  marginal_cost = 50
)
# by default, cluster name is prefixed 
# by the area name
levels(readClusterDesc()$cluster)
# &gt; "fr_my_cluster"

# To prevent this, use `add_prefix`
createCluster(
  area = "fr", 
  cluster_name = "my_cluster",
  add_prefix = FALSE,
  group = "other", 
  marginal_cost = 50
)
levels(readClusterDesc()$cluster)
# &gt; "my_cluster"


# Create a RES cluster :
createClusterRES(
  area = "fr", 
  cluster_name = "my_cluster_res",
  group = "other", 
  unitcount = 1L, # or as.integer(1)
  nominalcapacity = 50,
  ts_interpretation = "power-generation"
) 

# You can also specify that the Time-Series of the RES cluster are
# production factors :
createClusterRES(
  area = "fr", 
  cluster_name = "my_cluster_res",
  group = "other", 
  unitcount = 1L, # or as.integer(1)
  nominalcapacity = 50,
  ts_interpretation = "production-factor"
)


# Pre-process data : 

# this is the default data :
createCluster(
  area = "fr", 
  cluster_name = "my_cluster",
  prepro_data = matrix(
    data = c(rep(1, times = 365 * 2),
             rep(0, times = 365 * 4)), 
    ncol = 6
  )
)

# with a data.frame
createCluster(
  area = "fr", 
  cluster_name = "my_cluster",
  prepro_data = data.frame(
    v1 = rep(7, 365), # column name does not matter
    v2 = rep(27, 365),
    v3 = rep(0.05, 365),
    v4 = rep(0.12, 365),
    v5 = rep(0, 365),
    v6 = rep(1, 365)
  )
)


# Pre-process modulation : 
# this is the default data
createCluster(
  area = "fr", 
  cluster_name = "my_cluster",
  prepro_modulation = matrix(
    data = c(rep(1, times = 365 * 24 * 3),
             rep(0, times = 365 * 24 * 1)),
    ncol = 4
  )
)

# with a data.frame
createCluster(
  area = "fr", 
  cluster_name = "my_cluster",
  prepro_modulation = data.frame(
    var1 = rep(0, 8760), # column name does not matter
    var2 = rep(1, 8760),
    var3 = rep(0, 8760),
    var4 = rep(1, 8760)
  )
)


## End(Not run)
</code></pre>


</div>