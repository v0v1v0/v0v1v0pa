<div class="container">

<table style="width: 100%;"><tr>
<td>as.predictions.frame</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Forms a <code>predictions.frame</code> from a <code>data.frame</code>, ensuring that the correct 
columns are present.</h2>

<h3>Description</h3>

<p>Creates a <code>predictions.frame</code> from a <code>data.frame</code> by adding the 
<code>class</code> <code>predictions.frame</code> to it, and renaming the columns containing 
the  <code>predictions</code>, <code>se</code>, <code>est.status</code> and <code>error.intervals</code>.</p>


<h3>Usage</h3>

<pre><code class="language-R">as.predictions.frame(data, classify = NULL, 
                     predictions = NULL, se = NULL, est.status = NULL, 
                     interval.type = NULL, interval.names = NULL)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>data.frame</code> containing columns giving the variables that uniquely index 
the predicted values and columns with the predicted values, their standard errors 
and, optionally, their estimation status (<code>est.status</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>classify</code></td>
<td>
<p>A <code>character</code> string giving the variables that 
define the margins of the multiway table that was predicted. 
Multiway tables are specified by forming an interaction type 
term from the classifying variables, that is, separating the 
variable names with the <code>:</code> operator. For predicting the overall 
mean, the <code>classify</code> is set to "<code>(Intercept)</code>".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predictions</code></td>
<td>
<p>A <code>character</code> giving the name of the column in <code>data</code> that 
contains the predicted values. This column will be renamed to 
<code>predicted.value</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>se</code></td>
<td>
<p>A <code>character</code> giving the name of the column in <code>data</code> that 
contains the standard errors of the predicted values. This column will 
be renamed to <code>standard.error</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>est.status</code></td>
<td>
<p>A <code>character</code> giving the name of the column in <code>data</code> that 
contains the estimation status of the predicted values. It will have a value 
<code>Estimable</code> for predicted values that have been estimated and a value 
<code>Aliased</code> for predicted values that are <code>NA</code>. If a column named 
<code>est.status</code> is not present in <code>data</code> and <code>est.status</code> is 
<code>NULL</code>, a column <code>est.status</code> will be generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval.type</code></td>
<td>
<p>A <code>character</code> specifying the type of <code>error.intervals</code> 
stored in <code>data</code> that require renaming. If <code>NULL</code>, <code>error.intervals</code> 
will not be renamed, even if they are present. Otherwise, <code>interval.type</code> 
should be set to one of "CI", "SE" or "halfLSD".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval.names</code></td>
<td>
<p>A <code>character</code> specifying the column names of the <code>lower</code> and 
<code>upper</code> limits stored in <code>data</code> that are to be renamed. The 
<code>character</code> must be of length two, with the first element being the name of 
the 'lower' limit and the second element being the name of the 'upper' limit.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An S3-class <code>predictions.frame</code>.</p>


<h3>Author(s)</h3>

<p>Chris Brien</p>


<h3>See Also</h3>

<p><code>asremlPlus-package</code>, <code>predictions.frame</code>,  
<code>is.predictions.frame</code>, <code>predictions.frame</code>, <br><code>validPredictionsFrame</code></p>


<h3>Examples</h3>

<pre><code class="language-R">  data(Oats.dat)
  
  ## Use asreml to get predictions and associated statistics

  ## Not run: 
  m1.asr &lt;- asreml(Yield ~ Nitrogen*Variety, 
                   random=~Blocks/Wplots,
                   data=Oats.dat)
  current.asrt &lt;- as.asrtests(m1.asr)
  Var.pred &lt;- asreml::predict.asreml(m1.asr, classify="Nitrogen:Variety", 
                                      sed=TRUE)
  if (getASRemlVersionLoaded(nchar = 1) == "3")
    Var.pred &lt;- Var.pred$predictions
 #Form predictions.frame changing asreml-R4 names to the standard names, if these are present
 Var.preds &lt;- as.predictions.frame(Var.pred$pvals, se = "std.error", 
                                    est.status = "status")
  
## End(Not run)
  
  ## Use lmerTest and emmmeans to get predictions and associated statistics
  if (requireNamespace("lmerTest", quietly = TRUE) &amp; 
      requireNamespace("emmeans", quietly = TRUE))
  {
    m1.lmer &lt;- lmerTest::lmer(Yield ~ Nitrogen*Variety + (1|Blocks/Wplots),
                              data=Oats.dat)
    Var.emm &lt;- emmeans::emmeans(m1.lmer, specs = ~ Nitrogen:Variety)
    Var.preds &lt;- summary(Var.emm)
    Var.preds &lt;- as.predictions.frame(Var.preds, predictions = "emmean", 
                                      se = "SE", interval.type = "CI", 
                                      interval.names = c("lower.CL", "upper.CL"))
  }

  ## Check the class and validity of the alldiffs object
  if (exists("Var.preds"))
  {
    is.predictions.frame(Var.preds)
    validPredictionsFrame(Var.preds)
  }
</code></pre>


</div>