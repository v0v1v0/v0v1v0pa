<div class="container">

<table style="width: 100%;"><tr>
<td>derive_vars_dtm_to_tm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Derive Time Variables from Datetime Variables</h2>

<h3>Description</h3>

<p>This function creates time variable(s) as output from datetime variable(s)
</p>


<h3>Usage</h3>

<pre><code class="language-R">derive_vars_dtm_to_tm(dataset, source_vars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>Input dataset
</p>
<p>The variables specified by the <code>source_vars</code> argument are expected to be in the dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source_vars</code></td>
<td>
<p>A list of datetime variables created using <code>exprs()</code> from
which time is to be extracted</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The names of the newly added variables are automatically set by replacing the
<code>--DTM</code> suffix of the <code>source_vars</code> with <code>--TM</code>. The <code>--TM</code> variables are created
using the <code>{hms}</code> package.
</p>


<h3>Value</h3>

<p>A data frame containing the input dataset with the corresponding time
(<code>--TM</code>) variable(s) of all datetime variables (<code>--DTM</code>) specified in
<code>source_vars</code> with the correct name.
</p>


<h3>See Also</h3>

<p>Date/Time Derivation Functions that returns variable appended to dataset: 
<code>derive_var_trtdurd()</code>,
<code>derive_vars_dt()</code>,
<code>derive_vars_dtm()</code>,
<code>derive_vars_dtm_to_dt()</code>,
<code>derive_vars_duration()</code>,
<code>derive_vars_dy()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(tibble)
library(dplyr, warn.conflicts = FALSE)
library(lubridate)

adcm &lt;- tribble(
  ~USUBJID, ~TRTSDTM, ~ASTDTM, ~AENDTM,
  "PAT01", "2012-02-25 23:41:10", "2012-02-28 19:03:00", "2013-02-25 23:32:16",
  "PAT01", "", "2012-02-28 19:00:00", "",
  "PAT01", "2017-02-25 23:00:02", "2013-02-25 19:00:15", "2014-02-25 19:00:56",
  "PAT01", "2017-02-25 16:00:00", "2017-02-25 14:25:00", "2017-03-25 23:00:00",
  "PAT01", "2017-02-25 16:05:17", "2017-02-25 14:20:00", "2018-04-29 14:06:45",
) %&gt;%
  mutate(
    TRTSDTM = as_datetime(TRTSDTM),
    ASTDTM = as_datetime(ASTDTM),
    AENDTM = as_datetime(AENDTM)
  )

adcm %&gt;%
  derive_vars_dtm_to_tm(exprs(TRTSDTM)) %&gt;%
  select(USUBJID, starts_with("TRT"), everything())

adcm %&gt;%
  derive_vars_dtm_to_tm(exprs(TRTSDTM, ASTDTM, AENDTM)) %&gt;%
  select(USUBJID, starts_with("TRT"), starts_with("AS"), starts_with("AE"))
</code></pre>


</div>