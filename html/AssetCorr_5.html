<div class="container">

<table style="width: 100%;"><tr>
<td>interALL</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function to use multiple estimators simultaneously
</h2>

<h3>Description</h3>

<p>To give a first insight of the default time series, this function combines multiple estimator functions and visualize the results.
</p>


<h3>Usage</h3>

<pre><code class="language-R">interALL(d1,n1,d2,n2,rho1,rho2, B=NA, DB=NA, JC=FALSE, CI_Boot=NA, plot=FALSE, 
type="bca",Estimator=c("Copula","Cov","JDP","MLE"),show_progress=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>d1</code></td>
<td>
<p>a vector, containing the default time series of sector 1.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n1</code></td>
<td>
<p>a vector, containing the number of obligors at the beginning of the period in sector 1.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d2</code></td>
<td>
<p>a vector, containing the default time series of sector 2.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n2</code></td>
<td>
<p>a vector, containing the number of obligors at the beginning of the period in sector 2.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho1</code></td>
<td>
<p>estimated intra correlation of sector 1.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho2</code></td>
<td>
<p>estimated intra correlation of sector 2.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>an integer, indicating how many bootstrap repetitions should be used for the single bootstrap corrected estimate.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DB</code></td>
<td>
<p>a combined vector, indicating how many bootstrap repetitions should be used for the inner (first entry) and outer loop (second entry) to correct the bias using the double bootstrap.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>JC</code></td>
<td>
<p> a logical variable, indicating if the jackknife corrected estimate should be calculated.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI_Boot</code></td>
<td>
<p>a number, indicating the desired confidence interval if the single bootstrap correction is specified.
By default, the interval is calculated as the bootstrap corrected and accelerated confidence interval (Bca). Furthermore, the analytical confidence intervals are provided, using the same value as <code>CI_Boot</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>a logical variable, indicating whether a plot of the default time series and the estimates should be generated using the <code>multiplot</code> function of Teetor (2011).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>a string, indicating the desired method to calculate the bootstrap confidence intervals. For more details see <code>boot.ci</code>. Studendized confidence intervals are not supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Estimator</code></td>
<td>
<p>a combined string, indicating which estimators should be used. All estimators are set as default.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_progress</code></td>
<td>
<p>a logical variable, indicating whether a progress bar should be displayed.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To give an first insight, the function provides an overview of the default time series and estimates using different estimators simultaneously. 
If <code>DB</code> is specified, the single bootstrap corrected estimate will be calculated by using the bootstrap values of the outer loop.
</p>


<h3>Value</h3>

<p>The returned value is a data frame, containing the following columns:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Estimator</code></td>
<td>
<p>Name of the applied estimator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Estimate</code></td>
<td>
<p>Value of the calculated estimate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Type</code></td>
<td>
<p>String, which indicating corrected/non-corrected estimates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correction</code></td>
<td>
<p>Name of the correction method</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>Number of single bootstrap repetitions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DB</code></td>
<td>
<p>Number of the double bootstrap repetitions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI_Boot</code></td>
<td>
<p>Selected two-sided bootstrap confidence interval</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI</code></td>
<td>
<p>A string, indicating if the corresponding value is the upper or lower bound</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Kevin Jakob
</p>


<h3>References</h3>

<p>Chang J, Hall P (2015).
“Double-bootstrap methods that use a single double-bootstrap simulation.”
<em>Biometrika</em>, <b>102</b>(1), 203–214.
</p>
<p>De Servigny A, Renault O (2002).
“Default correlation: empirical evidence.”
<em>Working Paper, Standard and Poors</em>.
Available at: <a href="https://www.semanticscholar.org/paper/Default-correlation%3A-empirical-evidence-Servigny-Renault/aae251436d0e3b489951c0d38463d71106755675">https://www.semanticscholar.org/paper/Default-correlation%3A-empirical-evidence-Servigny-Renault/aae251436d0e3b489951c0d38463d71106755675</a>.
</p>
<p>Duellmann K, Gehde-Trapp M (2004).
“Systematic risk in recovery rates: an empirical analysis of US corporate credit exposures.”
<em>Bundesbank Series 2, Discussion Paper</em>.
Available at SSRN: <a href="http://hdl.handle.net/10419/19729">http://hdl.handle.net/10419/19729</a>. Accessed: 02.11.2017.
</p>
<p>Efron B, Tibshirani RJ (1994).
<em>An introduction to the bootstrap</em>.
CRC press.
</p>
<p>Frei C, Wunsch M (2018).
“Moment Estimators for Autocorrelated Time Series and their Application to Default Correlations.”
<em>Journal of Credit Risk</em>, <b>14</b>, 1–29.
</p>
<p>Gordy MB (2000).
“A comparative anatomy of credit risk models.”
<em>Journal of Banking &amp; Finance</em>, <b>24</b>(1), 119–149.
</p>
<p>Gordy MB, Heitfield E (2010).
“Small-sample estimation of models of portfolio credit risk.”
In <em>Recent Advances in Financial Engineering: Proceedings of the KIER-TMU International Workshop on Financial Engineering, 2009: Otemachi, Sankei Plaza, Tokyo, 3-4 August 2009</em>, 43–63.
</p>
<p>Kalkbrener M, Onwunta A (2010).
“Validating structural credit portfolio models.”
<em>Model risk - identification, measurement and management. Risk Books, London</em>, 233–261.
</p>
<p>Lucas DJ (1995).
“Default correlation and credit analysis.”
<em>The Journal of Fixed Income</em>, <b>4</b>(4), 76–87.
</p>
<p>Meyer C (2009).
“Estimation of intra-sector asset correlations.”
<em>The Journal of Risk Model Validation</em>, <b>3</b>(3), 47–79.
</p>
<p>Teetor P (2011).
<em>R Cookbook: Proven recipes for data analysis, statistics, and graphics</em>.
O'Reilly Media, Inc.
</p>


<h3>See Also</h3>

<p><code>intraAMM</code>, <code>intraFMM</code>, <code>intraJDP2</code>
<code>intraMLE</code>, <code>intraJDP1</code>, <code>intraCMM</code></p>


<h3>Examples</h3>

<pre><code class="language-R">

set.seed(111)
Psi=rmvnorm(20,sigma=matrix(c(1,0.5,0.5,1),2))
PDcond1=pnorm((qnorm(0.01)-sqrt(0.05)*Psi[,1])/sqrt(1-0.05))
PDcond2=pnorm((qnorm(0.01)-sqrt(0.2)*Psi[,2])/sqrt(1-0.2))

D1=rbinom(20,1000,PDcond1)
D2=rbinom(20,1000,PDcond2)

N1=N2=rep(1000,20)

DTS=cbind(D1,D2)
N=cbind(N1,N2)

rho1=intraMLE(D1,N1)$Original
rho2=intraMLE(D2,N2)$Original

#Point Estimates
interALL(D1,N1,D2,N2,rho1,rho2, plot=TRUE)

#Bootstrap corrected estimates of all available estimators:
InterCorr=interALL(D1,N1,D2,N2,rho1,rho2, B=500, CI_Boot=0.95 , plot=TRUE, show_progress=TRUE)


#Jackknife correction
InterCorr=interALL(D1,N1,D2,N2,rho1,rho2, JC=TRUE, plot=TRUE)

#Double Bootstrap correction with 10 repetitions in the inner loop and 50 in the outer loop
InterCorr=interALL(D1,N1,D2,N2,rho1,rho2, DB=c(10,50), plot=TRUE)




</code></pre>


</div>