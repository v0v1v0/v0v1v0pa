<div class="container">

<table style="width: 100%;"><tr>
<td>add_features</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Features to Feature Layer</h2>

<h3>Description</h3>

<p>Delete features from a feature layer based on object ID, a where clause, or a
spatial filter.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_features(
  x,
  .data,
  chunk_size = 2000,
  match_on = c("name", "alias"),
  rollback_on_failure = TRUE,
  token = arc_token()
)

update_features(
  x,
  .data,
  match_on = c("name", "alias"),
  token = arc_token(),
  rollback_on_failure = TRUE,
  ...
)

delete_features(
  x,
  object_ids = NULL,
  where = NULL,
  filter_geom = NULL,
  predicate = "intersects",
  rollback_on_failure = TRUE,
  token = arc_token(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class <code>FeatureLayer</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>an object of class <code>sf</code> or <code>data.frame</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chunk_size</code></td>
<td>
<p>the maximum number of features to add at a time</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>match_on</code></td>
<td>
<p>whether to match on the alias or the field name. Default,
the alias. See Details for more.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rollback_on_failure</code></td>
<td>
<p>default <code>TRUE</code>. Specifies whether the edits should be
applied only if all submitted edits succeed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token</code></td>
<td>
<p>default <code>arc_token()</code>. An <code>httr2_token</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional query parameters passed to the API.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object_ids</code></td>
<td>
<p>a numeric vector of object IDs to be deleted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>where</code></td>
<td>
<p>a simple SQL where statement indicating which features should be
deleted. When the where statement evaluates to <code>TRUE</code>, those values will be
deleted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_geom</code></td>
<td>
<p>an object of class <code>bbox</code>, <code>sfc</code> or <code>sfg</code> used to filter
query results based on a predicate function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predicate</code></td>
<td>
<p>Spatial predicate to use with <code>filter_geom</code>. Default
<code>"intersects"</code>. Possible options are <code>"intersects"</code>, <code>"contains"</code>,
<code>"crosses"</code>,  <code>"overlaps"</code>,  <code>"touches"</code>, and <code>"within"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
</p>
<p>For a more detailed guide to adding, updating, and deleting features, view the
tutorial on the <a href="https://r.esri.com/r-bridge-site/location-services/workflows/add-delete-update.html">R-ArcGIS Bridge website</a>.
</p>
<p>Regarding the <code>match_on</code> argument:when publishing an object to an ArcGIS Portal
from R, the object's names are provided as the alias. The object's names are
subject to change according to the standards of the ArcGIS REST API. For example.
<code>"Sepal.Length"</code> is changed to <code>"Sepal_Width"</code> in the <code>name</code> field but the alias
remains <code>"Sepal.Length"</code>. For that reason, we match on the alias name by default.
Change this argument to match based on the field name.
</p>


<h3>Value</h3>


<ul>
<li> <p><code>add_features()</code> returns a <code>data.frame</code> with columns <code>objectId</code>, <code>uniqueId</code>, <code>globalId</code>, <code>success</code>
</p>
</li>
<li> <p><code>update_features()</code> returns a list with an element named <code>updateResults</code> which is a <code>data.frame</code> with columns <code>objectId</code>, <code>uniqueId</code>, <code>globalId</code>, <code>success</code>
</p>
</li>
<li> <p><code>delete_features()</code> returns a list with an element named <code>deleteResults</code> which is a <code>data.frame</code> with columns <code>objectId</code>, <code>uniqueId</code>, <code>globalId</code>, <code>success</code>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
  # this is pseudo-code and will not work
  flayer &lt;- arc_open(furl)

  # add sf objects to existing feature service
  add_features(flayer, sfobj)

  # delete all features
  delete_features(flayer, where = "1 = 1")

  # update features
  update_features(flayer, dfobj)

## End(Not run)
</code></pre>


</div>