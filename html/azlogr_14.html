<div class="container">

<table style="width: 100%;"><tr>
<td>set_log_config</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set logging configuration</h2>

<h3>Description</h3>

<p>Set the logging configuration once by executing this function. There won't be
any need to set them every time while logging something via
<code>logger_level</code> or any wrapper of that, e.g.
<code>logger_info</code> function(s).
</p>


<h3>Usage</h3>

<pre><code class="language-R">set_log_config(
  log_fields = c("level", "time", "msg"),
  additional_fields = NULL,
  enforce_ascii_msg = TRUE,
  enforce_tz_utc = TRUE,
  log_to_azure = TRUE,
  log_type = "log_from_r",
  customer_id_env = "AZ_LOG_ID",
  shared_key_env = "AZ_LOG_KEY"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>log_fields</code></td>
<td>
<p>Character vector of field names to be included in the JSON.
These field names are automatically collected by
<code>get_logger_meta_variables</code> function, please refer
to that function's documentation to see which fields are collected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>additional_fields</code></td>
<td>
<p>A named vector of type list with key-value pairs of
additional meta data which needs to be added in logging context on top of
<code>log_fields</code>. The respective value of each key is expected to be of
length 1. It is <code>NULL</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>enforce_ascii_msg</code></td>
<td>
<p>If <code>TRUE</code> (default), the logging message is
guaranteed to have all non-ASCII characters escaped. If <code>FALSE</code>, the
characters will be logged as-is. Please note, it is better to ensure
ASCII, otherwise there might be error while sending the HTTP POST request
to 'Azure Log Analytics' workspace.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>enforce_tz_utc</code></td>
<td>
<p>If <code>TRUE</code> (default), the logging time field is
converted to UTC timezone while sending the logging dump to 'Azure Log
Analytics' workspace. If <code>FALSE</code>, then the local time captured by
<code>Sys.time</code> is recorded in the time field.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log_to_azure</code></td>
<td>
<p>If <code>TRUE</code> (default), then logs will be sent to
'Azure Log Analytics' workspace and console. Else if <code>FALSE</code> then
logs will not be sent to 'Azure Log Analytics' workspace, it will only be
displayed on console, which is the default layout of <code>'logger'</code>
package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log_type</code></td>
<td>
<p>Single element character vector is expected. Logs will be
posted to this event on 'Azure Log Analytics'. For details, check this:
<a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/data-collector-api?tabs=python/">https://learn.microsoft.com/en-us/azure/azure-monitor/logs/data-collector-api?tabs=python/</a>
. Default value is <code>"log_from_r"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>customer_id_env</code></td>
<td>
<p>The name of the environment variable (default is
<code>AZ_LOG_ID</code>) which stores the workspace ID of the 'Azure Log
Analytics' workspace. Please refer
<a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/data-collector-api?tabs=powershell#sample-requests/">https://learn.microsoft.com/en-us/azure/azure-monitor/logs/data-collector-api?tabs=powershell#sample-requests/</a>
to see how you may get the required workspace ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shared_key_env</code></td>
<td>
<p>The name of the environment variable (default is
<code>AZ_LOG_KEY</code>) which stores the shared key of the 'Azure Log
Analytics' workspace. Please refer
<a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/data-collector-api?tabs=powershell#sample-requests/">https://learn.microsoft.com/en-us/azure/azure-monitor/logs/data-collector-api?tabs=powershell#sample-requests/</a>
to see how you may get the required shared key.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>It saves the configuration in an environment enclosed within this
package. Returns nothing explicitly.
</p>


<h3>Examples</h3>

<pre><code class="language-R">  set_log_config(log_fields = c("level", "time", "msg", "user", "pid"))
  set_log_config(enforce_tz_utc = FALSE, log_to_azure = FALSE)

</code></pre>


</div>