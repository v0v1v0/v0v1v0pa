<div class="container">

<table style="width: 100%;"><tr>
<td>estimator</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an estimator</h2>

<h3>Description</h3>

<p>An Estimator wraps run configuration information for specifying details
of executing an R script. Running an Estimator experiment
(using <code>submit_experiment()</code>) will return a <code>ScriptRun</code> object and
execute your training script on the specified compute target.
</p>
<p>To define the environment to use for training, you can either directly
provide the environment-related parameters (e.g. <code>cran_packages</code>,
<code>custom_docker_image</code>) to <code>estimator()</code>, or you can provide an
<code>Environment</code> object to the <code>environment</code> parameter. For more information
on the predefined Docker images that are used for training if
<code>custom_docker_image</code> is not specified, see the documentation
<a href="https://azure.github.io/azureml-sdk-for-r/reference/r_environment.html#predefined-docker-images">here</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">estimator(
  source_directory,
  compute_target = NULL,
  vm_size = NULL,
  vm_priority = NULL,
  entry_script = NULL,
  script_params = NULL,
  cran_packages = NULL,
  github_packages = NULL,
  custom_url_packages = NULL,
  custom_docker_image = NULL,
  image_registry_details = NULL,
  use_gpu = FALSE,
  environment_variables = NULL,
  shm_size = NULL,
  max_run_duration_seconds = NULL,
  environment = NULL,
  inputs = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>source_directory</code></td>
<td>
<p>A string of the local directory containing
experiment configuration and code files needed for the training job.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compute_target</code></td>
<td>
<p>The <code>AmlCompute</code> object for the compute target
where training will happen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vm_size</code></td>
<td>
<p>A string of the VM size of the compute target that will be
created for the training job. The list of available VM sizes
are listed <a href="https://docs.microsoft.com/azure/cloud-services/cloud-services-sizes-specs">here</a>.
Provide this parameter if you want to create AmlCompute as the compute target
at run time, instead of providing an existing cluster to the <code>compute_target</code>
parameter. If <code>vm_size</code> is specified, a single-node cluster is automatically
created for your run and is deleted automatically once the run completes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vm_priority</code></td>
<td>
<p>A string of either <code>'dedicated'</code> or <code>'lowpriority'</code> to
specify the VM priority of the compute target that will be created for the
training job. Defaults to <code>'dedicated'</code>. This takes effect only when the
<code>vm_size</code> parameter is specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>entry_script</code></td>
<td>
<p>A string representing the relative path to the file used
to start training.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>script_params</code></td>
<td>
<p>A named list of the command-line arguments to pass to
the training script specified in <code>entry_script</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cran_packages</code></td>
<td>
<p>A list of <code>cran_package</code> objects to be installed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>github_packages</code></td>
<td>
<p>A list of <code>github_package</code> objects to be installed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>custom_url_packages</code></td>
<td>
<p>A character vector of packages to be installed
from local directory or custom URL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>custom_docker_image</code></td>
<td>
<p>A string of the name of the Docker image from
which the image to use for training will be built. If not set, a predefined
image will be used as the base image. To use an image from a
private Docker repository, you will also have to specify the
<code>image_registry_details</code> parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>image_registry_details</code></td>
<td>
<p>A <code>ContainerRegistry</code> object of the details of
the Docker image registry for the custom Docker image.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_gpu</code></td>
<td>
<p>Indicates whether the environment to run the experiment should
support GPUs. If <code>TRUE</code>, a predefined GPU-based Docker image will be used in the
environment. If <code>FALSE</code>, a predefined CPU-based image will be used. Predefined
Docker images (CPU or GPU) will only be used if the <code>custom_docker_image</code> parameter
is not set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>environment_variables</code></td>
<td>
<p>A named list of environment variables names
and values. These environment variables are set on the process where the user
script is being executed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shm_size</code></td>
<td>
<p>A string for the size of the Docker container's shared
memory block. For more information, see
<a href="https://docs.docker.com/engine/reference/run/">Docker run reference</a>.
If not set, a default value of <code>'2g'</code> is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_run_duration_seconds</code></td>
<td>
<p>An integer of the maximum allowed time for
the run. Azure ML will attempt to automatically cancel the run if it takes
longer than this value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>environment</code></td>
<td>
<p>The <code>Environment</code> object that configures the R
environment where the experiment is executed. This parameter is mutually
exclusive with the other environment-related parameters <code>custom_docker_image</code>
, <code>image_registry_details</code>, <code>use_gpu</code>, <code>environment_variables</code>, <code>shm_size</code>,
<code>cran_packages</code>, <code>github_packages</code>, and <code>custom_url_packages</code> and if set
will take precedence over those parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inputs</code></td>
<td>
<p>A list of DataReference objects or DatasetConsumptionConfig
objects to use as input.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The <code>Estimator</code> object.
</p>


<h3>Examples</h3>

<pre>r_env &lt;- r_environment(name = "r-env",
                       cran_packages = list(cran_package("dplyr"),
                                            cran_package("ggplot2")))
est &lt;- estimator(source_directory = ".",
                 entry_script = "train.R",
                 compute_target = compute_target,
                 environment = r_env)
</pre>


<h3>See Also</h3>

<p><code>r_environment()</code>, <code>container_registry()</code>, <code>submit_experiment()</code>,
<code>dataset_consumption_config()</code>, <code>cran_package()</code>
</p>


</div>