<div class="container">

<table style="width: 100%;"><tr>
<td>iplot_abundance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot of the Relative Abundance of the Pollen Types</h2>

<h3>Description</h3>

<p>Generates a barplot based on the relative abundance (as percentage) in the air of the pollen types with respect to the total amounts
</p>


<h3>Usage</h3>

<pre><code class="language-R">iplot_abundance(data, n.types = 15, y.start = NULL, y.end = NULL,
  interpolation = TRUE, int.method = "lineal", col.bar = "#E69F00",
  type.plot = "static", result = "plot", export.plot = FALSE,
  export.format = "pdf", exclude = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>data.frame</code> object including the general database where calculation of the pollen season must be applied. This <code>data.frame</code> must include a first column in <code>Date</code> format and the rest of columns in <code>numeric</code> format belonging to each pollen type by column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.types</code></td>
<td>
<p>A <code>numeric</code> (<code>integer</code>) value specifying the number of the most abundant pollen types that must be represented in the plot of the relative abundance. A more detailed information about the selection of the considered pollen types may be consulted in <strong>Details</strong>. The <code>n.types</code> argument will be <code>15</code> types by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.start, y.end</code></td>
<td>
<p>A <code>numeric</code> (<code>integer</code>) value specifying the period selected to calculate relative abundances of the pollen types (<code>start year _ end year</code>). If <code>y.start</code> and <code>y.end</code> are not specified (<code>NULL</code>), the entire database will be used to generate the pollen calendar. The <code>y.start</code> and <code>y.end</code> arguments will be <code>NULL</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interpolation</code></td>
<td>
<p>A <code>logical</code> value. If <code>FALSE</code> the interpolation of the pollen data is not applicable. If <code>TRUE</code> an interpolation of the pollen series will be applied to complete the gaps with no data before the calculation of the pollen season. The <code>interpolation</code> argument will be <code>TRUE</code> by default. A more detailed information about the interpolation method may be consulted in <strong>Details</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>int.method</code></td>
<td>
<p>A <code>character</code> string specifying the method selected to apply the interpolation method in order to complete the pollen series. The implemented methods that may be used are: <code>"lineal"</code>, <code>"movingmean"</code>, <code>"spline"</code> or <code>"tseries"</code>. The <code>int.method</code> argument will be <code>"lineal"</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.bar</code></td>
<td>
<p>A <code>character</code> string specifying the color of the bars to generate the graph showing the relative abundances of the pollen types. The <code>color</code> argument will be <code>#E69F00</code> by default, but any color may be selected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type.plot</code></td>
<td>
<p>A <code>character</code> string specifying the type of plot selected to show the plot showing the relative abundance of the pollen types. The implemented types that may be used are: <code>static</code> generates a static <strong>ggplot</strong> object and <code>dynamic</code> generates a dynamic <strong>plotly</strong> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result</code></td>
<td>
<p>A <code>character</code> string specifying the output for the function. The implemented outputs that may be obtained are: <code>"plot"</code> and <code>"table"</code>. The argument <code>result</code> will be <code>"plot"</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>export.plot</code></td>
<td>
<p>A <code>logical</code> value specifying if a plot saved in the working directory will be required or not. If <code>FALSE</code> graphical results will only be displayed in the active graphics window. If <code>TRUE</code> graphical results will be displayed in the active graphics window and also a <em>pdf</em> or <em>png</em> file (according to the <code>export.format</code> argument) will be saved within the <em>plot_AeRobiology</em> directory automatically created in the working directory. This argument is applicable only for <code>"static"</code> plots. The <code>export.plot</code> will be <code>FALSE</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>export.format</code></td>
<td>
<p>A <code>character</code> string specifying the format selected to save the plot showing the relative abundance of the pollen types. The implemented formats that may be used are: <code>"pdf"</code> and <code>"png"</code>. This argument is applicable only for <code>"static"</code> plots. The <code>export.format</code> will be <code>"pdf"</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude</code></td>
<td>
<p>A <code>character</code> string vector with the names of the pollen types to be excluded from the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other additional arguments may be used to customize the exportation of the plots using <code>"pdf"</code> or <code>"png"</code> files and therefore arguments from <code>pdf</code> and <code>png</code> functions (<span class="pkg">grDevices</span> package) may be implemented. For example, for <em>pdf</em> files the user may custom the arguments: <code>width</code>, <code>height</code>, <code>family</code>, <code>title</code>, <code>fonts</code>, <code>paper</code>, <code>bg</code>, <code>fg</code>, <code>pointsize...</code>; and for <em>png</em> files the user may custom the arguments: <code>width</code>, <code>height</code>, <code>units</code>, <code>pointsize</code>, <code>bg</code>, <code>res...</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function allows to calculate the relative abundance of the pollen types in the air from a database and to display a barplot with the percentage representation of the main pollen types as the graph reported by <em>Rojo et al. (2016)</em>. This plot will be generated only for the specified number of the most abundant pollen types using the <code>n.types</code> argument by the user.<br><br>
Pollen time series frequently have different gaps with no data and this fact could be a problem for the calculation of specific methods for defining the pollen season even providing incorrect results. In this sense by default a linear interpolation will be carried out to complete these gaps before to define the pollen season (<code>interpolation = TRUE</code>). Additionally, the users may select other interpolation methods using the <code>int.method</code> argument, as <code>"lineal"</code>, <code>"movingmean"</code>, <code>"spline"</code> or <code>"tseries"</code>. For more information to see the <code>interpollen</code> function.
</p>


<h3>Value</h3>

<p>This function returns different results:<br><br><code>plot</code> in the active graphics window displaying the pollen calendar generated by the user when <code>result = "plot"</code>. This <code>plot</code> may be included in an object by assignment operators.<br><br><code>data.frame</code> including the yearly average pollen amounts for each pollen types used to generate the pollen of the relative abundance when <code>result = "table"</code>. This <code>data.frame</code> will be included in an object named <code>annual.sum.data</code>.<br><br>
If <code>export.plot = FALSE</code> graphical results will only be displayed in the active graphics window as <strong>ggplot</strong> graph. Additional characteristics may be incorporated to the plot by <code>ggplot</code> syntax (see <span class="pkg">ggplot2</span> package).<br><br>
If <code>export.plot = TRUE</code> and <code>export.format = pdf</code> a <em>pdf</em> file with the plot will be saved within the <em>plot_AeRobiology</em> directory created in the working directory. This option is applicable only for <code>"static"</code> plots. Additional characteristics may be incorporated to the exportation as <em>pdf</em> file (see <span class="pkg">grDevices</span> package).<br><br>
If <code>export.plot = TRUE</code> and <code>export.format = png</code> a <em>png</em> file with the plot will be saved within the <em>plot_AeRobiology</em> directory created in the working directory. This option is applicable only for <code>"static"</code> plots. Additional characteristics may be incorporated to the exportation as <em>png</em> file (see <span class="pkg">grDevices</span> package).<br><br>
If <code>type.plot = dynamic</code> graphical results will be displayed in the active Viewer window as <strong>plotly</strong> graph. Additional characteristics may be incorporated to the plot by <code>plotly</code> syntax (see <span class="pkg">plotly</span> package).
</p>


<h3>References</h3>

<p>Rojo, J., Rapp, A., Lara, B., Sabariego, S., Fernandez_Gonzalez, F. and Perez_Badia, R., 2016. Characterisation of the airborne pollen spectrum in Guadalajara (central Spain) and estimation of the potential allergy risk. <em>Environmental Monitoring and Assessment</em>, 188(3), p.130.
</p>


<h3>See Also</h3>

<p><code>interpollen</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("munich_pollen")
iplot_abundance (munich_pollen, interpolation = FALSE, export.plot = FALSE)
</code></pre>


</div>