<div class="container">

<table style="width: 100%;"><tr>
<td>hz_dissolve</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Dissolving horizon boundaries by grouping variables</h2>

<h3>Description</h3>

<p>This function dissolves or combines horizons that have a common set of grouping variables. It only combines those horizon records that are sequential (e.g. share a horizon boundary). Thus, it can be used to identify discontinuities in the grouping variables along a profile and their unique depths. It is particularly useful for determining the depth to the top or bottom of horizons with a specific category, and should be simpler than previous methods that require aggregating over profiles.
</p>


<h3>Usage</h3>

<pre><code class="language-R">hz_dissolve(
  object,
  by,
  idcol = "id",
  depthcols = c("top", "bottom"),
  collapse = FALSE,
  order = FALSE
)

dissolve_hz(
  object,
  by,
  id = "idcol",
  hztop = "top",
  hzbot = "bottom",
  collapse = FALSE,
  order = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>a <code>data.frame</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>character: column names, to be used as grouping variables, within the object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idcol</code></td>
<td>
<p>character: column name of the pedon ID within the object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depthcols</code></td>
<td>
<p>a character vector of length 2 specifying the names of the horizon depths (e.g. <code>c("top", "bottom")</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse</code></td>
<td>
<p>logical: indicating whether to not combine grouping variables before dissolving.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>logical: indicating whether or not to order the object by the id, hztop, and hzbot columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>deprecated and replaced with idcol.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hztop</code></td>
<td>
<p>deprecated and replaced by depthcols.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hzbot</code></td>
<td>
<p>deprecated and replaced by depthcols.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function assumes the profiles and horizons within the object follow the logic defined by <code>checkHzDepthLogic</code> (e.g. records are ordered sequentially by id, hztop, and hzbot and without gaps). If the records are not ordered, set the <code>order = TRUE</code>.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with the original idcol, by grouping variables, and non-consecutive horizon depths.
</p>


<h3>Author(s)</h3>

<p>Stephen Roecker
</p>


<h3>See Also</h3>

<p><code>hz_lag()</code>, <code>hz_intersect()</code>, <code>hz_segment()</code> , <code>checkHzDepthLogic()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# example 1
data(jacobs2000)
spc &lt;- jacobs2000

spc$dep_5 &lt;- spc$depletion_pct &gt;=5
spc$genhz &lt;- generalize.hz(spc$name, c("A", "E", "B", "C"), c("A", "E", "B", "C")) 
h &lt;- horizons(spc)

test &lt;- hz_dissolve(h, by = c("genhz", "dep_5"), idcol = "id", depthcols = c("top", "bottom"))

vars &lt;- c("id", "top", "bottom", "genhz", "dep_5")
h[h$id == "92-1", vars]
test[test$id == "92-1", ]


# example 2
df &lt;- data.frame(
    id = 1,
    top    = c(0, 5,  10, 15, 25, 50), 
    bottom = c(5, 10, 15, 25, 50, 100),
    hzname = c("A1",  "A2",  "E/A", "2Bt1", "2Bt2", "2C"),
    genhz  = c("A",   "A",   "E",   "2Bt",  "2Bt", "2C"),
    texcl  = c("sil", "sil", "sil", "sl",   "sl",   "s")
    )

df

hz_dissolve(df, c("genhz", "texcl"))
hz_dissolve(df, c("genhz", "texcl"), collapse = TRUE)

test &lt;- hz_dissolve(df, "genhz")
subset(test, value == "2Bt")

</code></pre>


</div>