<div class="container">

<table style="width: 100%;"><tr>
<td>cif_aiptw</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Augmented Inverse Probability of Treatment Weighted CIFs
</h2>

<h3>Description</h3>

<p>This page explains the details of estimating augmented inverse probability of treatment weighted cumulative incidence functions for competing risks data (<code>method="aiptw"</code> in the <code>adjustedcif</code> function). All regular arguments of the <code>adjustedcif</code> function can be used. Additionally, the <code>outcome_model</code> argument and the <code>treatment_model</code> argument have to be specified in the <code>adjustedcif</code> call. Further arguments specific to this method are listed below.
</p>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>outcome_model</code></td>
<td>

<p>[<strong>required</strong>] Must be a <code>CauseSpecificCox</code> model object created using the <code>CSC</code> function, modeling the time-to-event mechanism. See details and examples.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment_model</code></td>
<td>

<p>[<strong>required</strong>] Must be a <code>glm</code> model object with <code>variable</code> as response variable. See details and examples.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>censoring_model</code></td>
<td>

<p>Must be a <code>coxph</code> model object, modeling the censoring mechanism or <code>NULL</code>. If <code>NULL</code> (default) independent censoring is assumed. See details and examples.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>Whether to print estimation information of the <code>ate</code> function in the <span class="pkg">riskRegression</span> package. Defaults to <code>FALSE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Further arguments passed to <code>ate</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>


<ul>
<li>
<p><strong>Type of Adjustment:</strong> Requires both a treatment assignment model (<code>glm</code>) and a outcome model (<code>CSC</code>). Also allows, but does not rely on, an additional model describing the censoring mechanism (a <code>coxph</code> object).
</p>
</li>
<li>
<p><strong>Doubly-Robust:</strong> Estimates are Doubly-Robust.
</p>
</li>
<li>
<p><strong>Categorical groups:</strong> Currently only two groups in <code>variable</code> are allowed. Must still be a factor variable.
</p>
</li>
<li>
<p><strong>Approximate Variance:</strong> Calculations to approximate the variance and confidence intervals are available.
</p>
</li>
<li>
<p><strong>Allowed Time Values:</strong> Allows both continuous and integer time.
</p>
</li>
<li>
<p><strong>Bounded Estimates:</strong> Estimates are not guaranteed to be bounded in the 0 to 1 probability range.
</p>
</li>
<li>
<p><strong>Monotone Function:</strong> Estimates are not guaranteed to be monotone.
</p>
</li>
<li>
<p><strong>Dependencies:</strong> This method relies on the <span class="pkg">riskRegression</span> package.
</p>
</li>
</ul>
<p>Instead of only modeling the outcome mechanism or the treatment assignment mechanism, both kind of models are required to use this method. If either of those models are correctly specified, unbiased estimates will be obtained. Can also be used to adjust for dependent censoring using a Cox-Regression model. An obvious advantage of this method is it's doubly robust property. This however comes at the price of some efficiency. It is also possible that some estimates fall outside the 0 and 1 probability bounds, particularly if the time is near 0 or the maximal observed event time. There is also no guarantee that the estimated CIFs will be monotonically increasing. For more information on the methods the user is referred to the literature listed in the references.
</p>
<p>This function is basically just a wrapper around the <code>ate</code> function from the <span class="pkg">riskRegression</span> package. Additional arguments may be passed to that function using the <code>...</code> syntax. It is however recommended to use <code>ate</code> directly in these cases.
</p>


<h3>Value</h3>

<p>Adds the following additional objects to the output of the <code>adjustedcif</code> function:
</p>

<ul><li> <p><code>ate_object</code>: The object returned by the <code>ate</code> function.
</p>
</li></ul>
<h3>Author(s)</h3>

<p>The wrapper function was written by Robin Denz, the <code>ate</code> function (which this wrapper is build around) was written by other people. See <code>?ate</code> for more details.
</p>


<h3>References</h3>

<p>James M. Robins and Andrea Rotnitzky (1992). "Recovery of Information and Adjustment for Dependent Censoring Using Surrogate Markers". In: AIDS Epidemiology: Methodological Issues. Ed. by Nicholas P. Jewell, Klaus Dietz, and Vernon T. Farewell. New York: Springer Science + Business Media, pp. 297-331
</p>
<p>Alan E. Hubbard, Mark J. van der Laan, and James M. Robins (2000). "Nonparametric Locally Efficient Estimation of the Treatment Specific Survival Distribution with Right Censored Data and Covariates in Observational Studies". In: Statistical Models in Epidemiology, the Environment, and Clinical Trials. Ed. by M. Elizabeth Halloran and Donald Berry. New York: Springer Science + Business Media, pp. 135-177
</p>
<p>Brice Maxime Hugues Ozenne, Thomas Harder Scheike, and Laila Staerk (2020). "On the Estimation of Average Treatment Effects with Right-Censored Time to Event Outcome and Competing Risks". In: Biometrical Journal 62, pp. 751-763
</p>


<h3>See Also</h3>

<p><code>ate</code>, <code>CSC</code>, <code>coxph</code>, <code>glm</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(adjustedCurves)
library(survival)

if (requireNamespace("riskRegression")) {

library(riskRegression)

set.seed(42)

# simulate some data as example
sim_dat &lt;- sim_confounded_crisk(n=50, max_t=1.2)
sim_dat$group &lt;- as.factor(sim_dat$group)

# estimate a cause-specific cox-regression for the outcome
cox_mod &lt;- CSC(Hist(time, event) ~ x1 + x2 + x3 + x4 + x5 + x6 + group,
               data=sim_dat)

# estimate a treatment assignment model
glm_mod &lt;- glm(group ~ x1 + x3 + x5 + x6, data=sim_dat, family="binomial")

# use it to calculate adjusted survival curves
adjcif &lt;- adjustedcif(data=sim_dat,
                      variable="group",
                      ev_time="time",
                      event="event",
                      cause=1,
                      method="aiptw",
                      outcome_model=cox_mod,
                      treatment_model=glm_mod,
                      conf_int=FALSE)

# plot the curves
plot(adjcif)
}
</code></pre>


</div>