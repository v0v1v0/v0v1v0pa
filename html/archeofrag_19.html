<div class="container">

<table style="width: 100%;"><tr>
<td>frag.simul.process</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Simulate the fragmentation of archaeological objects scattered in two stratigraphic layers
</h2>

<h3>Description</h3>

<p>Simulate the fragmentation of archaeological objects scattered in two stratigraphic layers (or any other kind of spatial unit).
</p>


<h3>Usage</h3>

<pre><code class="language-R">frag.simul.process(initial.layers=2, n.components, vertices=Inf,
                   edges=Inf, balance=.5, components.balance=.5,
                   disturbance=0, aggreg.factor=0, planar=FALSE,
                   asymmetric.transport.from=NULL, 
                   from.observed.graph=NULL, observed.layer.attr=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>initial.layers</code></td>
<td>
<p>Integer (1 or 2). Number of hypothetical stratigraphic layers to use as initial condition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.components</code></td>
<td>
<p>Integer. Number of objects to fragment (connected components).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vertices</code></td>
<td>
<p>Integer. Number of fragments (vertices).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edges</code></td>
<td>
<p>Integer. Number of connection relationships between fragments (edges).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>balance</code></td>
<td>
<p>Numeric ]0;1[. Proportion of fragments to generate in the first layer before applying disturbances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>components.balance</code></td>
<td>
<p>Numeric ]0;1[. Proportion of components in the first layer before applying fragmentation (only used when initial.layers=2).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disturbance</code></td>
<td>
<p>Numeric [0;1]. Proportion of fragments to randomly move from one layer to another.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggreg.factor</code></td>
<td>
<p>Numeric [0;1]. Higher values increase the likelihood that the biggest components are selected when adding fragments or connections.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>planar</code></td>
<td>
<p>Logical. If TRUE, generates a planar graph (if FALSE, the graph can be planar or not).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asymmetric.transport.from</code></td>
<td>
<p>Numeric or character value in "1" or "2". If not NULL, the disturbance process will be applied only to the fragments from this layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from.observed.graph</code></td>
<td>
<p>igraph object. If not NULL, the parameters observed in this fragmentation graph are used instead of the previous parameters. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observed.layer.attr</code></td>
<td>
<p>character. Required if the <code>from.observed.graph</code> option is used. Name of the layer attribute in the observed graph.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function simulates the fragmentation of archeological objects within and between two adjacent stratigraphic layers.
Fragments are represented by vertices and the "connection" relationships ("refittings") between them are represented by edges.
All fragments have at least one relation ("single" fragments are not generated).
</p>
<p>Some parameters are optional or depend on other parameters (messages are displayed accordingly). 
Namely, setting <code>initial.layers</code>=1 enables to constraint the graph with the number of vertices only, the number of edges only, or both. 
With <code>initial.layers</code>=2, the <code>components.balance</code> can be used, and the <code>edges</code> parameter is not supported (only the <code>vertices</code> parameter can be used).
</p>
<p>The <code>components.balance</code> parameter determines the proportion of components (i.e. objects) in the first layer before the application of the fragmentation process;
the <code>balance</code> parameter determines the proportion of fragments in the first layer before the application of the disturbance process.
The <code>disturbance</code> parameter determines the proportion of fragments to "move" from one layer to another. Consequently, it generates inter-layer relationships.
If <code>asymmetric.transport.from</code> is set to 1 or 2, the disturbance process is only applied to the fragments from layer 1 or layer 2, respectively.s
</p>
<p>If a graph is given to the <code>from.observed.graph</code> parameter, the properties of this graph are internally retrieved with the <code>frag.get.parameters</code> function (including:  the number of components, number of vertices, balance, the components.balance, the disturbance, the aggregation factor, and whether the graph is planar or not; note that the number of edges is not included as a parameter). If some other parameters of the <code>frag.simul.process</code> function are set, the values retrieved from the observed graph are used in replacement.
The <code>frag.edges.weighting</code> is internally applied to weight the graph edges.
</p>
<p>Setting the <code>planar</code> argument to TRUE constraints the graph to be planar (if this parameter is FALSE, the graph can be planar or not). 
Note that using the <code>planar</code> argument requires to install the optional RBGL package and that the simulator is faster with <code>initial.layers</code>=2 and  <code>planar</code>=FALSE.
</p>


<h3>Value</h3>

<p>An igraph object with a "frag_type" graph attribute (with the value "cr", for "connection relationship") and three vertices attributes: "name" (vertices identifiers), "layer" (with the values "1" and "2"), and "object.id" (component identifiers).
</p>


<h3>Author(s)</h3>

<p>Sebastien Plutniak &lt;sebastien.plutniak at posteo.net&gt;</p>


<h3>See Also</h3>

<p><code>frag.get.parameters</code>,
<code>frag.edges.weighting</code>,
<code>boyerMyrvoldPlanarityTest</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">frag.simul.process(n.components=20, vertices=50, disturbance=.15)

g &lt;- frag.simul.process(initial.layers=1, 
                            n.components=20,
                            vertices=50,
                            edges=40,
                            balance=.5,
                            components.balance=.5,
                            disturbance=.1,
                            planar=FALSE)
plot(g, vertex.color=factor(igraph::V(g)$layer), 
     vertex.size=4, vertex.label=NA)

</code></pre>


</div>