<div class="container">

<table style="width: 100%;"><tr>
<td>instance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Metadata for an Azure VM</h2>

<h3>Description</h3>

<p>Metadata for an Azure VM
</p>


<h3>Usage</h3>

<pre><code class="language-R">instance

attested

events

update_instance_metadata()

update_attested_metadata(nonce = NULL)

update_scheduled_events()
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>nonce</code></td>
<td>
<p>For <code>update_attested_metadata</code>, an optional string to use as a nonce.</p>
</td>
</tr></table>
<h3>Format</h3>

<p><code>instance</code>, <code>attested</code> and <code>events</code> are environments.</p>


<h3>Details</h3>

<p>The <code>instance</code>, <code>attested</code> and <code>events</code> environments contain the instance metadata, attested metadata, and scheduled events respectively for a VM running in Azure. <code>instance</code> and <code>attested</code> are automatically populated when you load the AzureVMmetadata package, or you can manually populate them yourself with the <code>update_instance_metadata</code> and <code>update_attested_metadata</code> functions. <code>events</code> is not populated at package startup, because calling the scheduled event service can require up to several minutes if it is not running already. You can manually populate it with the <code>update_scheduled_events</code> function.
</p>
<p>If AzureVMmetadata is loaded in an R session that is <em>not</em> running in an Azure VM, all the metadata environments will be empty.
</p>


<h3>Value</h3>

<p>The updating functions return the contents of their respective environments as lists, invisibly.
</p>


<h3>See Also</h3>

<p>in_azure_vm
</p>
<p><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/instance-metadata-service">Instance metadata service documentation</a>
</p>
<p>To obtain OAuth tokens from the metadata service, see AzureAuth::get_managed_token
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## these will only be meaningful when run in an Azure VM

# all compute metadata
AzureVMmetadata::instance$compute

# VM name and ID
AzureVMmetadata::instance$compute$name
AzureVMmetadata::instance$compute$vmId

# VM resource details: subscription, resource group, resource ID
AzureVMmetadata::instance$compute$subscriptionId
AzureVMmetadata::instance$compute$resourceGroupName
AzureVMmetadata::instance$compute$resourceId

# all network metadata
AzureVMmetadata::instance$network

# IPv4 address details (1st network interface)
AzureVMmetadata::instance$network$interface[[1]]$ipv4

</code></pre>


</div>