<div class="container">

<table style="width: 100%;"><tr>
<td>L1_profiles</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create Representative Soil Profiles via L1 Estimator</h2>

<h3>Description</h3>

<p>The L1 estimator, or <a href="https://en.wikipedia.org/wiki/Geometric_median">geometric median</a>, is a multivariate generalization of the (univariate) <a href="https://en.wikipedia.org/wiki/Median">median</a> concept. This function performs a multivariate aggregation (via L1 estimator) according to a suite of ratio-scale soil properties. The L1 estimator is applied to soil profile data that have been sliced to a 1-depth-unit basis. Data should be well stratified by groups defined in <code>fm</code>, otherwise the L1 median may not make any sense.
</p>
<p>See the <a href="https://ncss-tech.github.io/AQP/aqp/L1-profiles.html">L1 Profiles Tutorial</a> for additional examples.
</p>


<h3>Usage</h3>

<pre><code class="language-R">L1_profiles(
  x,
  fm,
  basis = 1,
  method = c("regex", "simple", "constant"),
  maxDepthRule = c("max", "min"),
  maxDepthConstant = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>SoilProfileCollection</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fm</code></td>
<td>
<p>formula, for example: <code>group ~ p1 + p2 + p3</code>, where "group" is a site-level grouping variable, and "p1", "p2", and "p3" are horizon level variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>basis</code></td>
<td>
<p>positive integer, aggregation basis (e.g. 1 for 1-depth-unit intervals). Values other than 1 are not currently supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>soil depth evaluation method: "regex" for regular expression, "simple", or "constant". See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxDepthRule</code></td>
<td>
<p>maximum depth rule: "max" or "min" See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxDepthConstant</code></td>
<td>
<p>positive integer, maximum depth when <code>maxDepthRule = 'constant'</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See <a href="https://ncss-tech.github.io/AQP/aqp/L1-profiles.html">this related tutorial</a> for additional examples. The <code>method</code>, <code>maxDepthRule</code>, and <code>maxDepthConstant</code> arguments set the maximum depth (over the entire collection) of analysis used to build "L1 profiles". The following rules are available:
</p>

<ul>
<li> <p><code>method = 'regex'</code> uses pattern matching on horizon designations (note that <code>hzdesgnname</code> metadata must be set with <code>hzdesgnname(x) &lt;- 'columnname'</code>)
</p>
</li>
<li> <p><code>method = 'simple'</code> uses <code>min</code> or <code>max</code> as applied to <code>x</code>, no accounting for non-soil horizons (e.g. Cr or R)
</p>
</li>
<li> <p><code>method = 'constant'</code> uses a fixed depth value supplied by <code>maxDepthConstant</code>
</p>
</li>
</ul>
<p>The <code>maxDepthRule</code> argument sets depth calculation constraint, applied to soil depths computed according to <code>method</code> (<code>min</code> or <code>max</code>).
</p>


<h3>Value</h3>

<p>a <code>SoilProfileCollection</code> object
</p>


<h3>Note</h3>

<p>This function requires the <code>Gmedian</code> package.
</p>


<h3>References</h3>

<p>Cardot, H., Cenac, P. and Zitt, P-A. (2013). Efficient and fast estimation of the geometric median in Hilbert spaces with an averaged stochastic gradient algorithm. Bernoulli, 19, 18-43.
</p>


</div>