<div class="container">

<table style="width: 100%;"><tr>
<td>asmbPLS.cv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cross-validation for asmbPLS to find the best combinations of quantiles for prediction</h2>

<h3>Description</h3>

<p>Function to find the best combinations of quantiles used for prediction via
cross-validation. Usually should be conducted before 
<code>asmbPLS.fit</code> to obtain the quantile combinations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">asmbPLS.cv(
  X.matrix,
  Y.matrix,
  PLS.comp,
  X.dim,
  quantile.comb.table,
  Y.indicator,
  k = 5,
  ncv = 5,
  only.observe = TRUE,
  expected.measure.decrease = 0.05,
  center = TRUE,
  scale = TRUE,
  maxiter = 100
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X.matrix</code></td>
<td>
<p>Predictors matrix. Samples in rows, variables in columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y.matrix</code></td>
<td>
<p>Outcome matrix. Samples in rows, this is a matrix with one 
column (continuous variable). The outcome could be imputed survival time or 
other types of continuous outcome. For survival time with right-censored 
survival time and event indicator, the right censored time could be imputed 
by <code>meanimp</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PLS.comp</code></td>
<td>
<p>Number of PLS components in asmbPLS.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X.dim</code></td>
<td>
<p>A vector containing the number of predictors in each block 
(ordered).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantile.comb.table</code></td>
<td>
<p>A matrix containing user-defined quantile 
combinations used for CV, whose column number equals to the 
number of blocks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y.indicator</code></td>
<td>
<p>A vector containing the event indicator for each sample, 
whose length is equal to the number of samples. This vector allows the ratio 
of observed/unobserved to be the same in the training set and validation set. 
Observed = 1, and unobserved = 0. If other types of outcome data rather than 
survival outcome is used, you can use a vector with all components = 1 
instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>The number of folds of CV procedure. The default is 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncv</code></td>
<td>
<p>The number of repetitions of CV. The default is 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>only.observe</code></td>
<td>
<p>Whether only observed samples in the validation set 
should be used for calculating the MSE for CV. The default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expected.measure.decrease</code></td>
<td>
<p>The measure you expect to decrease by percent 
after including one more PLS component, which will affect the selection of optimal 
PLS components. The default is 0.05 (5%).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>
<p>A logical value indicating whether mean center should be 
implemented for X.matrix and Y.matrix. The default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>A logical value indicating whether scale should be 
implemented for X.matrix and Y.matrix. The default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxiter</code></td>
<td>
<p>A integer indicating the maximum number of iteration. The
default number is 100.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>asmbPLS.cv</code> returns a list containing the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>quantile_table_CV</code></td>
<td>
<p>A matrix containing the selected quantile 
combination and the corresponding measures of CV for each PLS component.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimal_nPLS</code></td>
<td>
<p>Optimal number of PLS components.</p>
</td>
</tr>
</table>
<p>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Use the example dataset
data(asmbPLS.example)
X.matrix = asmbPLS.example$X.matrix
Y.matrix = asmbPLS.example$Y.matrix
PLS.comp = asmbPLS.example$PLS.comp
X.dim = asmbPLS.example$X.dim
quantile.comb.table.cv = asmbPLS.example$quantile.comb.table.cv
Y.indicator = asmbPLS.example$Y.indicator

## cv to find the best quantile combinations for model fitting
cv.results &lt;- asmbPLS.cv(X.matrix = X.matrix, 
                         Y.matrix = Y.matrix, 
                         PLS.comp = PLS.comp, 
                         X.dim = X.dim, 
                         quantile.comb.table = quantile.comb.table.cv, 
                         Y.indicator = Y.indicator,
                         k = 5,
                         ncv = 3)
quantile.comb &lt;- cv.results$quantile_table_CV[,1:length(X.dim)]
n.PLS &lt;- cv.results$optimal_nPLS
 
## asmbPLS fit
asmbPLS.results &lt;- asmbPLS.fit(X.matrix = X.matrix, 
                               Y.matrix = Y.matrix, 
                               PLS.comp = n.PLS, 
                               X.dim = X.dim, 
                               quantile.comb = quantile.comb)

</code></pre>


</div>