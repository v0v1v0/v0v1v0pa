<div class="container">

<table style="width: 100%;"><tr>
<td>save_credentials</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Save/restore/manage session credentials</h2>

<h3>Description</h3>

<p>The following functions manage the environment
variables <code>AWS_ACCESS_KEY_ID</code>,
<code>AWS_SECRET_ACCESS_KEY</code> and <code>AWS_SESSION_TOKEN</code> used
for credentials for all AWS API calls.
</p>
<p><code>save_credentials</code> saves the current credentials to a
stack of credentials kept in the session. Always returns
<code>TRUE</code>.
</p>
<p><code>restore_credentials</code> restores the last saved credentials
and pops them off the stack.
</p>
<p><code>delete_saved_credentials</code> removes the last saved
credentials without using them.
</p>
<p><code>set_credentials</code> uses credentials list as supplied by the
REST API and makes them current by assigning their values to
the corresponding <code>AWS_*</code> environment variables. If
<code>save.previous</code> is <code>TRUE</code> then the currently used
credentials are first saved on the stack ebfore being replaced
with the new ones.
</p>
<p>Most functions in the <code>STS</code> section call
<code>set_credentials()</code> automatically if <code>use = TRUE</code> is
set.
</p>


<h3>Usage</h3>

<pre><code class="language-R">save_credentials()

set_credentials(credentials, save.previous = TRUE)

delete_saved_credentials(all = FALSE)

restore_credentials(pop = TRUE, root = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>credentials</code></td>
<td>
<p>list, credentials as received from the REST API
call, they should contain to following elements:
<code>AccessKeyId</code>, <code>SecretAccessKey</code> and
<code>SessionToken</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save.previous</code></td>
<td>
<p>logical, if <code>TRUE</code> the current
credentials are saved first using <code>save_credentials</code>
before the new credentials are applied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all</code></td>
<td>
<p>logical, if <code>TRUE</code> then removes all credentials
from the stack, otherwise only the last ones.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pop</code></td>
<td>
<p>logical, if <code>TRUE</code> then the credentials are
restored and then removed from the stack.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>root</code></td>
<td>
<p>logical, if <code>FALSE</code> then last saved credentials
are used. if <code>TRUE</code> then goes down the stack to the first
saved credentials. If both <code>root</code> and <code>pop</code> are
<code>TRUE</code> then all credentials are removed from the stack.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Since <code>aws.iam</code> version 0.1.8 the credentials are
kept on a stack, so it is possible to use
<code>save_credentials()</code> several times without restoring
them. This allows role chaining. At the end of a chained
session it is possible to get back to the main credentials using
<code>restore_credentials(pop=TRUE, root=TRUE)</code>.
</p>


</div>