<div class="container">

<table style="width: 100%;"><tr>
<td>facRecast.alldiffs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Reorders and/or revises the factor levels using the order of old levels in <code>levels.order</code> and the new labels for the levels given in <code>newlabels</code>. The values in <code>levels.order</code> must be unique.</h2>

<h3>Description</h3>

<p>Reorders and revises the levels and labels of a <code>factor</code>, in the <code>prediction</code> 
component of an <code>alldiffs.object</code>. The values in the 
<code>levels.order</code> vector should be the same as the levels in the existing <code>factor</code>, 
but the order can be changed. To revise the levels, specify the new levels in the 
<code>newlabels</code> vector and these will replace the corresponding value in the 
<code>levels.order</code> vector. The matching 
changes are made to the other components and attributes of the <code>alldiffs.object</code>.</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'alldiffs'
facRecast(object, factor, levels.order = NULL, newlabels = NULL, ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An <code>alldiffs.object</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factor</code></td>
<td>
<p>A <code>character</code> containing the name of a <code>factor</code> 
in the <code>prediction</code> component of <code>object</code> whose levels and labels are to be recast.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels.order</code></td>
<td>
<p>A <code>vector</code> of length <code>levels(factor)</code> containing 
the old levels in the new order for the factor being created. 
If <code>levels.order</code> is <code>NULL</code>, then the current levels of <code>levels(factor)</code> 
are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newlabels</code></td>
<td>
<p>A <code>vector</code> of length <code>levels(factor)</code> containing 
values to use in the revision.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to the <code>factor</code> call creating the new 
<code>factor</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A modified <code>alldiffs.object</code>.</p>


<h3>Author(s)</h3>

<p>Chris Brien</p>


<h3>See Also</h3>

<p><code>as.alldiffs</code>, <code>allDifferences.data.frame</code>, 
<code>print.alldiffs</code>, <code>sort.alldiffs</code>, <br><code>facCombine.alldiffs</code>, <code>facRename.alldiffs</code>, 
<code>renewClassify.alldiffs</code>; 
<code>fac.recast</code> in package <span class="pkg">dae</span>.</p>


<h3>Examples</h3>

<pre><code class="language-R">  data("Ladybird.dat")
  
  ## Use asreml to get predictions and associated statistics

  ## Not run: 
  m1.asr &lt;- asreml(logitP ~ Host*Cadavers*Ladybird, 
                   random = ~ Run,
                   data = Ladybird.dat)
  current.asrt &lt;- as.asrtests(m1.asr)
  HCL.pred &lt;- asreml::predict.asreml(m1.asr, classify="Host:Cadavers:Ladybird", 
                                     sed=TRUE)
  HCL.preds &lt;- HCL.pred$pvals
  HCL.sed &lt;- HCL.pred$sed
  HCL.vcov &lt;- NULL
  wald.tab &lt;-  current.asrt$wald.tab
  den.df &lt;- wald.tab[match("Host:Cadavers:Ladybird", rownames(wald.tab)), "denDF"]
  
## End(Not run)
  
  ## Use lmeTest and emmmeans to get predictions and associated statistics
  if (requireNamespace("lmerTest", quietly = TRUE) &amp; 
      requireNamespace("emmeans", quietly = TRUE))
  {
    m1.lmer &lt;- lmerTest::lmer(logitP ~ Host*Cadavers*Ladybird + (1|Run),
                              data=Ladybird.dat)
    HCL.emm &lt;- emmeans::emmeans(m1.lmer, specs = ~ Host:Cadavers:Ladybird)
    HCL.preds &lt;- summary(HCL.emm)
    den.df &lt;- min(HCL.preds$df)
    ## Modify HCL.preds to be compatible with a predictions.frame
    HCL.preds &lt;- as.predictions.frame(HCL.preds, predictions = "emmean", 
                                      se = "SE", interval.type = "CI", 
                                      interval.names = c("lower.CL", "upper.CL"))
    HCL.vcov &lt;- vcov(HCL.emm)
    HCL.sed &lt;- NULL
  }
  
  ## Use the predictions obtained with either asreml or lmerTest
  if (exists("HCL.preds"))
  {
    ## Form an all.diffs object
    HCL.diffs &lt;- allDifferences(predictions = HCL.preds, classify = "Host:Cadavers:Ladybird", 
                                sed = HCL.sed, vcov = HCL.vcov, tdf = den.df)
    
    ## Check the class and validity of the alldiffs object
    is.alldiffs(HCL.diffs)
    validAlldiffs(HCL.diffs)

    ## Recast the Ladybird and Host factors
    HCL.diffs &lt;- facRecast(HCL.diffs, factor = "Ladybird", 
                           newlabels = c("none", "present"))
    HCL.diffs &lt;- facRecast(HCL.diffs, factor = "Ladybird", 
                           levels.order = c("present", "none"), 
                           newlabels = c("yes","no"))
    HCL.diffs &lt;- facRecast.alldiffs(HCL.diffs, factor = "Host", 
                                    levels.order = c("trefoil", "bean"))

    ## Check the validity of HCL.diffs
    validAlldiffs(HCL.diffs)
  }
</code></pre>


</div>