<div class="container">

<table style="width: 100%;"><tr>
<td>atime_versions_exprs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create expressions for different git versions</h2>

<h3>Description</h3>

<p>Install different git commit versions as different
packages, then create a list of expressions, one for each
version. For most use cases <code>atime_versions</code> is simpler, but
<code>atime_versions_exprs</code> is more flexible for the case of comparing
different versions of one expression to another expression.</p>


<h3>Usage</h3>

<pre><code class="language-R">atime_versions_exprs(
pkg.path, expr, sha.vec=NULL,
verbose=FALSE,
pkg.edit.fun=pkg.edit.default, ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkg.path</code></td>
<td>
<p>Path to git repo containing R package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>

<p>code with package double-colon prefix, for example
<code>PKG::fun(argA, argB)</code>, where PKG is the name of the
package specified by <code>pkg.path</code>. This code will be
evaluated for each different package version, by replacing
<code>PKG:</code> by <code>PKG.SHA:</code>.
To run different versions of implicitly-called functions
like <code>DT[i,j]</code>, you need
to call them explicitly, as in 
<code>data.table:::`[.data.table`(DT,i,j)</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sha.vec</code></td>
<td>
<p>named character vector / list of versions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical, print messages after every data size?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pkg.edit.fun</code></td>
<td>
<p>function called to edit package before
installation, should typically replace instances of <code>PKG</code> with
<code>PKG.SHA</code>, default works with Rcpp packages, but does not work
with all packages. For an example of a custom package editing
function, see the atime vignette about data.table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>named versions.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For convenience, versions can
be specified either as code (...), data (<code>sha.vec</code>), or both.
Each version should be either <code>""</code> (to install most recent
version from CRAN) or a SHA1 hash, which is passed as branch
arg to <code>git2r::checkout</code>; version names used to identify/interpret
the output/plots.
Each version is installed as a separate package
(to whatever R library is first on <code>.libPaths()</code>),
using the package name <code>PKG.SHA</code>.
</p>


<h3>Value</h3>

<p>A list of expressions, one for
each version, created by replacing <code>PKG:</code>
in <code>expr</code> with <code>PKG.SHA:</code>, 
<code>atime(name1=Package.SHA1::fun(argA, argB),
    name2=Package.SHA2::fun(argA,argB))</code>.
</p>


<h3>Author(s)</h3>

<p>Toby Dylan Hocking</p>


<h3>Examples</h3>

<pre><code class="language-R">
if(FALSE){

  if(requireNamespace("changepoint")){
    tdir &lt;- tempfile()
    dir.create(tdir)
    git2r::clone("https://github.com/tdhock/binsegRcpp", tdir)
    expr.list &lt;- atime::atime_versions_exprs(
      pkg.path=tdir,
      expr=binsegRcpp::binseg_normal(data.vec, max.segs),
      cv="908b77c411bc7f4fcbcf53759245e738ae724c3e",
      "rm unord map"="dcd0808f52b0b9858352106cc7852e36d7f5b15d",
      "mvl_construct"="5942af606641428315b0e63c7da331c4cd44c091")
    atime.list &lt;- atime::atime(
      N=2^seq(2, 20),
      setup={
        max.segs &lt;- as.integer(N/2)
        data.vec &lt;- 1:N
      },
      expr.list=expr.list,
      changepoint=changepoint::cpt.mean(
        data.vec, penalty="Manual", pen.value=0, method="BinSeg",
        Q=max.segs-1))
    plot(atime.list)
  }

  atime::atime_versions_remove("binsegRcpp")

}

</code></pre>


</div>