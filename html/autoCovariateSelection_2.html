<div class="container">

<table style="width: 100%;"><tr>
<td>get_prioritised_covariates</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate the prioritised covariates from the global list of binary recurrence covariates using multiplicative bias ranking</h2>

<h3>Description</h3>

<p><code>get_prioritised_covariates</code> function assesses the recurrence of each of the identified candidate empirical covariates
based on their frequency of occurrence for each patient in the baseline period and generates three binary recurrence covariates
for each of the identified candidate empirical covariates. This is the third and final step in the automated covariate selection process.
The previous step of assessing recurrence and generating the binary recurrence covariates is done
using the <code>get_recurrence_covariates</code> function.
See 'Automated Covariate Selection'section below for more details regarding the overall process.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_prioritised_covariates(
  df,
  patientIdVarname,
  exposureVector,
  outcomeVector,
  patientIdVector,
  k = 500
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>The input <code>data.frame</code>. Ideally this should be the output <code>recurrence_data</code> from the
<code>get_recurrence_covariates</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>patientIdVarname</code></td>
<td>
<p>The variable name which contains the patient identifier in the <code>df</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exposureVector</code></td>
<td>
<p>The 1-D exposure (treatment/intervention) vector. The length of this vector should be equal to that of
<code>patientIdVector</code> and <code>outcomeVector</code>. Also, this should be a binary vector with value of 1 for patients primary cohort 1 and 0 for
those in comparator cohort. The order of this vector should resonate the order of patients in <code>outcomeVector</code> and <code>patientIdVector</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcomeVector</code></td>
<td>
<p>The 1-D outcome vector indicating whether or not the patient experienced the outcome of interest (value = 1) or not (value =0).
The length of this vector should be equal to that of <code>patientIdVector</code> and <code>exposureVector</code>. The order of elements in this vector should
resonate with the order of patients in <code>exposureVector</code> and <code>patientIdVector</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>patientIdVector</code></td>
<td>
<p>The 1-D vector with all the patient identifiers. This should contain all the patient IDs in the original two
cohorts with its length and order equal to and resonating with that of <code>exposureVector</code> and <code>outcomeVector</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>The maximum number of prioritised covariates that should be returned by the function. By default, this is 500 as described in the original paper</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To prioritise covariates across data dimensions (domains) should be assessed by their potential for controlling confounding that is not conditional
on exposure and other covariates. This means that the association of the covariates with the outcomes (relative risk) should be taken into
consideration for quantifying the 'potential' for confounding. Relative risk weighted by the ratio of prevalence of the covariates between the
two exposure groups is known as multiplicative bias. The other way to do this would be to use the absolute risk and this would have been the rather
straight-forward procedure to quantify the potential for confounding. However, this method would invariably down-weight the association between the
covariate and the outcome if the outcome prevalence is small and the exposure prevalence is high which is a common phenomenon seen with comparative
effective research using real-world-data by retrospective cohort studies. The multiplicative bias term balances this and generates a quantity for each
covariate that is reflective of its confounding potential. By ranking the multiplicative bias, the objective is to choose the top <code>k</code> number of
covariates from this procedure. <code>k</code>, by default, is 500 as described in the original paper. For further theoretical details of the
algorithm please refer to the original article listed below in the <code>References</code> section. <code>get_recurrence_covariates</code> is the function
implementing what is described in the 'Prioritise Covariates' section of the article.
</p>


<h3>Value</h3>

<p>A named list containing two R objects
</p>

<ul>
<li> <p><code>autoselected_covariate_df</code> A <code>data.frame</code> in wide format containing the auto-selected prioritised covariates and their values (1 or 0)
for each patients
</p>
</li>
<li> <p><code>multiplicative_bias</code>The absolute log of the multiplicative bias term for each of the auto-selected prioritised covariates
</p>
</li>
</ul>
<h3>Automated Covariate Selection</h3>

<p><strong>The three steps in automated covariate selection are listed below with the functions implementing the methodology</strong>
</p>

<ol>
<li>
<p> Identify candidate empirical covariates: <code>get_candidate_covariates</code>
</p>
</li>
<li>
<p> Assess recurrence: <code>get_recurrence_covariates</code>
</p>
</li>
<li>
<p> Prioritize covariates: <code>get_prioritised_covariates</code>
</p>
</li>
</ol>
<h3>Author(s)</h3>

<p>Dennis Robert <a href="mailto:dennis.robert.nm@gmail.com">dennis.robert.nm@gmail.com</a>
</p>


<h3>References</h3>

<p>Schneeweiss S, Rassen JA, Glynn RJ, Avorn J, Mogun H, Brookhart MA. High-dimensional propensity score adjustment in studies of treatment effects using health care claims data Epidemiology. 2009;20(4):512-522. doi:10.1097/EDE.0b013e3181a663cc
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("autoCovariateSelection")
data(rwd)
head(rwd, 3)
basetable &lt;- rwd %&gt;% select(person_id, treatment, outcome_date) %&gt;% distinct()
head(basetable, 3)
patientIds &lt;- basetable$person_id
step1 &lt;- get_candidate_covariates(df = rwd,  domainVarname = "domain",
eventCodeVarname = "event_code" , patientIdVarname = "person_id",
patientIdVector = patientIds,n = 100, min_num_patients = 10)
out1 &lt;- step1$covars_data
all.equal(patientIds, step1$patientIds) #should be TRUE
step2 &lt;- get_recurrence_covariates(df = out1,
patientIdVarname = "person_id", eventCodeVarname = "event_code",
patientIdVector = patientIds)
out2 &lt;- step2$recurrence_data
out3 &lt;- get_prioritised_covariates(df = out2,
patientIdVarname = "person_id", exposureVector = basetable$treatment,
outcomeVector = ifelse(is.na(basetable$outcome_date), 0,1),
patientIdVector = patientIds, k = 10)

</code></pre>


</div>