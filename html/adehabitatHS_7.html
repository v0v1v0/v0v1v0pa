<div class="container">

<table style="width: 100%;"><tr>
<td>compana</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compositional Analysis of Habitat Use</h2>

<h3>Description</h3>

<p><code>compana</code> performs a classical compositional analysis of habitat
use (Aebischer et al., 1993).
</p>


<h3>Usage</h3>

<pre><code class="language-R">compana(used, avail, test = c("randomisation", "parametric"),
        rnv = 0.01, nrep = 500, alpha = 0.1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>used</code></td>
<td>
<p>a matrix or a data frame describing the percentage of use
of habitats (in columns) by animals (in rows). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avail</code></td>
<td>
<p>a matrix or a data frame describing the percentage of
availability of habitats (in columns) by animals (in rows). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>a character string.  If <code>"randomisation"</code>,
randomisation tests are performed for
both the  habitat ranking and
the test of habitat selection.
If <code>"parametric"</code>, usual
parametric tests are performed (chi-square for the test of habitat
selection and t-tests for habitat ranking).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rnv</code></td>
<td>
<p>the number replacing the 0 values occurring in the
matrix <code>used</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrep</code></td>
<td>
<p>the number of repetitions in the
randomisation tests. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>the alpha level for the tests. </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The compositional analysis of habitat use has been recommended by
Aebischer et al. (1993) for the analysis of habitat selection by
several animals, when the resources are defined by several categories
(e.g. vegetation types).
</p>
<p>This analysis is carried out in two steps: first the significance of
habitat selection is tested (using a Wilks lambda). Then, a ranking
matrix is built, indicating whether the habitat type in row is
significantly used more or less than the habitat type in column.
When this analysis is performed on radio-tracking data, Aebischer et
al. recommend to study habitat selection at two levels: (i) selection
of the home range within the study area, and (ii) selection of the
relocations within the home range.  The first level is termed
second-order habitat selection on Johnson's scale (1980), and the
second one, third-order habitat selection.
</p>
<p>When zero values are found
in the matrix of used habitats, they are replaced by a small value (by
default, 0.01), according to the recommendations of Aebischer et al.
(1993).
</p>
<p>When zero values are found in the matrix of available habitats, the
function <code>compana</code> uses the procedure termed
"weighted mean lambda" described in Aebischer et al.
(1993: Appendix 2), instead of the usual lambda (see examples). Zero
values can be found in the matrix of available habitats when the
third-order habitat selection is under focus. In this case, it may
occur that some habitat types are available to some animals and not to
the others.
</p>
<p>Note that this method rely on the following hypotheses: (i)
independence between animals, and (ii) all animals are selecting
habitat in the same way (in addition to "traditional" hypotheses in
these kinds of studies: no territoriality, all animals having equal
access to all available resource units, etc.).  The function
<code>eisera</code> can be used as a preliminary to identify whether this is
indeed the case (see examples). 
</p>


<h3>Value</h3>

<p>Returns a list of the class <code>compana</code>:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>used</code></td>
<td>
<p>the matrix of used habitats</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avail</code></td>
<td>
<p>the matrix of available habitats</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type.test</code></td>
<td>
<p>a character string.  Either <code>"randomisation"</code> or
<code>"parametric"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>the results of the test of habitat selection</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rm</code></td>
<td>
<p>the ranking matrix: a square matrix with <code>nh</code> rows and
<code>nh</code> columns, where <code>nh</code> is the number of habitat types
under study.  At the intersection of the row <code>i</code> and of the
column <code>j</code>, there is a <code>"+"</code> when the habitat <code>i</code> is
more used than the habitat in column, and <code>"-"</code> otherwise.
When the difference is significant, the sign is tripled.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmnb</code></td>
<td>
<p>the matrix containing the number of animals used to
perform the tests in <code>rm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rank</code></td>
<td>
<p>the rank of the habitat types.  It is equal to the number
of <code>"+"</code> for each habitat type in row of <code>rm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmv</code></td>
<td>
<p>the matrix of statistics used to build <code>rm</code>.
If <code>(test = "parametric")</code>, the matrix contains the
values of <code>t</code>, in the t-test comparing the row and the column
habitat.  If <code>(test = "randomisation")</code>, the matrix contains
the mean difference between the used and available log-ratios (see
Aebischer et al., 1993).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>profile</code></td>
<td>
<p>the profile of preferences: resource types are sorted
so that the left type is the most preferred and the right type is
the most avoided.  Habitats for which the intensity of habitat
selection is similar (no significant difference) are connected by a
line.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>In the examples below, the results differ from those published in
Aebischer et al. (squirrel example, selection of the relocations within
the home range). In fact, there has been a confusion in the column names
in the paper. Actually, Aebischer (pers. com.) indicated that the
ranking matrix given in this example is correct.
</p>


<h3>Author(s)</h3>

<p>Clement Calenge <a href="mailto:clement.calenge@ofb.gouv.fr">clement.calenge@ofb.gouv.fr</a></p>


<h3>References</h3>

<p>Aebischer, N. J. and Robertson, P. A. (1992) Practical aspects of
compositional analysis as applied to pheasant habitat
utilisation. pp. 285–293 In: Priede, G. and Swift, S. M. <em>Wildlife
telemetry, remote monitoring and tracking of animals</em>. 
</p>
<p>Aebischer, N. J., Robertson, P. A. and Kenward, R. E. (1993)
Compositional analysis of habitat use from animal radiotracking
data. <em>Ecology</em>, <b>74</b>, 1313–1325.
</p>
<p>Johnson, D. H. (1980) The comparison of usage and availability
measurements for evaluating resource preference. <em>Ecology</em>, <b>61</b>,
65–71.
</p>


<h3>See Also</h3>

 <p><code>eisera</code> to perform an eigenanalysis of selection
ratios, preliminary to the use of compositional analysis. </p>


<h3>Examples</h3>

<pre><code class="language-R">
## The examples presented here
## are the same as those presented in
## the paper of Aebischer et al. (1993)


#############################
## Pheasant dataset: first
## example in Aebischer et al.

data(pheasant)

## Second order habitat selection
## Selection of home range within the
## study area (example of parametric test)
pheana2 &lt;- compana(pheasant$mcp, pheasant$studyarea,
                   test = "parametric")
pheana2

## The ranking matrix:
print(pheana2$rm, quote = FALSE)

## Third order habitat selection
## (relocation within home range)
## We remove the first pheasant of the analysis
## (as in the paper of Aebischer et al.)
## before the analysis
pheana3 &lt;- compana(pheasant$locs[-1,], pheasant$mcp[-1,c(1,2,4)])
pheana3

## The ranking matrix:
print(pheana3$rm, quote = FALSE)



#############################
## Squirrel data set: second
## example in Aebischer et al.

data(squirrel)

## Second order habitat selection
## Selection of home range within the
## study area
squiana2 &lt;- compana(squirrel$mcp, squirrel$studyarea)
squiana2

## The ranking matrix:
print(squiana2$rm, quote = FALSE)


## However, note that here, the hypothesis of identical use 
## on which this analysis relies is likely to be false.
## Indeed, an eisera indicates:

us &lt;- round(30 * squirrel$locs / 100)
av &lt;- squirrel$studyarea
ii &lt;- eisera(us, av, scannf = FALSE)
scatter(ii, grid = FALSE, clab = 0.7)

## There are clearly two groups of animals.  In such cases,
## compositional analysis is to be avoided in this case.




## Third order habitat selection
## (relocation within home range)
## We remove the second column
## (as in the paper of Aebischer et al.)
squiana3 &lt;- compana(squirrel$locs[,-2], squirrel$mcp[,-2])
squiana3

## The ranking matrix:
print(squiana3$rm, quote = FALSE)


</code></pre>


</div>