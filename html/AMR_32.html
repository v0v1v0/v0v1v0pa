<div class="container">

<table style="width: 100%;"><tr>
<td>key_antimicrobials</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>(Key) Antimicrobials for First Weighted Isolates</h2>

<h3>Description</h3>

<p>These functions can be used to determine first weighted isolates by considering the phenotype for isolate selection (see <code>first_isolate()</code>). Using a phenotype-based method to determine first isolates is more reliable than methods that disregard phenotypes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">key_antimicrobials(
  x = NULL,
  col_mo = NULL,
  universal = c("ampicillin", "amoxicillin/clavulanic acid", "cefuroxime",
    "piperacillin/tazobactam", "ciprofloxacin", "trimethoprim/sulfamethoxazole"),
  gram_negative = c("gentamicin", "tobramycin", "colistin", "cefotaxime", "ceftazidime",
    "meropenem"),
  gram_positive = c("vancomycin", "teicoplanin", "tetracycline", "erythromycin",
    "oxacillin", "rifampin"),
  antifungal = c("anidulafungin", "caspofungin", "fluconazole", "miconazole", "nystatin",
    "voriconazole"),
  only_sir_columns = FALSE,
  ...
)

all_antimicrobials(x = NULL, only_sir_columns = FALSE, ...)

antimicrobials_equal(
  y,
  z,
  type = c("points", "keyantimicrobials"),
  ignore_I = TRUE,
  points_threshold = 2,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a data.frame with antibiotics columns, like <code>AMX</code> or <code>amox</code>. Can be left blank to determine automatically</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_mo</code></td>
<td>
<p>column name of the names or codes of the microorganisms (see <code>as.mo()</code>) - the default is the first column of class <code>mo</code>. Values will be coerced using <code>as.mo()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>universal</code></td>
<td>
<p>names of <strong>broad-spectrum</strong> antimicrobial drugs, case-insensitive. Set to <code>NULL</code> to ignore. See <em>Details</em> for the default antimicrobial drugs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gram_negative</code></td>
<td>
<p>names of antibiotic drugs for <strong>Gram-positives</strong>, case-insensitive. Set to <code>NULL</code> to ignore. See <em>Details</em> for the default antibiotic drugs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gram_positive</code></td>
<td>
<p>names of antibiotic drugs for <strong>Gram-negatives</strong>, case-insensitive. Set to <code>NULL</code> to ignore. See <em>Details</em> for the default antibiotic drugs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>antifungal</code></td>
<td>
<p>names of antifungal drugs for <strong>fungi</strong>, case-insensitive. Set to <code>NULL</code> to ignore. See <em>Details</em> for the default antifungal drugs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>only_sir_columns</code></td>
<td>
<p>a logical to indicate whether only columns must be included that were transformed to class <code>sir</code> (see <code>as.sir()</code>) on beforehand (default is <code>FALSE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored, only in place to allow future extensions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y, z</code></td>
<td>
<p>character vectors to compare</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>type to determine weighed isolates; can be <code>"keyantimicrobials"</code> or <code>"points"</code>, see <em>Details</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore_I</code></td>
<td>
<p>logical to indicate whether antibiotic interpretations with <code>"I"</code> will be ignored when <code>type = "keyantimicrobials"</code>, see <em>Details</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>points_threshold</code></td>
<td>
<p>minimum number of points to require before differences in the antibiogram will lead to inclusion of an isolate when <code>type = "points"</code>, see <em>Details</em></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>key_antimicrobials()</code> and <code>all_antimicrobials()</code> functions are context-aware. This means that the <code>x</code> argument can be left blank if used inside a data.frame call, see <em>Examples</em>.
</p>
<p>The function <code>key_antimicrobials()</code> returns a character vector with 12 antimicrobial results for every isolate. The function <code>all_antimicrobials()</code> returns a character vector with all antimicrobial drug results for every isolate. These vectors can then be compared using <code>antimicrobials_equal()</code>, to check if two isolates have generally the same antibiogram. Missing and invalid values are replaced with a dot (<code>"."</code>) by <code>key_antimicrobials()</code> and ignored by <code>antimicrobials_equal()</code>.
</p>
<p>Please see the <code>first_isolate()</code> function how these important functions enable the 'phenotype-based' method for determination of first isolates.
</p>
<p>The default antimicrobial drugs used for <strong>all rows</strong> (set in <code>universal</code>) are:
</p>

<ul>
<li>
<p> Ampicillin
</p>
</li>
<li>
<p> Amoxicillin/clavulanic acid
</p>
</li>
<li>
<p> Cefuroxime
</p>
</li>
<li>
<p> Ciprofloxacin
</p>
</li>
<li>
<p> Piperacillin/tazobactam
</p>
</li>
<li>
<p> Trimethoprim/sulfamethoxazole
</p>
</li>
</ul>
<p>The default antimicrobial drugs used for <strong>Gram-negative bacteria</strong> (set in <code>gram_negative</code>) are:
</p>

<ul>
<li>
<p> Cefotaxime
</p>
</li>
<li>
<p> Ceftazidime
</p>
</li>
<li>
<p> Colistin
</p>
</li>
<li>
<p> Gentamicin
</p>
</li>
<li>
<p> Meropenem
</p>
</li>
<li>
<p> Tobramycin
</p>
</li>
</ul>
<p>The default antimicrobial drugs used for <strong>Gram-positive bacteria</strong> (set in <code>gram_positive</code>) are:
</p>

<ul>
<li>
<p> Erythromycin
</p>
</li>
<li>
<p> Oxacillin
</p>
</li>
<li>
<p> Rifampin
</p>
</li>
<li>
<p> Teicoplanin
</p>
</li>
<li>
<p> Tetracycline
</p>
</li>
<li>
<p> Vancomycin
</p>
</li>
</ul>
<p>The default antimicrobial drugs used for <strong>fungi</strong> (set in <code>antifungal</code>) are:
</p>

<ul>
<li>
<p> Anidulafungin
</p>
</li>
<li>
<p> Caspofungin
</p>
</li>
<li>
<p> Fluconazole
</p>
</li>
<li>
<p> Miconazole
</p>
</li>
<li>
<p> Nystatin
</p>
</li>
<li>
<p> Voriconazole
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>first_isolate()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># `example_isolates` is a data set available in the AMR package.
# See ?example_isolates.

# output of the `key_antimicrobials()` function could be like this:
strainA &lt;- "SSSRR.S.R..S"
strainB &lt;- "SSSIRSSSRSSS"

# those strings can be compared with:
antimicrobials_equal(strainA, strainB, type = "keyantimicrobials")
# TRUE, because I is ignored (as well as missing values)

antimicrobials_equal(strainA, strainB, type = "keyantimicrobials", ignore_I = FALSE)
# FALSE, because I is not ignored and so the 4th [character] differs


if (require("dplyr")) {
  # set key antibiotics to a new variable
  my_patients &lt;- example_isolates %&gt;%
    mutate(keyab = key_antimicrobials(antifungal = NULL)) %&gt;% # no need to define `x`
    mutate(
      # now calculate first isolates
      first_regular = first_isolate(col_keyantimicrobials = FALSE),
      # and first WEIGHTED isolates
      first_weighted = first_isolate(col_keyantimicrobials = "keyab")
    )

  # Check the difference in this data set, 'weighted' results in more isolates:
  sum(my_patients$first_regular, na.rm = TRUE)
  sum(my_patients$first_weighted, na.rm = TRUE)
}

</code></pre>


</div>