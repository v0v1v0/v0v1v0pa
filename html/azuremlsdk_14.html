<div class="container">

<table style="width: 100%;"><tr>
<td>create_aks_compute</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an AksCompute cluster</h2>

<h3>Description</h3>

<p>Provision an Azure Kubernetes Service instance (AksCompute) as a compute
target for web service deployment. AksCompute is recommended for high-scale
production deployments and provides fast response time and autoscaling of
the deployed service. Cluster autoscaling isn't supported through the Azure
ML R SDK. To change the nodes in the AksCompute cluster, use the UI for the
cluster in the Azure portal. Once created, the cluster can be reused for
multiple deployments.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_aks_compute(
  workspace,
  cluster_name,
  agent_count = NULL,
  vm_size = NULL,
  ssl_cname = NULL,
  ssl_cert_pem_file = NULL,
  ssl_key_pem_file = NULL,
  location = NULL,
  vnet_resourcegroup_name = NULL,
  vnet_name = NULL,
  subnet_name = NULL,
  service_cidr = NULL,
  dns_service_ip = NULL,
  docker_bridge_cidr = NULL,
  cluster_purpose = c("FastProd", "DevTest")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>workspace</code></td>
<td>
<p>The <code>Workspace</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster_name</code></td>
<td>
<p>A string of the name of the cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>agent_count</code></td>
<td>
<p>An integer of the number of agents (VMs) to host
containers. Defaults to <code>3</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vm_size</code></td>
<td>
<p>A string of the size of agent VMs. More details can be found
<a href="https://docs.microsoft.com/en-us/azure/templates/microsoft.compute/2019-12-01/virtualmachines#virtualmachineidentity-object">here</a>.
Note that not all sizes are available in all regions, as detailed in the
aformentioned link. Defaults to <code>'Standard_D3_v2'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ssl_cname</code></td>
<td>
<p>A string of a CName to use if enabling SSL validation on
the cluster. Must provide all three - CName, cert file, and key file - to
enable SSL validation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ssl_cert_pem_file</code></td>
<td>
<p>A string of a file path to a file containing cert
information for SSL validation. Must provide all three - CName, cert file,
and key file - to enable SSL validation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ssl_key_pem_file</code></td>
<td>
<p>A string of a file path to a file containing key
information for SSL validation. Must provide all three - CName, cert file,
and key file - to enable SSL validation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>location</code></td>
<td>
<p>A string of the location to provision the cluster in. If not
specified, defaults to the workspace location. Available regions for this
compute can be found here:
"https://azure.microsoft.com/global-infrastructure/services/?regions=all&amp;products=kubernetes-service".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vnet_resourcegroup_name</code></td>
<td>
<p>A string of the name of the resource group
where the virtual network is located.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vnet_name</code></td>
<td>
<p>A string of the name of the virtual network.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subnet_name</code></td>
<td>
<p>A string of the name of the subnet inside the vnet.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>service_cidr</code></td>
<td>
<p>A string of a CIDR notation IP range from which to assign
service cluster IPs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dns_service_ip</code></td>
<td>
<p>A string of the container's DNS server IP address.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>docker_bridge_cidr</code></td>
<td>
<p>A string of a CIDR notation IP for Docker bridge.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster_purpose</code></td>
<td>
<p>A string describing targeted usage of the cluster.
This is used to provision Azure Machine Learning components to ensure the desired level of fault-tolerance and QoS.
'FastProd' will provision components to handle higher levels of traffic with production quality fault-tolerance. This will default the AKS cluster to have 3 nodes.
'DevTest' will provision components at a minimal level for testing. This will default the AKS cluster to have 1 node.
'FastProd'is the default value.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An <code>AksCompute</code> object.
</p>


<h3>Details</h3>

<p>For more information on using an AksCompute resource within a virtual
network, see
<a href="https://docs.microsoft.com/en-us/azure/machine-learning/service/how-to-enable-virtual-network#use-azure-kubernetes-service-aks">Secure Azure ML experimentation and inference jobs within an Azure Virtual Network</a>.
</p>


<h3>Examples</h3>

<div class="r"><pre># Create an AksCompute cluster using the default configuration (you can also
# provide parameters to customize this)

ws &lt;- load_workspace_from_config()

compute_target &lt;- create_aks_compute(ws, cluster_name = 'mycluster')
wait_for_provisioning_completion(compute_target)
</pre></div>


</div>