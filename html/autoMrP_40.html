<div class="container">

<table style="width: 100%;"><tr>
<td>run_pca</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply PCA classifier to MrP.</h2>

<h3>Description</h3>

<p><code>run_pca</code> is a wrapper function that applies the PCA classifier to data
provided by the user, evaluates prediction performance, and chooses the
best-performing model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">run_pca(
  y,
  L1.x,
  L2.x,
  L2.unit,
  L2.reg,
  loss.unit,
  loss.fun,
  data,
  cores,
  verbose
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Outcome variable. A character vector containing the column names of
the outcome variable. A character scalar containing the column name of
the outcome variable in <code>survey</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L1.x</code></td>
<td>
<p>Individual-level covariates. A character vector containing the
column names of the individual-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. Note that geographic unit
is specified in argument <code>L2.unit</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L2.x</code></td>
<td>
<p>Context-level covariates. A character vector containing the
column names of the context-level variables in <code>survey</code> and
<code>census</code> used to predict outcome <code>y</code>. To exclude context-level
variables, set <code>L2.x = NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L2.unit</code></td>
<td>
<p>Geographic unit. A character scalar containing the column
name of the geographic unit in <code>survey</code> and <code>census</code> at which
outcomes should be aggregated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L2.reg</code></td>
<td>
<p>Geographic region. A character scalar containing the column
name of the geographic region in <code>survey</code> and <code>census</code> by which
geographic units are grouped (<code>L2.unit</code> must be nested within
<code>L2.reg</code>). Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loss.unit</code></td>
<td>
<p>Loss function unit. A character-valued scalar indicating
whether performance loss should be evaluated at the level of individual
respondents (<code>individuals</code>), geographic units (<code>L2 units</code>) or at
both levels. Default is <code>c("individuals", "L2 units")</code>. With multiple
loss units, parameters are ranked for each loss unit and the loss unit with
the lowest rank sum is chosen. Ties are broken according to the order in
the search grid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loss.fun</code></td>
<td>
<p>Loss function. A character-valued scalar indicating whether
prediction loss should be measured by the mean squared error (<code>MSE</code>),
the mean absolute error (<code>MAE</code>), binary cross-entropy
(<code>cross-entropy</code>), mean squared false error (<code>msfe</code>), the f1
score (<code>f1</code>), or a combination thereof. Default is <code>c("MSE",
"cross-entropy","msfe", "f1")</code>. With multiple loss functions, parameters
are ranked for each loss function and the parameter combination with the
lowest rank sum is chosen. Ties are broken according to the order in the
search grid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data for cross-validation. A <code>list</code> of <code class="reqn">k</code>
<code>data.frames</code>, one for each fold to be used in <code class="reqn">k</code>-fold
cross-validation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>The number of cores to be used. An integer indicating the number
of processor cores used for parallel computing. Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Verbose output. A logical argument indicating whether or not
verbose output should be printed. Default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A model formula of the winning best subset classifier model.
</p>


</div>