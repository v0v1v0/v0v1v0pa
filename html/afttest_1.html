<div class="container">

<table style="width: 100%;"><tr>
<td>afttest</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>afttest</h2>

<h3>Description</h3>

<p>afttest
</p>


<h3>Usage</h3>

<pre><code class="language-R">afttest(
  formula,
  data,
  path = 200,
  testType = "omni",
  eqType = "mns",
  optimType = "DFSANE",
  form = 1,
  pathsave = 50
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A formula expression, of the form <code>response ~ predictors</code>.
The <code>response</code> is a <code>Surv</code> object object with right censoring.
See the documentation of <code>lm</code>, <code>coxph</code> and <code>formula</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>An optional data frame in which to interpret the variables occurring 
in the formula.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>An integer value specifies the number of approximated processes.
The default is given by 200.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>testType</code></td>
<td>
<p>A character string specifying the type of the test.
The following are permitted:
</p>

<dl>
<dt><code>omni</code></dt>
<dd>
<p>an omnibus test</p>
</dd>
<dt><code>link</code></dt>
<dd>
<p>a link function test</p>
</dd>
<dt><code>form</code></dt>
<dd>
<p>a functional form</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eqType</code></td>
<td>
<p>A character string specifying the type of the 
estimating equation used to obtain the regression parameters.
The readers are refered to the <span class="pkg">aftgee</span> package for details.
The following are permitted:
</p>

<dl>
<dt><code>mns</code></dt>
<dd>
<p>Regression parameters are estimated by iterating 
the monotonic non-smoothed Gehan-based estimating equations.</p>
</dd>
<dt><code>mis</code></dt>
<dd>
<p>Regression parameters are estimated by iterating 
the monotonic smoothed Gehan-based estimating equations.</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimType</code></td>
<td>
<p>A character string specifying the type of the optimization method.
The following are permitted:
</p>

<dl>
<dt><code>DFSANE</code></dt>
<dd>
<p>See the documentation of <span class="pkg">BB</span> packages for details.</p>
</dd>
<dt><code>Nelder-Mead</code></dt>
<dd>
<p>See the documentation of <code>optim</code> for details.</p>
</dd>
<dt><code>BFGS</code></dt>
<dd>
<p>See the documentation of <code>optim</code> for details.</p>
</dd>
<dt><code>CG</code></dt>
<dd>
<p>See the documentation of <code>optim</code> for details.</p>
</dd>
<dt><code>L-BFGS-B</code></dt>
<dd>
<p>See the documentation of <code>optim</code> for details.</p>
</dd>
<dt><code>SANN</code></dt>
<dd>
<p>See the documentation of <code>optim</code> for details.</p>
</dd>
<dt><code>Brent</code></dt>
<dd>
<p>See the documentation of <code>optim</code> for details.</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>form</code></td>
<td>
<p>A character string specifying the covariate which will be tested.
The argument form is necessary only if <code>testType</code> is <code>form</code>.
The default option for <code>form</code> is given by "1", which represents the 
first covariate in the formula argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pathsave</code></td>
<td>
<p>An integer value specifies he number of paths saved among all the paths.
The default is given by 50. Note that it requires a lot of memory if save all
sampled paths (N by N matrix for each path andso path*N*N elements)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>afttest</code> returns an object of class <code>afttest</code>.
An object of class <code>afttest</code> is a list containing at least the following components:
</p>

<dl>
<dt>beta</dt>
<dd>
<p>a vector of beta estimates based on <code>aftsrr</code></p>
</dd>
<dt>SE_process</dt>
<dd>
<p>estimated standard error of the observed process</p>
</dd>
<dt>obs_process</dt>
<dd>
<p>observed process</p>
</dd>
<dt>app_process</dt>
<dd>
<p>approximated process</p>
</dd>
<dt>obs_std_process</dt>
<dd>
<p>standardized observed process</p>
</dd>
<dt>app_std_process</dt>
<dd>
<p>standardized approximated processes</p>
</dd>
<dt>p_value</dt>
<dd>
<p>obtained by the unstandardized test</p>
</dd>
<dt>p_std_value</dt>
<dd>
<p>obtained by the standardized test</p>
</dd>
<dt>DF</dt>
<dd>
<p>a data frame of observed failure time, right censoring indicator, covariates (scaled), 
time-transformed residual based on beta estimates</p>
</dd>
<dt>path</dt>
<dd>
<p>the number of sample paths</p>
</dd>
<dt>eqType</dt>
<dd>
<p>eqType</p>
</dd>
<dt>testType</dt>
<dd>
<p>testType</p>
</dd>
<dt>optimType</dt>
<dd>
<p>optimType</p>
</dd>
</dl>
<p>For an omnibus test, the observed process and the realizations are composed of the 
n by n matrix that rows represent the t and columns represent the x in the 
time-transformed residual order.The observed process and the simulated processes
for checking a functional form and a link function are given by the n by 1 vector
which is a function of x in the time-transformed residual order.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Simulate data from an AFT model
library(afttest)
library(survival)
datgen &lt;- function(n = 100) {
  z1 &lt;- rbinom(n, 1, 0.5)
  z2 &lt;- rnorm(n)
  e &lt;- rnorm(n)
  tt &lt;- exp(2 + z1 + z2 + e)
  cen &lt;- runif(n, 0, 100)
  data.frame(Time = pmin(tt, cen), status = 1 * (tt &lt; cen),
             z1 = z1, z2 = z2, id = 1:n)
}
set.seed(0)
simdata &lt;- datgen(n = 20)
result &lt;- afttest(Surv(Time, status) ~ z1 + z2, optimType = "DFSANE",
                  data = simdata, testType="link", eqType="mns")
summary(result)
# afttestplot(result)
</code></pre>


</div>